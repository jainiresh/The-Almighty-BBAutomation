"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5626],{58079:function(e,n,t){t.d(n,{BN:function(){return E},Gt:function(){return _},m$:function(){return h}});var o,r,i,a,u,l,s,c,d,p,S,C,g,f,m,A,h,P,E,w,v=t(2265),y=t(83337),b=t(91586),T=t(96093);(o=S||(S={})).Portals="Portals",o.Transfer="Transfer",(r=C||(C={})).Pro="Pro",r.Premium="Premium",(i=g||(g={})).Monthly="Monthly",i.Yearly="Yearly",(a=f||(f={})).SubscriptionFunnel="Subscription Funnel",a.SubscriptionCreated="Subscription Created",a.ErrorShown="Error Shown",a.OrderSummaryUpdated="Order Summary Updated",a.CouponApplied="Coupon Applied",(u=m||(m={})).CreateAccount="Create Account",u.PaymentMethod="Payment Method",u.Password="Password",u.VerifyEmail="Verify Email",(l=A||(A={})).Shown="Shown",l.SignUp="Sign Up",l.SignInClicked="Sign in Clicked",l.Complete="Complete",l.Submit="Submit",l.PasswordSet="Password Set",l.OpenEmail="Open Email",l.ResendEmail="Resend Email",(s=h||(h={})).Email="Email",s.Dropdown="Dropdown",s.Banner="Banner",s.GoogleSSO="Google SSO",s.Automatic="Automatic",s.Manual="Manual",(c=P||(P={})).Step="Step",c.Action="Action",c.Source="Source",c.SubscriptionTier="Subscription Tier",c.BillingPeriod="Billing Period",c.Method="Method",c.PaymentMethod="Payment Method",c.ErrorCode="Error Code",c.Message="Message",c.Content="Content",c.Business="Business",c.Plan="Plan",c.CouponValue="Coupon Value",c.CouponCode="Coupon Code",c.Coupon="Coupon",(d=E||(E={})).CreditCard="Credit Card",d.PayPal="PayPal",d.iDeal="iDeal",d.SoFort="SoFort",d.NoPaymentMethod="No Payment Method",(p=w||(w={})).BillingPeriod="Billing Period",p.Plan="Plan";let B={plugins:{all:!1,amplitude:!0}};function _(){let{selectedPlan:e,coupon:n}=(0,b.HX)(),t="Transfer",o=e.tier===T.Lz.Premium2022?"Premium":"Pro",r=e.billingPeriod===T.tv.Year?"Yearly":"Monthly",i=(0,v.useCallback)(function(){let{errorCode:e,message:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,y.L9)("Error Shown",{"Error Code":e,Message:n},B)},[]),a=(0,v.useCallback)(e=>{let n={Source:t,"Subscription Tier":o,"Billing Period":r,...e};return(0,y.L9)("Subscription Funnel",n,B)},[t,o,r]),u=(0,v.useCallback)(()=>a({Step:"Create Account",Action:"Shown"}),[a]),l=(0,v.useCallback)(()=>a({Step:"Create Account",Action:"Sign Up",Method:"Email"}),[a]),s=(0,v.useCallback)(()=>a({Step:"Create Account",Action:"Sign Up",Method:"Google SSO"}),[a]),c=(0,v.useCallback)(()=>a({Step:"Create Account",Action:"Sign in Clicked"}),[a]),d=(0,v.useCallback)(()=>a({Step:"Payment Method",Action:"Shown"}),[a]),p=(0,v.useCallback)(e=>{let{paymentMethod:n,isForBusiness:t}=e;return a({Step:"Payment Method",Action:"Complete","Payment Method":n,Business:t?"True":"False"})},[a]),S=(0,v.useCallback)(e=>{let{paymentMethod:t,idpUserId:i,isForBusiness:a}=e,u=a?"True":"False",l=n.code,s=n.value;return(0,y.L9)("Subscription Created",{"Payment Method":t,"Subscription Tier":o,"Billing Period":r,Business:u,"Coupon Code":l,"Coupon Value":s},B),(0,y.yV)(i,{"Subscription Tier":o,"Billing Period":r,Business:u,Coupon:l},B)},[r,n.code,n.value,o]),C=(0,v.useCallback)(()=>a({Step:"Password",Action:"Shown"}),[a]),g=(0,v.useCallback)(()=>a({Step:"Password",Action:"Submit"}),[a]),f=(0,v.useCallback)(()=>a({Step:"Password",Action:"Password Set"}),[a]),m=(0,v.useCallback)(()=>a({Step:"Verify Email",Action:"Shown"}),[a]),A=(0,v.useCallback)(()=>a({Step:"Verify Email",Action:"Open Email"}),[a]),h=(0,v.useCallback)(()=>a({Step:"Verify Email",Action:"Resend Email"}),[a]),P=(0,v.useCallback)(e=>{let{newBillingPeriod:n,method:t}=e;return(0,y.L9)("Order Summary Updated",{Content:"Billing Period",Action:n===T.tv.Month?"Monthly":"Yearly",Method:t},B)},[]),E=(0,v.useCallback)(e=>(0,y.L9)("Order Summary Updated",{Content:"Plan",Action:e===T.Lz.Pro2022?"Pro":"Premium"},B),[]),w=(0,v.useCallback)(e=>{let{couponCode:n,couponCodeValue:t,method:i}=e;return(0,y.L9)("Coupon Applied",{Plan:o,"Billing Period":r,"Coupon Value":t,"Coupon Code":n,Method:i},B)},[r,o]);return{trackErrorEvent:i,trackCreateAccountShown:u,trackEmailSubmitted:l,trackGoogleSSOSelected:s,trackSignInSelected:c,trackPaymentShown:d,trackPaymentSubmitted:p,trackPaymentSuccessful:S,trackSetPasswordShown:C,trackPasswordSubmitted:g,trackPasswordSet:f,trackVerifyShown:m,trackSniperLinkClicked:A,trackResendLinkClicked:h,trackBillingPeriodChange:P,trackTierChange:E,trackCouponCodeAdded:w}}},83337:function(e,n,t){let o;t.d(n,{L9:function(){return E},S1:function(){return m},Z0:function(){return P},yV:function(){return w}});var r=t(76722),i=t.n(r),a=t(68784),u=t.n(a),l=t(90929),s=t(56947),c=t(17028);let d=!1,p=!1,S=!1,C=!1,g=[],f=[];function m(e){let{enabled:n,debug:t=!1,cookieDomain:r,trackers:a}=e;(0,c.getIsBrowser)()&&(d=n,p=t,C||(C=!0,g=[...a.amplitude?[i()({enabled:d,...a.amplitude})]:[],...a.snowplow?[u()({name:"snowplow",collectorUrl:a.snowplow.collector,trackerSettings:{appId:"checkout",bufferSize:1,encodeBase64:!1,respectDoNotTrack:!0,stateStorageStrategy:"cookie",cookieName:"_wt_snowplow",discoverRootDomain:!1,cookieSameSite:"Lax",cookieDomain:r,contexts:{webPage:!0,session:!1},plugins:[(0,l.T)(a.snowplow.debugLogLevel)]}})]:[]],(o=(0,s.ZP)({app:"checkout-client-tracker",debug:p,plugins:g})).ready(()=>{S=!0,d&&A()}),o.on("initialize:snowplow",e=>{let{instance:n}=e;n.plugins.snowplow.enableActivityTracking(10,15)})))}async function A(){if(d=!0,!S)return;let e=g.map(e=>e.name);await o.plugins.enable(e),await h()}async function h(){d&&0!==f.length&&(await Promise.all(f.map(e=>{switch(e.type){case"event":let{event:n,...t}=e.payload;return E(n,t,e.options);case"pageView":let{url:o,...r}=e.payload;return P(o,r)}})),f=[])}function P(e,n){if(!(0,c.getIsBrowser)())return;let t=new URL("".concat(window.location.origin).concat(e));if(!d){f.push({type:"pageView",payload:{url:"".concat(t.pathname).concat(t.search),...n}});return}return o.page({url:"".concat(t.pathname).concat(t.search),...n},{plugins:{all:!1,snowplow:!0}})}function E(e,n,t){if((0,c.getIsBrowser)()){if(!d){f.push({type:"event",payload:{event:e,...n},options:t});return}return o.track(e,{...n},t)}}function w(e,n,t){if((0,c.getIsBrowser)())return o.identify(e,{...n},{...t})}},77369:function(e,n,t){t.d(n,{H:function(){return o}});class o extends Error{constructor(e,n){super(e),this.message=e,this.response=n}}},6738:function(e,n,t){t.d(n,{h:function(){return g},A:function(){return C}});var o=t(2265),r=t(30713),i=t(40122),a=t(3866),u=t(91586),l=t(84087),s=t(26968),c=t(77369),d=t(17028),p=t(2314);async function S(e,n){let t,{method:o="GET",headers:r,params:i,body:a,endpoint:u,ip:l,errorCodesToNotReport:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},S=new URLSearchParams(i||{}),C=new Headers({"Content-Type":"application/json",...r});l&&C.set("X-Forwarded-For",l);let g=S.toString(),f=u||((0,d.getIsBrowser)()?e.checkoutBffApiBase:e.checkoutBffApiBasePrivate);try{let e;let r=await fetch("".concat(f).concat(n).concat(g?"?".concat(g):""),{method:o,body:"GET"!==o&&void 0!==a?JSON.stringify(a):void 0,headers:C});try{t=await r.json()}catch(n){e=n}if(!r.ok){let e=r.statusText;throw t&&"message"in t&&(e=t.message),new c.H(e,t)}if(e)throw e}catch(o){let e=o instanceof c.H,t=!e||o.response&&"code"in o.response&&!(null==s?void 0:s.includes(o.response.code));if(t){var m,A;(0,p.e)(o,{path:n,...e&&{code:null===(m=o.response)||void 0===m?void 0:m.code,httpStatusCode:null===(A=o.response)||void 0===A?void 0:A.httpStatusCode}})}throw o}return t}function C(){let e=(0,a.useConfig)(),{user:n}=(0,s.a)();return(0,o.useCallback)(async function(t){let{useBffToken:o=!0,useAuthPathAndHeadersIfAvailable:r=!1,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,l.I)((0,u.qA)()),c=null==s?void 0:s.sessionId,d=null==s?void 0:s.bffToken,p=r&&n,C=p&&!t.startsWith("/auth")?"/auth"+t:t;return S(e,C,{...a,headers:{...a.headers,...p&&{Authorization:"Bearer ".concat(await (0,i.hP)())},...o&&c&&d&&!p&&{"X-Session-ID":c,"X-Token":d}}})},[e,n])}function g(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=C();return(0,r.ZP)(!!e&&[e,n],()=>o(e,n),t)}},7456:function(e,n,t){t.d(n,{D:function(){return i}});var o=t(12829),r=t(25566);let i={env:String(r.env.ENV),gitRef:String(r.env.GIT_REF),cookieDomain:String(r.env.COOKIE_DOMAIN),checkoutBffApiBase:String(r.env.CHECKOUT_BFF_API_BASE),checkoutBffApiBasePrivate:String(r.env.CHECKOUT_BFF_API_BASE_PRIVATE),wetransferBase:String(r.env.WETRANSFER_BASE),portalsBase:String(r.env.PORTALS_BASE),datadog:{applicationId:String(r.env.DATADOG_APPLICATION_ID),clientToken:String(r.env.DATADOG_CLIENT_TOKEN),sessionSampleRate:Number(r.env.DATADOG_SESSION_SAMPLE_RATE),sessionReplaySampleRate:Number(r.env.DATADOG_SESSION_REPLAY_SAMPLE_RATE),telemetrySampleRate:Number(r.env.DATADOG_TELEMETRY_SAMPLE_RATE)},analytics:{enabled:"true"===r.env.ANALYTICS_ENABLED,debug:"true"===r.env.ANALYTICS_DEBUG,amplitude:{apiKey:String(r.env.AMPLITUDE_API_KEY),deploymentKey:String(r.env.AMPLITUDE_DEPLOYMENT_KEY)},snowplow:{collector:String(r.env.SNOWPLOW_COLLECTOR),debugLogLevel:"true"===String(r.env.SNOWPLOW_DEBUG)?o.pO.debug:o.pO.none}},auth0:{clientId:String(r.env.AUTH0_CLIENT_ID),audience:String(r.env.AUTH0_AUDIENCE),issuerBaseUrl:String(r.env.AUTH0_ISSUER_BASE_URL)},stripe:{publishableKey:String(r.env.STRIPE_PUBLISHABLE_KEY)}}},3866:function(e,n,t){t.r(n),t.d(n,{ConfigContext:function(){return a},ConfigProvider:function(){return u},useConfig:function(){return l}});var o=t(57437),r=t(2265),i=t(7456);let a=(0,r.createContext)(i.D);function u(e){let{config:n,children:t}=e;return(0,o.jsx)(a.Provider,{value:n,children:t})}function l(){return(0,r.useContext)(a)}},84087:function(e,n,t){t.d(n,{I:function(){return r},J:function(){return i}});var o=t(91586);function r(e){var n;return null==e?void 0:null===(n=e.sessions)||void 0===n?void 0:n[null==e?void 0:e.user.email]}function i(){return r((0,o.HX)())}},26968:function(e,n,t){t.d(n,{a:function(){return a}});var o=t(51958),r=t(48307);let i=function(){let e=(0,o.sj)({isLoading:!0,user:null,authStatus:null,setUser:n=>{e.user=n},setAuthStatus:n=>{e.authStatus=n},setIsLoading:n=>{e.isLoading=n}});return e}();function a(){return(0,r.R)(i)}}}]);
//# sourceMappingURL=5626-b835bfa634874d15.js.map
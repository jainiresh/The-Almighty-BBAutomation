"use strict";(self.webpackChunkensemble_client=self.webpackChunkensemble_client||[]).push([[933],{52949:function(n,e,t){t.d(e,{s:function(){return f}});var i=t(1413),r=t(45987),a=t(72791),o=t(39230),u=t(24566),d=t(99426),l="ConfirmModal_modal__2yM2B",c="ConfirmModal_title__3OnWU",s="ConfirmModal_body__XVNC7",m="ConfirmModal_confirmButton__NuBzc",v=t(80184),p=["title","body","confirmText","cancelText","onConfirm","onCancel"];function f(n){var e=n.title,t=n.body,f=n.confirmText,h=n.cancelText,I=n.onConfirm,b=n.onCancel,w=(0,r.Z)(n,p),_=(0,o.$G)().t,g=(0,a.useRef)(null);return(0,v.jsxs)(d.u,(0,i.Z)((0,i.Z)({styleOverrides:l,initialFocusRef:g,"data-test-id":"modal.confirm"},w),{},{children:[(0,v.jsx)("h1",{className:c,children:e}),t?(0,v.jsx)("p",{className:s,children:t}):null,(0,v.jsx)(u.LE,{className:m,onClick:I,children:f||_("modal.confirm.confirm")}),(0,v.jsx)(u.LE,{ref:g,appearance:"secondary",onClick:b,children:h||_("modal.confirm.cancel")})]}))}},5626:function(n,e,t){t.d(e,{V:function(){return m}});var i=t(15861),r=t(64687),a=t.n(r),o=t(72791),u=t(24566),d=t(19055),l="CopyTextInput_container__hImsE",c="CopyTextInput_icon__IXght",s=t(80184);function m(n){var e=n.text,t=n.onAfterCopy,r=n.onCopyFail,m=(0,o.useRef)(null),v=function(){var n=(0,i.Z)(a().mark((function n(){var i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,null===(i=m.current)||void 0===i||i.select(),n.next=4,navigator.clipboard.writeText(e);case 4:null===t||void 0===t||t(),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),null===r||void 0===r||r();case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}(),p=Math.min(20,e.length);return(0,s.jsxs)("div",{className:l,children:[(0,s.jsx)("input",{ref:m,readOnly:!0,value:e,size:p,"data-test-id":"copyTextInput.input",onClick:v}),(0,s.jsx)(u.hU,{onClick:v,className:c,"data-test-id":"copyTextInput.button",children:(0,s.jsx)(d.CK,{size:"small"})})]})}},87366:function(n,e,t){t.d(e,{O:function(){return w}});var i=t(1413),r=t(4942),a=t(29439),o=t(45987),u=t(75120),d=t(25215),l=t(81694),c=t.n(l),s=t(72791),m="DynamicTextarea_container__1dZHx",v="DynamicTextarea_iconContainer__ABQjh",p="DynamicTextarea_isVisible__Cvy1-",f="DynamicTextarea_textareaContainer__FW-xD",h="DynamicTextarea_textarea__rVfgE",I=t(80184),b=["className","value","testId","initialHeight","isDisabled","onBlur","onChange","onFocus","defaultIcon","hoverIcon","canInsertLineBreaks","showUploadHero"],w=(0,s.forwardRef)((function(n,e){var t=n.className,l=n.value,w=n.testId,_=void 0===w?"dynamicTextarea":w,g=n.initialHeight,x=n.isDisabled,y=void 0!==x&&x,C=n.onBlur,k=n.onChange,Z=n.onFocus,T=n.defaultIcon,N=n.hoverIcon,$=n.canInsertLineBreaks,S=void 0===$||$,j=n.showUploadHero,W=(0,o.Z)(n,b),D=(0,s.useState)(!1),R=(0,a.Z)(D,2),A=R[0],M=R[1],H=(0,s.useState)(!1),E=(0,a.Z)(H,2),F=E[0],P=E[1],L=(0,s.useRef)(null);(0,d.Z)()((0,u.Z)((function(){B()}),void 0,50));var B=(0,s.useCallback)((function(){var n=L.current;n&&n.style.height!=="".concat(n.scrollHeight,"px")&&(n.style.height=g?"".concat(g,"px"):"auto",n.style.height="".concat(n.scrollHeight,"px"))}),[g,L]);(0,s.useEffect)((function(){B()}),[B,j]);var O=(0,s.useCallback)((function(n){S&&"Enter"===n.key&&n.shiftKey||"Enter"!==n.key&&"Escape"!==n.key||n.currentTarget.blur()}),[S]),U=(0,s.useCallback)((function(n){P(!0),null===Z||void 0===Z||Z(n)}),[P,Z]),z=(0,s.useCallback)((function(n){P(!1);var e=n.target.value.trim();null===C||void 0===C||C(e)}),[C]),X=(0,s.useCallback)((function(n){B(),null===k||void 0===k||k(n)}),[k,B]),G=(0,s.useCallback)((function(){W.disabled||M(!0)}),[M,W.disabled]),V=(0,s.useCallback)((function(){W.disabled||M(!1)}),[M,W.disabled]),q=A||F||T,K=T&&(!A&&!F||W.disabled)?T:N;return(0,I.jsxs)("div",{className:c()(m),ref:e,children:[K&&(0,I.jsx)("div",{className:c()(v,(0,r.Z)({},p,q)),children:K}),(0,I.jsx)("div",{className:c()(f),onMouseEnter:G,onMouseLeave:V,children:(0,I.jsx)("textarea",(0,i.Z)((0,i.Z)({},W),{},{ref:L,className:c()(h,t),value:l,onKeyDown:O,onFocus:U,onBlur:z,onChange:X,"data-test-id":_,disabled:y}))})]})}))},28854:function(n,e,t){t.d(e,{S:function(){return v}});var i=t(1413),r=t(4942),a=t(45987),o=t(81694),u=t.n(o),d="FileInput_container__lYm6I",l="FileInput_disabled__53WF1",c="FileInput_fileInput__XRFJQ",s=t(80184),m=["children","onFilesSelected","maxFiles","accept","disabled","className"];function v(n){var e=n.children,t=n.onFilesSelected,o=n.maxFiles,v=void 0===o?0:o,p=n.accept,f=n.disabled,h=n.className,I=(0,a.Z)(n,m),b=u()(d,(0,r.Z)({},l,f),h);return(0,s.jsxs)("label",(0,i.Z)((0,i.Z)({className:b},I),{},{children:[(0,s.jsx)("input",{type:"file",className:c,onChange:function(n){var e=n.target.files;e&&(v&&e.length>v?t(null,{message:"TOO_MANY_FILES"}):(t(e),n.target.value=""))},multiple:!v||v>1,accept:p,disabled:f,"data-test-id":"input.file"}),e]}))}},98037:function(n,e,t){t.d(e,{c:function(){return u}});var i=t(39230),r=t(65310),a=t(35082),o=t(80184);function u(n){var e=n.hidePopover,t=n.guestEmail,u=n.onClick,d=(0,i.$G)().t;return(0,o.jsx)(r.YI,{className:a.Z.menuPopover,children:e?null:(0,o.jsxs)("div",{className:a.Z.infoMenu,children:[(0,o.jsx)("p",{className:a.Z.infoText,children:d("identity_label.as_a_guest")}),(0,o.jsx)("p",{className:a.Z.infoEmail,children:t}),(0,o.jsx)("button",{className:a.Z.infoButton,onClick:u,children:d("identity_label.not_you")})]})})}},13368:function(n,e,t){t.d(e,{U:function(){return m}});var i=t(88329),r=t(72791),a=t(59434),o=t(78402),u=t(28301),d=t(21673),l="wt_tandc",c="20190527",s="".concat(c,":").concat("1");function m(){var n=(0,a.v9)(d.q),e=(0,r.useCallback)((function(){var n=(0,o.y)(window.location.href);i.Z.withConverter({write:function(n){return encodeURIComponent(n)}}).set(l,s,{secure:!u.D.isDev,expires:365,domain:n})}),[]);return{areAccepted:(0,r.useCallback)((function(){if(n)return!0;var t=i.Z.get(l);return t===s||("1"===t||t===c)&&(e(),!0)}),[e,n]),accept:e}}},25065:function(n,e,t){t.d(e,{v:function(){return x}});var i,r=t(1413),a=t(29439),o=t(45987),u=t(81694),d=t.n(u),l=t(72791),c=t(39230),s=t(89985),m=t(24566),v=t(19055),p=t(1508),f=t(77176),h=t(15307),I=t(13368),b=t(96855),w={body:"IdentificationModal_body__6btDu",logoContainer:"IdentificationModal_logoContainer__2IYbX",button:"IdentificationModal_button__RM28s",progressDotsWrapper:"IdentificationModal_progressDotsWrapper__NPuN6",progressDot:"IdentificationModal_progressDot__bOfp-",active:"IdentificationModal_active__6f9HM",link:"IdentificationModal_link__1+y8D",signInButton:"IdentificationModal_signInButton__eQmYL",underline:"IdentificationModal_underline__mL52E",input:"IdentificationModal_input__FM85T",inputBackground:"IdentificationModal_inputBackground__8TEjl",inputIcon:"IdentificationModal_inputIcon__vVHxO",inputPlaceholder:"IdentificationModal_inputPlaceholder__n2HMr",termsAndConditions:"IdentificationModal_termsAndConditions__0iWin",termsLabel:"IdentificationModal_termsLabel__a6ozi"},_=t(80184),g=["logoUrl","onDismiss","teamName","identifiedGuest","showTermsAndConditions","onSubmit"];function x(n){var e=n.logoUrl,t=n.onDismiss,u=n.teamName,x=n.identifiedGuest,y=n.showTermsAndConditions,C=n.onSubmit,k=(0,o.Z)(n,g),Z=(0,c.$G)().t,T=(0,l.useState)(""),N=(0,a.Z)(T,2),$=N[0],S=N[1],j=(0,l.useState)(),W=(0,a.Z)(j,2),D=W[0],R=W[1],A=(0,l.useState)(),M=(0,a.Z)(A,2),H=M[0],E=M[1],F=(0,I.U)(),P=F.areAccepted,L=F.accept,B=P(),O=x&&!B||y?i.TermsAndConditions:i.Welcome;function U(n){if(n.preventDefault(),""!==$&&!(0,h.J)($))return E(Z("error.reviewer_email_invalid_error")),void R("error");C($)}var z=d()(w.input);return(0,_.jsxs)(p.u,(0,r.Z)((0,r.Z)({},k),{},{ariaLabel:Z("identification_modal.title"),onDismiss:function(n){B&&(null===t||void 0===t||t(n))},children:[O===i.Welcome&&(0,_.jsxs)(_.Fragment,{children:[e&&(0,_.jsx)("div",{className:w.logoContainer,children:(0,_.jsx)(s.q,{className:w.avatar,size:"large",imageUrl:e})}),(0,_.jsx)("p",{className:w.body,children:Z("identification_modal.body_new",{teamName:u})}),(0,_.jsxs)("form",{onSubmit:U,children:[(0,_.jsx)(f.o,{backgroundClassName:d()(w.inputBackground),className:z,inputClassName:d()(w.inputPlaceholder),value:$,onChange:function(n){return S(n.target.value)},type:"email",prefix:(0,_.jsx)(v.n5,{size:"extra-large",className:d()(w.inputIcon)}),placeholder:Z("identification_modal.input_placeholder"),status:D,hint:H}),(0,_.jsx)(m.LE,{className:w.button,size:"regular",onClick:U,"data-test-id":"identification_modal.continue",children:Z("identification_modal.continue")})]}),(0,_.jsx)("button",{className:w.signInButton,onClick:function(){b.ho.login({appState:{redirectUrl:window.location.href}})},children:(0,_.jsxs)(_.Fragment,{children:[Z("identification_modal.existing_user_login_message"),"\xa0",(0,_.jsx)("span",{className:w.underline,children:Z("identification_modal.existing_user_login_cta")})]})})]}),O===i.TermsAndConditions&&(0,_.jsxs)("div",{className:w.termsAndConditions,children:[(0,_.jsx)("p",{className:d()(w.body,w.termsLabel),"data-test-id":"identification_modal.before_you_get_started",children:(0,_.jsx)(c.cC,{i18nKey:"identification_modal.before_you_get_started_new",components:[(0,_.jsx)("a",{className:w.link,href:"https://wetransfer.com/legal/terms",rel:"noreferrer",target:"_blank",children:","})]})}),(0,_.jsx)(m.LE,{className:w.button,size:"regular",onClick:function(n){L(),x||y?null===t||void 0===t||t(n):C($)},autoFocus:!0,"data-test-id":"identification_modal.continue",children:Z("identification_modal.i_accept")})]})]}))}!function(n){n[n.Welcome=1]="Welcome",n[n.TermsAndConditions=2]="TermsAndConditions"}(i||(i={}))},84916:function(n,e,t){t.d(e,{c:function(){return c}});var i=t(29439),r=t(72791),a=t(59434),o=t(8004),u=t(52662),d=t(85885),l=!1;function c(n){var e=n.guestEmail,t=n.actionRequests,c=n.owningTeam,s=n.isFetchingGuestToken,m=(0,r.useState)("LOADING"),v=(0,i.Z)(m,2),p=v[0],f=v[1],h=(0,a.v9)(d.HF),I=(0,a.v9)(u.BX),b=(0,a.v9)(u.Gx),w=(0,o.o)();(0,r.useEffect)((function(){return s||!c?f("LOADING"):h&&I&&c&&b.find((function(n){return n.id===c}))?f("OWNER"):(null===t||void 0===t?void 0:t.some((function(n){return n.email===e})))?e===(null===h||void 0===h?void 0:h.email)&&b.find((function(n){return n.id===c}))?f("OWNER"):f("REVIEWER"):f(e?"GUEST":"UNKNOWN_GUEST")}),[I,h,t,e,b,c,s]);var _=(0,r.useCallback)((function(n){l=n}),[]);return(0,r.useEffect)((function(){"LOADING"!==p&&w.updateIdentityData({identity:p})}),[p,w]),{identity:p,interactedOnceWithIdentity:l,setInteractedOnceWithIdentity:_}}},40040:function(n,e,t){t.d(e,{O:function(){return u}});var i=t(59434),r=t(98325),a=t(52662),o=t(51526);function u(n,e){var t=(0,i.I0)(),u=(0,i.v9)(a.Gx);return{swapTeams:function(){if(!(u&&u.length<=1||n===e)){var i=u.find((function(n){return n.id===e}));i&&(t((0,o.Vk)(i)),(0,r.RK)(i.id))}}}}},21706:function(n,e,t){t.d(e,{fg:function(){return z},Uj:function(){return g},YF:function(){return G},jw:function(){return C},DF:function(){return q},Tw:function(){return N},ac:function(){return S},sq:function(){return D},Ad:function(){return L},z$:function(){return P}});var i,r,a,o,u,d,l,c,s,m,v=t(1413),p=t(15861),f=t(30168),h=t(64687),I=t.n(h),b=t(55911),w=t(87843),_=(0,b.Ps)(i||(i=(0,f.Z)(["\n  mutation CreateReviewItem(\n    $reviewId: String!\n    $attributes: [CreateReviewItemAttributes!]!\n  ) {\n    batchCreateReviewItem(reviewId: $reviewId, attributes: $attributes) {\n      reviewItems {\n        isProcessingComplete\n        publicId\n        stormId\n        order\n        name\n        size\n        itemType\n        reviewId\n        preview {\n          videoStatic {\n            url\n            format\n            metadata {\n              framerate\n            }\n          }\n          videoStream {\n            url\n            format\n            metadata {\n              framerate\n            }\n          }\n          audio {\n            url\n            format\n          }\n        }\n      }\n    }\n  }\n"]))),g=function(n){var e=n.reviewId,t=n.reviewItems;return function(){var n=(0,p.Z)(I().mark((function n(i,r,a){var o,u,d,l,c,s;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=a.client,i((0,w.j$)(t)),u=t.map((function(n){return{publicId:n.publicId,itemType:n.itemType,name:n.name,fileSize:n.size}})),n.next=5,o.mutation(_,{reviewId:e,attributes:u},{additionalTypenames:["Review"]});case 5:return(d=n.sent).error||(s=null===(l=d.data)||void 0===l||null===(c=l.batchCreateReviewItem.reviewItems)||void 0===c?void 0:c.map((function(n){var e=t.find((function(e){return e.publicId===n.publicId}));return(0,v.Z)((0,v.Z)({},n),{},{order:(null===e||void 0===e?void 0:e.order)||n.order})})),i((0,w.j$)(null!==s&&void 0!==s?s:[]))),n.abrupt("return",d);case 8:case"end":return n.stop()}}),n)})));return function(e,t,i){return n.apply(this,arguments)}}()},x=t(28447),y=(0,b.Ps)(r||(r=(0,f.Z)(["\n  mutation DeleteReviewItemsMutation($reviewItemIds: [String!]!) {\n    batchDeleteReviewItem(reviewItemIds: $reviewItemIds) {\n      notDeletedReviewItems {\n        publicId\n      }\n      errors\n    }\n  }\n"]))),C=function(n){var e=n.reviewId,t=n.reviewItemIds;return function(){var n=(0,p.Z)(I().mark((function n(i,r,a){var o,u,d,l;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d=a.client,i((0,w.Ce)(t)),n.next=4,d.mutation(y,{reviewItemIds:t},{additionalTypenames:["Review","ReviewCollection"]});case 4:if((l=n.sent).error||i((0,x.FX)(e)),!(l.error||(null!==(o=null===(u=l.data)||void 0===u?void 0:u.batchDeleteReviewItem.errors.length)&&void 0!==o?o:0)>0)){n.next=9;break}return n.next=9,i(D({reviewId:e}));case 9:return n.abrupt("return",l);case 10:case"end":return n.stop()}}),n)})));return function(e,t,i){return n.apply(this,arguments)}}()},k=t(93433),Z=t(3605),T=(0,b.Ps)(a||(a=(0,f.Z)(["\n  query previewPollingQuery(\n    $reviewId: String!\n    $previewWidth: Int!\n    $previewHeight: Int!\n  ) {\n    review(id: $reviewId) {\n      items {\n        nodes {\n          publicId\n          previewStatus\n          createdAt\n          preview(previewHeight: $previewHeight, previewWidth: $previewWidth) {\n            image {\n              url\n              format\n            }\n            video {\n              metadata {\n                width\n                height\n              }\n            }\n            videoStatic {\n              url\n              format\n              metadata {\n                framerate\n              }\n            }\n            videoStream {\n              url\n              format\n              metadata {\n                framerate\n              }\n            }\n            audio {\n              url\n              format\n            }\n            audioFull {\n              url\n              format\n            }\n            audioVisualization {\n              imageWaveform\n              textWaveform\n            }\n            document {\n              url\n              format\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),N=function(n){var e=n.reviewId,t=n.previewWidth,i=void 0===t?480:t,r=n.previewHeight,a=void 0===r?640:r,o=n.itemsWithoutPreviews;return function(){var n=(0,p.Z)(I().mark((function n(t,r,u){var d,l,c,s,m,v;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=u.client,n.next=3,s.query(T,{reviewId:e,previewWidth:i,previewHeight:a});case 3:if(m=n.sent,null!==(d=m.data)&&void 0!==d&&d.review){n.next=6;break}return n.abrupt("return");case 6:(v=null===(l=m.data.review.items)||void 0===l||null===(c=l.nodes)||void 0===c?void 0:c.reduce((function(n,e){var t,i,r;return e&&e.preview&&(null!==(t=e.preview.image)&&void 0!==t&&t.url||null!==(i=e.preview.document)&&void 0!==i&&i.url||null!==(r=e.preview.audioVisualization)&&void 0!==r&&r.imageWaveform)&&o.includes(e.publicId)?[].concat((0,k.Z)(n),[{publicId:e.publicId,preview:e.preview,previewStatus:Z.H.Ready}]):n}),[]))&&v.length>0&&t(P({reviewId:e,attributes:v}));case 8:case"end":return n.stop()}}),n)})));return function(e,t,i){return n.apply(this,arguments)}}()},$=(0,b.Ps)(o||(o=(0,f.Z)(["\n  query ReviewQueryByPortal(\n    $portalId: String!\n    $previewWidth: Int!\n    $previewHeight: Int!\n  ) {\n    reviewCollection(id: $portalId) {\n      reviews {\n        nodes {\n          publicId\n          teamId\n          items(first: 1) {\n            nodes {\n              isProcessingComplete\n              publicId\n              stormId\n              order\n              name\n              size\n              itemType\n              reviewId\n              note\n              createdAt\n              favoritedBy {\n                email\n              }\n              approvedBy {\n                email\n              }\n              link {\n                url\n              }\n              preview(\n                previewHeight: $previewHeight\n                previewWidth: $previewWidth\n              ) {\n                image {\n                  url\n                  format\n                }\n                video {\n                  metadata {\n                    width\n                    height\n                  }\n                }\n                videoStatic {\n                  url\n                  format\n                  metadata {\n                    framerate\n                  }\n                }\n                videoStream {\n                  url\n                  format\n                  metadata {\n                    framerate\n                  }\n                }\n                audio {\n                  url\n                  format\n                }\n                audioFull {\n                  url\n                  format\n                }\n                audioVisualization {\n                  imageWaveform\n                  textWaveform\n                }\n                document {\n                  url\n                  format\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),S=function(n){var e=n.portalId,t=n.previewWidth,i=n.previewHeight;return function(){var n=(0,p.Z)(I().mark((function n(r,a,o){var u,d,l,c,s,m,v,p;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return m=o.client,n.next=3,m.query($,{portalId:e,previewWidth:t,previewHeight:i});case 3:if(v=n.sent,null!==(u=v.data)&&void 0!==u&&u.reviewCollection){n.next=6;break}return n.abrupt("return");case 6:p=null!==(d=null===(l=v.data.reviewCollection)||void 0===l||null===(c=l.reviews)||void 0===c||null===(s=c.nodes)||void 0===s?void 0:s.flatMap((function(n){var e,t;return null!==(e=null===(t=n.items)||void 0===t?void 0:t.nodes)&&void 0!==e?e:[]})))&&void 0!==d?d:[],r((0,w.j$)(p));case 8:case"end":return n.stop()}}),n)})));return function(e,t,i){return n.apply(this,arguments)}}()},j=t(28611),W=(0,b.Ps)(u||(u=(0,f.Z)(["\n  query ReviewQuery(\n    $reviewId: String!\n    $previewWidth: Int!\n    $previewHeight: Int!\n  ) {\n    review(id: $reviewId) {\n      items {\n        nodes {\n          isProcessingComplete\n          publicId\n          stormId\n          order\n          name\n          size\n          itemType\n          reviewId\n          note\n          createdAt\n          comments {\n            totalCount\n            nodes {\n              author\n              body\n              createdAt\n              updatedAt\n              publicId\n              anchor {\n                publicId\n                page\n                timestamp\n                markup\n              }\n            }\n          }\n          favoritedBy {\n            email\n          }\n          approvedBy {\n            email\n          }\n          link {\n            url\n          }\n          previewStatus\n          preview(previewHeight: $previewHeight, previewWidth: $previewWidth) {\n            image {\n              url\n              format\n            }\n            video {\n              metadata {\n                width\n                height\n              }\n            }\n            videoStatic {\n              url\n              format\n              metadata {\n                framerate\n              }\n            }\n            videoStream {\n              url\n              format\n              metadata {\n                framerate\n              }\n            }\n            audio {\n              url\n              format\n            }\n            audioFull {\n              url\n              format\n            }\n            audioVisualization {\n              imageWaveform\n              textWaveform\n            }\n            document {\n              url\n              format\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),D=function(n){var e=n.reviewId,t=n.previewWidth,i=void 0===t?480:t,r=n.previewHeight,a=void 0===r?640:r;return function(){var n=(0,p.Z)(I().mark((function n(t,r,o){var u,d,l,c,s,m,p;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=o.client,n.next=3,c.query(W,{reviewId:e,previewWidth:i,previewHeight:a});case 3:if(s=n.sent,null!==(u=s.data)&&void 0!==u&&u.review){n.next=6;break}return n.abrupt("return");case 6:m=null!==(d=null===(l=s.data.review.items)||void 0===l?void 0:l.nodes)&&void 0!==d?d:[],p=m.map((function(n){var e=n.comments,t=n.publicId,i=n.reviewId;return(0,v.Z)((0,v.Z)({},e),{},{publicId:t,reviewId:i})})),p.length>0&&t((0,x.h0)(p)),t((0,w.XL)(m)),t((0,j.E)(e));case 11:case"end":return n.stop()}}),n)})));return function(e,t,i){return n.apply(this,arguments)}}()},R=t(43893),A=t(45987),M=["publicId","isProcessingComplete"],H=["preview"],E=["publicId"],F=(0,b.Ps)(d||(d=(0,f.Z)(["\n  mutation UpdateReviewItemMutation(\n    $reviewId: String!\n    $attributes: [UpdateReviewItemAttributes!]!\n  ) {\n    batchUpdateReviewItem(reviewId: $reviewId, attributes: $attributes) {\n      reviewItems {\n        isProcessingComplete\n        publicId\n        stormId\n        order\n        name\n        size\n        itemType\n        reviewId\n        note\n        previewStatus\n      }\n      errors\n    }\n  }\n"]))),P=function(n){var e=n.reviewId,t=n.attributes;return function(){var n=(0,p.Z)(I().mark((function n(i,r,a){var o,u,d,l,c,s;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=a.client,i((0,w.jK)(t.map((function(n){var e=n.publicId;n.isProcessingComplete;return{id:e,changes:(0,A.Z)(n,M)}})))),n.next=4,u.mutation(F,{reviewId:e,attributes:t.map((function(n){n.preview;var e=(0,A.Z)(n,H);return(0,v.Z)({},e)}))});case 4:return(d=n.sent).error||null!==(o=d.data)&&void 0!==o&&o.batchUpdateReviewItem.errors.length||i((0,w.jK)(null!==(l=null===(c=d.data)||void 0===c||null===(s=c.batchUpdateReviewItem.reviewItems)||void 0===s?void 0:s.map((function(n){return{id:n.publicId,changes:(0,A.Z)(n,E)}})))&&void 0!==l?l:[])),n.abrupt("return",d);case 7:case"end":return n.stop()}}),n)})));return function(e,t,i){return n.apply(this,arguments)}}()},L=function(n){var e=n.reviewId,t=n.movedItemIndex,i=n.targetItemIndex,r=n.reviewItems;return function(){var n=(0,p.Z)(I().mark((function n(a,o,u){var d,l;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d=u.client,l=(0,R.Rp)(r,t,i),a((0,w.jK)(l.map((function(n,e){return{id:n.publicId,changes:(0,v.Z)((0,v.Z)({},n),{},{order:r[e].order})}})))),n.next=5,d.mutation(F,{reviewId:e,attributes:[{publicId:r[t].publicId,sortOrderPosition:i}]},{additionalTypenames:["ReviewCollection"]});case 5:if(!n.sent.error){n.next=9;break}return n.next=9,a(D({reviewId:e}));case 9:case"end":return n.stop()}}),n)})));return function(e,t,i){return n.apply(this,arguments)}}()},B=t(54261),O=(0,b.Ps)(l||(l=(0,f.Z)(["\n  mutation createComment($attributes: CommentAttributes!, $token: String) {\n    createComment(attributes: $attributes, token: $token) {\n      comment {\n        author\n        body\n        createdAt\n        publicId\n      }\n      errors\n    }\n  }\n"]))),U=(0,b.Ps)(c||(c=(0,f.Z)(["\n  mutation createAnchor($attributes: AnchorAttributes!, $token: String) {\n    createAnchor(attributes: $attributes, token: $token) {\n      anchor {\n        anchorableId\n        anchorableType\n        page\n        timestamp\n        publicId\n        markup\n      }\n      errors\n    }\n  }\n"]))),z=function(n){var e=n.itemId,t=n.reviewId,i=n.comments,r=n.commentsTotalCount,a=n.reviewItemPublicIdCommentsBelongTo,o=n.token,u=n.author,d=n.comment;return function(){var n=(0,p.Z)(I().mark((function n(l,c,s){var m,p,f,h,b,_,g,y,C,Z,T,N,$,S,j,W,D,R,A,M,H,E,F,P,L,z,X;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return T=s.client,N=[].concat((0,k.Z)(null!==i&&void 0!==i?i:[]),[(0,v.Z)({author:u,body:d.body,createdAt:(new Date).toISOString(),publicId:d.publicId},void 0!==(null===d||void 0===d||null===(m=d.anchor)||void 0===m?void 0:m.page)||void 0!==(null===d||void 0===d||null===(p=d.anchor)||void 0===p?void 0:p.timestamp)||void 0!==(null===d||void 0===d||null===(f=d.anchor)||void 0===f?void 0:f.markup)?{anchor:{publicId:(0,B.Z)(),timestamp:null!==(h=null===d||void 0===d||null===(b=d.anchor)||void 0===b?void 0:b.timestamp)&&void 0!==h?h:null,page:null!==(_=null===d||void 0===d||null===(g=d.anchor)||void 0===g?void 0:g.page)&&void 0!==_?_:null,markup:null!==(y=null===d||void 0===d||null===(C=d.anchor)||void 0===C?void 0:C.markup)&&void 0!==y?y:null}}:{anchor:null})]),S={totalCount:$=(null!==r&&void 0!==r?r:0)+1,publicId:a||e||"",nodes:N,reviewId:t},i&&0===i.length?l((0,x.ZX)(S)):(l((0,x.v5)({id:e,changes:S})),l((0,w.Xc)({id:e,changes:{comments:{nodes:N,totalCount:$}}}))),n.next=7,T.mutation(O,{token:o,attributes:{body:d.body,commentableId:d.commentableId,commentableType:d.commentableType}},{additionalTypenames:["Review"]});case 7:if(!((j=n.sent).error||null!==(Z=j.data)&&void 0!==Z&&Z.createComment.errors.length)){n.next=12;break}i&&(l((0,x.v5)({id:e,changes:{nodes:i,totalCount:r,publicId:a}})),l((0,w.Xc)({id:e,changes:{comments:{nodes:null!==i&&void 0!==i?i:[],totalCount:null!==r&&void 0!==r?r:0}}}))),n.next=19;break;case 12:if(!((null!==d&&void 0!==d&&null!==(W=d.anchor)&&void 0!==W&&W.page||void 0!==(null===d||void 0===d||null===(D=d.anchor)||void 0===D?void 0:D.timestamp)||null!==d&&void 0!==d&&null!==(R=d.anchor)&&void 0!==R&&R.markup)&&d.anchorableType&&null!==(A=j.data)&&void 0!==A&&null!==(M=A.createComment)&&void 0!==M&&null!==(H=M.comment)&&void 0!==H&&H.publicId)){n.next=16;break}return n.next=15,T.mutation(U,{token:o,attributes:{anchorableId:j.data.createComment.comment.publicId,anchorableType:d.anchorableType,page:d.anchor.page,timestamp:d.anchor.timestamp,markup:d.anchor.markup}});case 15:z=n.sent;case 16:X=[].concat((0,k.Z)(S.nodes.slice(0,S.nodes.length-1)),[(0,v.Z)((0,v.Z)((0,v.Z)({},S.nodes.slice(-1)[0]),null===(E=j.data)||void 0===E?void 0:E.createComment.comment),z?{anchor:null!==(F=null===(P=z)||void 0===P||null===(L=P.data)||void 0===L?void 0:L.createAnchor.anchor)&&void 0!==F?F:null}:{anchor:null})]),l((0,x.v5)({id:e,changes:(0,v.Z)((0,v.Z)({},S),{},{nodes:X})})),l((0,w.Xc)({id:e,changes:{comments:{nodes:X,totalCount:$}}}));case 19:return n.abrupt("return",j);case 20:case"end":return n.stop()}}),n)})));return function(e,t,i){return n.apply(this,arguments)}}()},X=(0,b.Ps)(s||(s=(0,f.Z)(["\n  mutation deleteComment($id: String!, $token: String) {\n    deleteComment(id: $id, token: $token) {\n      comment {\n        publicId\n      }\n      errors\n    }\n  }\n"]))),G=function(n){var e=n.commentId,t=n.token,i=n.comments,r=n.commentsTotalCount,a=n.reviewId,o=n.reviewItemId;return function(){var n=(0,p.Z)(I().mark((function n(u,d,l){var c,s,m,v,p,f,h,b;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return m=l.client,v=null===i||void 0===i?void 0:i.filter((function(n){return n.publicId!==e})),v=null!==(c=v)&&void 0!==c?c:[],f={totalCount:p=(null!==r&&void 0!==r?r:0)-1,publicId:o||"",nodes:v,reviewId:a},u((0,x.v5)({id:o,changes:f})),u((0,w.Xc)({id:o,changes:{comments:{nodes:v,totalCount:p}}})),n.next=9,m.mutation(X,{token:t,id:e});case 9:return((h=n.sent).error||null!==(s=h.data)&&void 0!==s&&s.deleteComment.errors.length)&&(b={totalCount:null!==r&&void 0!==r?r:0,publicId:o||"",nodes:null!==i&&void 0!==i?i:[],reviewId:a},u((0,x.v5)({id:o,changes:b})),u((0,w.Xc)({id:o,changes:{comments:{nodes:null!==i&&void 0!==i?i:[],totalCount:null!==r&&void 0!==r?r:0}}}))),n.abrupt("return",h);case 12:case"end":return n.stop()}}),n)})));return function(e,t,i){return n.apply(this,arguments)}}()},V=(0,b.Ps)(m||(m=(0,f.Z)(["\n  mutation updateComment($id: String!, $token: String, $body: String!) {\n    updateComment(id: $id, token: $token, body: $body) {\n      comment {\n        publicId\n        body\n      }\n      errors\n    }\n  }\n"]))),q=function(n){var e=n.commentId,t=n.body,i=n.token,r=n.comments,a=n.commentsTotalCount,o=n.reviewId,u=n.reviewItemId;return function(){var n=(0,p.Z)(I().mark((function n(d,l,c){var s,m,p,f,h,b,_,g,y,C;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return f=c.client,h=null===r||void 0===r?void 0:r.map((function(n){if(n.publicId===e){var i=(new Date).toISOString();return(0,v.Z)((0,v.Z)({},n),{},{body:t,updatedAt:i})}return n})),h=null!==(s=h)&&void 0!==s?s:[],a=null!==(m=a)&&void 0!==m?m:0,b={publicId:u||"",totalCount:a,nodes:h,reviewId:o},d((0,x.v5)({id:u,changes:b})),d((0,w.Xc)({id:u,changes:{comments:{nodes:h,totalCount:a}}})),n.next=9,f.mutation(V,{token:i,body:t,id:e});case 9:return((_=n.sent).error||null!==(p=_.data)&&void 0!==p&&p.updateComment.errors.length)&&(C={totalCount:null!==(g=a)&&void 0!==g?g:0,publicId:u||"",nodes:null!==r&&void 0!==r?r:[],reviewId:o},d((0,x.v5)({id:u,changes:C})),d((0,w.Xc)({id:u,changes:{comments:{nodes:null!==r&&void 0!==r?r:[],totalCount:null!==(y=a)&&void 0!==y?y:0}}}))),n.abrupt("return",_);case 12:case"end":return n.stop()}}),n)})));return function(e,t,i){return n.apply(this,arguments)}}()}},36106:function(n,e,t){t.d(e,{F:function(){return d}});var i=t(15861),r=t(64687),a=t.n(r),o=t(87498),u=t(51526),d=function(n){return function(){var e=(0,i.Z)(a().mark((function e(t){var i,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.kV.get("/public/teams/".concat(n));case 2:i=e.sent,r=i.body.team,t((0,u.Vk)(r));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}},82728:function(n,e,t){var i;t.d(e,{U:function(){return i}}),function(n){n[n.HIDDEN=0]="HIDDEN",n[n.SHOW_ID=1]="SHOW_ID",n[n.SHOW_T_AND_C=2]="SHOW_T_AND_C"}(i||(i={}))},35082:function(n,e){e.Z={container:"IdentityLabel_container__mkRRY",light:"IdentityLabel_light__nrqWh",dark:"IdentityLabel_dark__s2YtI",active:"IdentityLabel_active__PXw6M",infoMenu:"IdentityLabel_infoMenu__ER6FK",infoText:"IdentityLabel_infoText__vGjzj",infoEmail:"IdentityLabel_infoEmail__K4A80",infoButton:"IdentityLabel_infoButton__G6kgm",menuPopover:"IdentityLabel_menuPopover__b4Y8d"}}}]);
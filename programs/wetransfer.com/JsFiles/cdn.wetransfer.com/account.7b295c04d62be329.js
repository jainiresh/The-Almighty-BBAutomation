(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1809],{5877:function(e){e.exports=function(e,t,a,n,r){return r(e,(function(e,r,i){a=n?(n=!1,e):t(a,e,r,i)})),a}},58215:function(e,t,a){var n=a(81207),r=a(24303),i=a(68286),o=a(5877),s=a(86152);e.exports=function(e,t,a){var c=s(e)?n:o,u=arguments.length<3;return c(e,i(t,4),a,u,r)}},56563:function(e,t,a){"use strict";a.d(t,{Eh:function(){return r},eZ:function(){return i},xq:function(){return n}});var n="https://apps.apple.com/account/subscriptions",r="https://play.google.com/store/account/subscriptions",i="https://wetransfer.zendesk.com/hc/en-us/articles/4563370515988"},41929:function(e,t,a){"use strict";var n=a(98788),r=a(94776),i=a.n(r),o=a(52322),s=a(13980),c=a.n(s),u=a(2784),l=a(6091),d=a(57580),p=a(72164),m=a(47968),f=a(72597),_=function(e){var t=e.value,a=e.defaultValue,r=e.errorMessage,s=e.updateValue,c=e.variant,_=(0,u.useState)(t),g=_[0],v=_[1],h=f.T.getCountryByCode(t),b=f.T.getCountryByCode(a),Z=function(){var e=(0,n.Z)(i().mark((function e(t){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=f.T.getCountryByName(t))){e.next=6;break}return e.next=4,s("country_code",a.id,!0);case 4:e.next=7;break;case 6:s("country_code","",!0),v(t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,o.jsxs)("div",{children:[(0,o.jsx)(l.Z,{data:m.Z,label:p.Z.t("form.account.label.country_code"),name:"country_code",defaultValue:b&&b.label||"",value:h&&h.label||g,onChange:Z,valid:0,variant:c}),(0,o.jsx)(d.ZP,{message:r,type:"error"})]})};_.propTypes={value:c().string,defaultValue:c().string,errorMessage:c().string,updateValue:c().func.isRequired,variant:c().string},_.defaultProps={value:"",variant:"default"},t.Z=_},91956:function(e,t,a){"use strict";var n=a(98788),r=a(94776),i=a.n(r),o=a(52322),s=a(13980),c=a.n(s),u=(a(2784),a(6091)),l=a(57580),d=a(70813),p=a(55907),m=a(8870),f=a(72164),_=a(72597),g=a(99868),v=function(e){var t=e.value,a=e.errorMessage,r=e.updateValue,s=e.countryCode,c=void 0===s?"":s;if(void 0===(0,m.hl)(d.K4,"on"))return null;var v=_.T.getCountryByCode(c),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"US"===(null===t||void 0===t?void 0:t.id)?_.H.getStateByCode(e):null}(t,v),b="US"===(null===v||void 0===v?void 0:v.id)?"":"statefield--hidden",Z=function(){var e=(0,n.Z)(i().mark((function e(t){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=_.H.getStateByName(t))){e.next=6;break}return e.next=4,r("state_code",a.id,!0);case 4:e.next=7;break;case 6:r("state_code","",!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,o.jsxs)("div",{className:"statefield ".concat(b),children:[(0,o.jsx)(u.Z,{data:g.Z,label:f.Z.t("form.account.label.state_code"),defaultValue:(null===h||void 0===h?void 0:h.label)||"",value:(null===h||void 0===h?void 0:h.label)||"",name:"state_code",onChange:Z,valid:p.d.DONT_CHECK,noResultsLabel:f.Z.t("form.account.error.no_state_results")}),(0,o.jsx)(l.ZP,{message:a,type:"error"})]})};v.propTypes={value:c().string,errorMessage:c().string,updateValue:c().func.isRequired,countryCode:c().string},v.defaultProps={value:""},t.Z=v},50959:function(e,t,a){"use strict";var n=a(66383),r=a(52322),i=a(13980),o=a.n(i),s=(a(2784),a(57580)),c=a(58491),u=a(55907),l=a(72164),d=a(72597),p=function(e){return new RegExp("(".concat(e,")(.+)"),"g")},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return e;var a=t.vatPrefix;return a?e.match(p(a))?e:a:e},f=function(e){var t,a=e.value,i=e.errorMessage,o=e.updateValue,f=e.countryCode,_=void 0===f?"":f,g=d.T.getCountryByCode(_),v=m(a,g),h=(null===g||void 0===g?void 0:g.vatPrefix)||"-";(null===g||void 0===g?void 0:g.vatPrefix)?t=(0,n.Z)(v.split(p(h)).filter((function(e){return e})),2)[1]:t=v;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"vatfield",children:[(0,r.jsx)(c.Z,{variant:"readonly",value:h,name:"vat_prefix",valid:u.d.DONT_CHECK,className:"vatfield__prefix-field"}),(0,r.jsx)(c.Z,{label:l.Z.t("form.account.label.vat_number")+" "+l.Z.t("form.account.label.not_required"),value:t||"",name:"vat_user_value",onChange:function(e){var t="".concat((null===g||void 0===g?void 0:g.vatPrefix)||"").concat(e.target.value);o("vat_number",m(t,g),!0)},valid:u.d.DONT_CHECK,description:l.Z.t("form.account.description.vat_number"),hidden:g&&!g.vatPrefix&&""!==g.vatPrefix,className:"vatfield__text-field"})]}),(0,r.jsx)(c.Z,{value:v,name:"vat_number",valid:u.d.DONT_CHECK,className:"vatfield__value-field",type:"hidden"}),(0,r.jsx)(s.ZP,{message:i,type:"error"})]})};f.propTypes={value:o().string,errorMessage:o().string,updateValue:o().func.isRequired,countryCode:o().string},f.defaultProps={value:""},t.Z=f},1301:function(e,t,a){"use strict";a.d(t,{t:function(){return b}});var n=a(98788),r=a(94776),i=a.n(r),o=a(2784),s=a(17635),c=a(41202),u=a(90991),l=a(58215),d=a.n(l),p=a(5994),m=a(25356),f=function(e){return e.ui.tiersPricing},_=function(e){return Boolean(e.pending.getTiersPricing)},g=(0,p.P1)([f],(function(e){return d()(e,(function(e,t,a){return e[a]={month:m.Z.getFormattedPrice(t.month.total,t.month.currency||"eur"),year:m.Z.getFormattedPrice(t.year.total,t.year.currency||"eur")},e}),{})})),v=(0,p.P1)([f],(function(e){return d()(e,(function(e,t,a){return e[a]={month:m.Z.getFormattedPrice(t.month.total_per_seat,t.month.currency||"eur"),year:m.Z.getFormattedPrice(t.year.total_per_seat,t.year.currency||"eur")},e}),{})})),h=function(e){return function(t){var a=c.yv.PRO_2022;return Object.keys(e).forEach((function(n){var r=e[n];r.month.plan_id!==t&&r.year.plan_id!==t||(a=n)})),a}},b=function(){var e=(0,s.I0)(),t=(0,s.v9)(f)||{},a=(0,s.v9)(g),r=(0,s.v9)(v),c=(0,s.v9)(_),l=(0,o.useCallback)(function(){var t=(0,n.Z)(i().mark((function t(a){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(u.Z.UI.getTiersPricing(a));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]);return{tiers:t,formattedTierPrices:a,formattedTierPricesPerSeat:r,fetchTiersPricing:l,isTiersPricingPending:c,resetTiersPricing:(0,o.useCallback)((function(){e(u.Z.UI.resetTiersPricing())}),[e]),getTierNameByPlanId:h(t)}}},57761:function(e,t,a){"use strict";a.r(t),a.d(t,{Account:function(){return $t},default:function(){return ea}});var n=a(70865),r=a(96670),i=a(52322),o=a(2784),s=a(17635),c=a(98788),u=a(94776),l=a.n(u),d=a(72779),p=a.n(d),m=a(16185),f=a(70983),_=a(25356),g=a(87957),v=a(67384),h=a(20646),b=a.n(h),Z=function(e){var t,a=e.showWorkspaceName,n=e.showWorkspaceAvatar,r=e.panelName,o=e.buttonHref,c=e.buttonLabel,u=e.onClick,l=e.isDisabled,d=e.children,p=e.formId,m=e.setWorkspaceName,f=(0,s.v9)((function(e){return{user:e.user}})).user,h=null===f||void 0===f||null===(t=f.profile_picture)||void 0===t?void 0:t.thumbnail_url,Z={backgroundImage:"url(".concat(h,")")},x=(0,g.Rs)().currentTeam,y=_.Z.getWorkspaceName(x,f);return(0,i.jsxs)("div",{className:b().PanelHeader,"data-testid":"panel-header",children:[a&&(0,i.jsx)("span",{"data-testid":"workspace-name",className:b().WorkspaceName,children:m||y}),(0,i.jsxs)("div",{className:b().PanelInformation,children:[n&&(0,i.jsx)("span",{"data-testid":"panel-avatar",className:b().PanelAvatar,style:Z}),(0,i.jsx)("span",{className:b().PanelName,children:r}),c&&(0,i.jsx)(v.zx,{type:p?"submit":"",form:p,className:b().PanelButton,href:o,label:c,variant:"primary",square:!0,onClick:u,disabled:l})]}),d,(0,i.jsx)("div",{className:b().divider})]})},x=a(91543),y=a.n(x),w=function(e){return(0,i.jsxs)("div",{className:y().workspaceUpgradeBanner,"data-testid":"workspace-upgrade-banner",children:[(0,i.jsx)("h2",{className:y().workspaceUpgradeBannerHeading,"data-testid":"workspace-banner-heading",children:e.headingText}),e.upgradeInformationTranslationsKeys.map((function(e,t){return(0,i.jsx)("p",{className:y().workspaceUpgradeBannerInfo,"data-testid":"workspace-banner-info",dangerouslySetInnerHTML:{__html:e}},t)})),(0,i.jsx)(v.zx,{className:y().workspaceUpgradeBannerCta,as:"a",href:e.buttonHref,variant:"primary",label:e.buttonLabel})]})},k=a(51393),j=a(56400),S=a(14334),N=a(47842),P=a(50930),C=a(72164),I=a(90991),E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=function(e,t){h.dispatch(I.Z.Errors.resetError(e,t))},i=function(){for(var t in k(!1),g)a(e,t)},u=function(e){switch(e){case"email":case"default_recipient_email":return!_.Z.validateEmail(null===g||void 0===g?void 0:g[e])&&C.Z.t("form.account.error.email.invalid");case"password":return!((null===g||void 0===g?void 0:g.password)&&(null===g||void 0===g?void 0:g.password.length)>=6)&&C.Z.t("form.account.error.password.too_short");case"password_confirm":return(null===g||void 0===g?void 0:g.password)!==(null===g||void 0===g?void 0:g.password_confirm)&&C.Z.t("form.account.error.password_confirm.confirm");case"wallpaper_link":return!_.Z.validateUri(null===g||void 0===g?void 0:g.wallpaper_link)&&C.Z.t("form.profile.error.wallpaper_link.invalid");case"subdomain_name":var t,a;return(null===g||void 0===g||null===(t=g.subdomain_name)||void 0===t?void 0:t.length)<2?C.Z.t("form.profile.error.subdomain.too_short"):(null===g||void 0===g||null===(a=g.subdomain_name)||void 0===a?void 0:a.length)>63?C.Z.t("form.profile.error.subdomain.too_long"):!/^[a-z\-\d]+$/i.test(null===g||void 0===g?void 0:g.subdomain_name)&&C.Z.t("form.profile.error.subdomain.invalid");default:return!1}},d=function(t){if(!x[e]||!x[e][t])return!1;var a=x[e][t][0];"subdomain_name"===t&&(t="subdomain");var n="form.".concat(e,".error.").concat(t,".").concat(a);return C.Z.t(n)},p=function(e){var t=d(e);return"string"!==typeof t?"":t},m=function(t,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(s){k(!0),v((0,r.Z)((0,n.Z)({},g),(0,N.Z)({},t,i))),a(e,t),o||h.dispatch(I.Z.Notification.resetNotification()),h.dispatch(I.Z.Route.setFormState(!0)),S&&-1===S.indexOf("key")&&E((0,P.Z)(S).concat([t])),s()}))},f=(0,o.useState)(t),g=f[0],v=f[1],h=(0,s.oR)(),b=h.getState(),Z=b.route,x=b.errors,y=(0,o.useState)(!1),w=y[0],k=y[1],j=(0,o.useState)([]),S=j[0],E=j[1];(0,o.useEffect)((function(){!0===Z.unSavedForm&&!1===w&&h.dispatch(I.Z.Route.setFormState(!1))}),[Z,w,h]);var T=function(e){for(var t in e)if(!(["pending"].indexOf(t)>-1)&&(!e[t]||""===e[t]))return!1;return!(!e.email||!_.Z.validateEmail(e.email))},D=function(){var t=(0,c.Z)(l().mark((function t(a){var r,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(null===(i=(0,n.Z)({},g))||void 0===i||null===(r=i.profile_picture)||void 0===r?void 0:r.id)||delete i.profile_picture,t.next=5,h.dispatch(I.Z.Errors.validateForm(i,e));case 5:a&&"function"===typeof a&&a();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=function(){var e=document.querySelector(".textfield--invalid");e&&e.scrollIntoView()},U=function(){k(!0)},R=function(){return g};return{validateData:T,validateState:D,resetError:a,updateValue:m,setDirty:k,getLocalError:u,getErrorMessage:p,scrollToError:A,setFormChange:U,resetForm:i,getDataForm:R,isFormDirty:w}},T=a(15014),D=a(26893),A=a(36138),U=(0,s.$j)((function(e){return{uploadAssetEmailBackground:(0,A.I5)(e)}}),{editAccount:I.Z.Account.editAccount,uploadAsset:I.Z.UI.uploadAsset,setFormState:I.Z.Route.setFormState})((function(e){var t=(0,T.T)().hasPermissionToSetEmailBranding,a=E("branded-emails"),r=(0,s.v9)((function(e){return e})),u=r.account,d=r.pending,_=r.user,g=(0,o.useState)(!1),h=g[0],b=g[1],x=(0,o.useState)(!1),y=x[0],N=x[1],P=a.getDataForm(),A=(0,s.I0)();(0,o.useEffect)((function(){document.title="".concat(C.Z.t("branded_emails.title")," - WeTransfer")})),(0,o.useEffect)((function(){var e=j.Z.getAccountFromUser(_);y||d.getAccount||!Boolean(e.id)||(A(I.Z.Account.getAccount(e.id)),N(!0))}),[y,_,d.getAccount,A]);var U=function(){var t=(0,c.Z)(l().mark((function t(a,n){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.target.files[0],t.abrupt("return",e.uploadAsset(r,n));case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),R=(0,o.useMemo)((function(){var e=a.getDataForm();return void 0!==e.email_background||null===e.email_background?e.email_background:u.email_background}),[a,u.email_background]),F=function(){var t=(0,c.Z)(l().mark((function t(r){var i,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),a.isFormDirty){t.next=3;break}return t.abrupt("return");case 3:for(o in i=(0,n.Z)({},P),h&&b(!1),P)void 0===i[o]&&(i[o]="");return e.setFormState(!1),t.next=9,e.editAccount(u.id,P,{notification:!1});case 9:a.resetForm();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();if(d.getAccount)return(0,i.jsx)(k.Z,{});var B=p()("brandedEmailsForm",{"brandedEmailsForm--disabled":!t()}),M=d.editAccount?C.Z.t("form.submitting"):C.Z.t("form.save_changes");return(0,i.jsxs)("div",{"data-testid":"brandedEmails",children:[!D.ZP.isMobile&&(0,i.jsx)(Z,{showWorkspaceName:!0,panelName:C.Z.t("branded_emails.title"),buttonLabel:!(0,S.Sz)(_)&&M,onClick:F,isDisabled:!a.isFormDirty||e.isDisabled}),!D.ZP.isMobile&&(0,S.Sz)(_)&&(0,i.jsx)(w,{headingText:C.Z.t("upgrade_workspace.title"),buttonHref:"/pricing",buttonLabel:C.Z.t("upgrade_workspace.cta"),upgradeInformationTranslationsKeys:[C.Z.t("upgrade_workspace.upgrade_text"),C.Z.t("upgrade_workspace.pro_information")]}),(0,i.jsxs)("form",{method:"post",onSubmit:F,className:B,"data-testid":"branded-emails-form",children:[(0,i.jsxs)("div",{className:"brandedEmails",children:[(0,i.jsx)(m.ZP,{emailBackground:R,user:_,pending:e.pending,updateValue:a.updateValue,uploadImage:U,isDisabled:e.isDisabled}),h&&(0,i.jsxs)(f.Z,{html:C.Z.t("form.unsaved_changes"),className:"branded-emails__actionbar",children:[(0,i.jsx)(v.zx,{variant:"secondary",square:!0,type:"actionbar-action",label:C.Z.t("form.stay_on_page"),onClick:F}),(0,i.jsx)(v.zx,{square:!0,stroke:!0,variant:"inverted",label:C.Z.t("form.leave"),onClick:function(e){return t=!1,(a=e)&&a.preventDefault(),void(h!==t&&b(t));var t,a}})]},"branding_action")]}),!(0,S.Sz)(_)&&function(){var t=d.editAccount?C.Z.t("form.submitting"):C.Z.t("form.save_changes");return(0,i.jsx)(v.zx,{className:"submit-btn",variant:"primary",square:!0,label:t,disabled:!a.isFormDirty||e.isDisabled,onClick:F,submit:!0})}()]})]})})),R=a(79994),F=a(36628),B=a(15144),M=a(3813),V=a(15721),L=a(24273),H=a(91504),O=a(73293),q=a(44951),W=a(13981),z=function(e){var t=e.isDisabled,a=e.formName,r=e.form,u=r.getDataForm(),d=(0,s.I0)(),p=(0,s.v9)((function(e){return e})),m=p.account,_=p.session,g=p.user,v=p.errors,h=p.pending,b=(0,o.useState)(!1),Z=b[0],x=b[1],y=(0,o.useState)(!1),w=y[0],k=y[1],j=(0,o.useState)(""),S=j[0],N=j[1];(0,o.useEffect)((function(){return localStorage.getItem(H.X.localStorage.editableSubdomain.name)&&(d(I.Z.Notification.setNotification("form","profile.success.subdomain.updated")),localStorage.removeItem(H.X.localStorage.editableSubdomain.name)),function(){return d(I.Z.Errors.resetFormErrors(a))}}),[]);var P=function(){var e=(0,c.Z)(l().mark((function e(t,a){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null===(n=t.target.files)||void 0===n?void 0:n[0],O.Z.trackGoogleEvent({category:"Profile",action:"Image Uploaded",label:a}),e.abrupt("return",d(I.Z.UI.uploadAsset(r,a)));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),E=(0,o.useCallback)((function(e){if(!v[a]||!v[a][e])return!1;var t=v[a][e][0];"subdomain_name"===e&&(e="subdomain");var n="form.".concat(a,".error.").concat(e,".").concat(t);return C.Z.t(n)}),[Object.keys(v).length,a]),T=function(){var e=(0,c.Z)(l().mark((function e(t){var a,i,o,s,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r.isFormDirty){e.next=3;break}return e.abrupt("return");case 3:for(i in a=(0,n.Z)({},u),Z&&x(!1),O.Z.trackSnowplowEvent({category:"profile_form",action:"click_save_changes"}),a)void 0===a[i]&&(a[i]="");return d(I.Z.Route.setFormState(!1)),o=m.title,r.setDirty(!1),e.next=12,d(I.Z.Account.editAccount(m.id,a,{notification:!1}));case 12:return e.next=14,d(I.Z.Account.createSubdomain(m.id,a,{notification:!1}));case 14:if((s=a.subdomain_name!==m.subdomain_name)&&localStorage.setItem(H.X.localStorage.editableSubdomain.name,"1"),(0,q.yG)("profile_name",o,a.title,{category:"plus_account",action:"click_save_changes"}),(0,L.GR)({subdomain_name:m.subdomain_name,email_background:m.email_background,title:m.title,wallpapers:m.wallpapers,wallpaper_link:m.wallpaper_link},{subdomain_name:a.subdomain_name,email_background:a.email_background,title:a.title,wallpapers:a.wallpapers,wallpaper_link:a.wallpaper_link}),s)try{c=new URL("".concat(location.protocol,"//").concat(a.subdomain_name,".").concat(_.domain,":").concat(location.port,"/workspace/branded-page")),location.replace(c.href)}catch(l){console.error("Unable to generate redirect url to new subdomain",l)}case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e,t){t&&t.preventDefault(),Z!==e&&x(e)},A=function(){var e=(0,c.Z)(l().mark((function e(t,a){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getLocalError("subdomain_name"),!((null===(n=m.subdomain_name)||void 0===n?void 0:n.length)>0&&r)){e.next=6;break}N(r),e.next=8;break;case 6:return e.next=8,t.validateState(a);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),U=(0,o.useMemo)((function(){return(0,W.D)(A,H.X.textfield.debounceDelay)}),[]),R=function(){var e=(0,c.Z)(l().mark((function e(t,a){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.updateValue(t,a);case 2:N(""),k(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){!function(){if(u.title||u.subdomain_name){var e=void 0!==u.subdomain_name&&u.subdomain_name!==m.subdomain_name;U(r,(function(){k(e&&!E("subdomain_name"))}))}}()}),[u.title,u.subdomain_name,m.subdomain_name,U,E]);var F,z=u.subdomain_name!==m.subdomain_name,G=S||r.getErrorMessage("subdomain_name")||"";return(0,i.jsxs)("form",{id:"branded-page-form",method:"post",onSubmit:z?function(e){return D(!0,e)}:T,children:[(0,i.jsx)(V.Z,{subdomainError:G,isUrlAvailable:w,subdomainName:u.subdomain_name,domain:_.domain,profileTitle:u.title,updateValue:R,isFormDirty:r.isFormDirty,isDisabled:t,user:g}),(0,i.jsx)(M.Z,{error:r.getErrorMessage("wallpaper_link"),instruction:C.Z.t("page.profile.wallpapers.text"),wallpapers:u.wallpapers,uploadAsset:P,uploadCuratedWallpaper:function(e){return d(I.Z.UI.uploadCuratedWallpaper(e))},updateValue:r.updateValue,pending:h.uploadAsset_wallpaper,title:C.Z.t("page.profile.choose_wallpapers"),validLink:Number((F="wallpaper_link",u[F]?u[F]===m[F]?0:r.getLocalError(F)||v[a]&&v[a][F]?-1:1:0)),wallpaperLink:u.wallpaper_link,isDisabled:t}),!t&&(0,i.jsx)("div",{className:"row",children:function(e){var a,n=h.editAccount?C.Z.t("form.submitting"):C.Z.t("form.save_changes");return(0,i.jsx)(B.Z,{className:e,text:n,align:"right",active:r.isFormDirty&&!t&&!(null===v||void 0===v||null===(a=v.profile)||void 0===a?void 0:a.subdomain_name)&&!r.getLocalError("subdomain_name"),submit:!0})}("profile__save-button profile__save-button--bottom profile__save-button--editable-subdomains")}),Z&&(0,i.jsxs)(f.Z,{html:C.Z.t("form.profile.change_subdomain.message",{subdomain:u.subdomain_name,url:"https://".concat(u.subdomain_name)}),className:"profile__actionbar",focusId:"#confirm-subdomain-change",children:[(0,i.jsx)(B.Z,{id:"#confirm-subdomain-change",type:"actionbar-action",text:C.Z.t("form.profile.change_subdomain.confirm"),onClick:T}),(0,i.jsx)(B.Z,{type:"actionbar-cancel",text:C.Z.t("form.profile.change_subdomain.cancel"),onClick:function(){return D(!1)}})]},"branding_action")]})},G=function(){var e,t="profile",a=(0,o.useState)(!1),n=a[0],r=a[1],c=(0,o.useState)(!1),u=c[0],l=c[1],d=(0,s.I0)(),m=(0,s.v9)((function(e){return e})),f=m.pending,_=f.getAccount,g=f.editAccount,v=m.user,h=m.account,b=m.session,x=m.errors,y=(0,T.T)().hasPermissionToCustomizeDomainName,N=E(t,h);if((0,o.useEffect)((function(){document.title="".concat(C.Z.t("branded_page.title")," - WeTransfer")})),(0,o.useEffect)((function(){var e=j.Z.getAccountFromUser(v);n||_||!Boolean(e.id)||(d(I.Z.Account.getAccount(e.id)),r(!0))}),[n,v,_,d]),_)return(0,i.jsx)(k.Z,{});var P=Boolean(h.subdomain_name),A="".concat(h.subdomain_name,".").concat(b.domain),U=v.isVerified&&!y,B=y&&!P,M=v.isVerified&&h.active_subscription&&u&&!B,V=!y||!P,L=!N.isFormDirty||V||Boolean(null===x||void 0===x||null===(e=x.profile)||void 0===e?void 0:e.subdomain_name)||N.getLocalError("subdomain_name"),H={__html:M?C.Z.t("page.profile.onboarding-step-two",{href:"https://".concat(A),domain:A}):""},O=g?C.Z.t("form.submitting"):C.Z.t("form.save_changes");return(0,i.jsxs)("div",{className:"branded-page",children:[!D.ZP.isMobile&&(0,i.jsx)(Z,{showWorkspaceName:!0,panelName:C.Z.t("branded_page.title"),buttonLabel:!(0,S.Sz)(v)&&O,formId:"branded-page-form",isDisabled:L,children:P&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"url-container",children:(0,i.jsx)("a",{href:"https://".concat(A),className:"profile__channeluri",children:A})}),(0,i.jsx)("p",{className:"profile__description__mobile",dangerouslySetInnerHTML:{__html:C.Z.t("page.profile.branding.headline")}})]})}),(0,i.jsxs)("div",{"data-testid":"branded-page-content",className:p()("profile",{"profile--disabled":V}),children:[(U||B||M)&&(0,i.jsxs)("div",{className:"row profile__header profile--nohide",children:[U&&(0,i.jsx)("div",{className:"branded-page__workspace-upgrade",children:(0,i.jsx)(w,{headingText:C.Z.t("upgrade_workspace.title"),buttonHref:"/pricing",buttonLabel:C.Z.t("upgrade_workspace.cta"),upgradeInformationTranslationsKeys:[C.Z.t("upgrade_workspace.upgrade_text"),C.Z.t("upgrade_workspace.pro_information")]})}),B&&(0,i.jsx)(F.Z,{children:(0,i.jsx)(R.Z,{onSubmit:function(e){var t=j.Z.getAccountFromUser(v);l(!0),d(I.Z.Account.getAccount(t.id));N.updateValue("subdomain_name",e,!0)}})}),M&&(0,i.jsx)(F.Z,{showClose:!0,onClose:function(){return l(!1)},children:(0,i.jsx)("p",{dangerouslySetInnerHTML:H})})]}),(0,i.jsx)(z,{formName:t,form:N,isDisabled:V})]})]})},Q=a(13980),K=a.n(Q),Y=a(58491),J=a(18723),$=a(61335),X=function(e){var t=e.message,a=e.password,n=e.submitText,r=e.isSubmitActive,s=e.passwordFieldVariant,c=e.passwordFieldRef,u=e.actionBarRef,l=e.onSubmit,d=e.onPasswordChange,p=e.onCancel;return(0,i.jsxs)(f.Z,{ref:u,text:t,children:[(0,i.jsx)(Y.Z,{value:a,name:"password",label:C.Z.t("form.account.label.password"),fieldRef:c,variant:s,type:"password",onChange:d}),D.ZP.isMobile?(0,i.jsxs)(o.Fragment,{children:[(0,i.jsx)(B.Z,{type:"actionbar-action",text:n,active:r,onClick:l}),(0,i.jsx)(B.Z,{type:"actionbar-cancel",text:C.Z.t("form.cancel"),onClick:p})]}):(0,i.jsxs)(o.Fragment,{children:[(0,i.jsx)(J.Z,{tabIndex:0,className:"actionbar__action-button",type:"CheckCircle",color:r?$.Cj:"rgba(255, 255, 255, 0.4)",onClick:r?l:null}),(0,i.jsx)(J.Z,{tabIndex:0,className:"actionbar__cancel-button",type:"Close",color:$.Cj,onClick:p})]})]})};X.propTypes={message:K().string.isRequired,password:K().string.isRequired,isSubmitActive:K().bool.isRequired,submitText:K().string.isRequired,passwordFieldVariant:K().string.isRequired,passwordFieldRef:K().func,actionBarRef:K().func,onSubmit:K().func.isRequired,onPasswordChange:K().func.isRequired,onCancel:K().func.isRequired};var ee=X,te=a(70273),ae=a(13706),ne=a(90581),re=a(27805),ie=a(21218),oe=a(88673),se=a(94539),ce=a(57580),ue=a(67732),le=function(e){(0,ie.Z)(a,e);var t=(0,oe.Z)(a);function a(e){var n;return(0,ne.Z)(this,a),(n=t.call(this,e)).formName="password",n.state={data:{current_password:"",password:"",password_confirm:""}},n.validateState=n.validateState.bind((0,ae.Z)(n)),n.updatePassword=n.updatePassword.bind((0,ae.Z)(n)),n.getRemoteErrorMessage=n.getRemoteErrorMessage.bind((0,ae.Z)(n)),n}return(0,re.Z)(a,[{key:"componentDidMount",value:function(){this.resetForm()}},{key:"getError",value:function(e,t){var a;if(t)a="form.account.error.".concat(e,".").concat(t);else{var n=ue.ZP.getState().errors;if(!this.state.data[e]||!n[this.formName]||!n[this.formName][e])return!0;a="form.account.error.".concat(e,".").concat(n[this.formName][e][0])}return C.Z.t(a)}},{key:"getRemoteErrorMessage",value:function(e){var t=this.getError(e);return!0===t?"":t}},{key:"isFormDirty",get:function(){var e=ue.ZP.getState(),t=e.pending,a=e.errors;return!(a[this.formName]&&Object.keys(a[this.formName]).length||t.password||!this.state.data.current_password||!this.state.data.password||!this.state.data.password_confirm)}},{key:"updatePassword",value:function(e){var t=this;return(0,c.Z)(l().mark((function a(){return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.preventDefault(),t.isFormDirty){a.next=3;break}return a.abrupt("return",t);case 3:return ue.ZP.dispatch(I.Z.Route.setFormState(!1)),a.next=6,ue.ZP.dispatch(I.Z.User.updatePassword(t.state.data));case 6:"update_password"===ue.ZP.getState().notification.panel.value&&t.setState({data:{current_password:"",password:"",password_confirm:""}});case 8:case"end":return a.stop()}}),a)})))()}},{key:"render",value:function(){var e,t,a=this,n=ue.ZP.getState().pending.password?C.Z.t("form.submitting"):C.Z.t("form.save_changes"),r=null,o=se.i.DONT_CHECK;return this.state.data.password.length&&this.state.data.password.length<H.X.profile.minPasswordLength&&(o=se.i.NOT_VALID,e=se.i.TOO_SHORT),this.state.data.password.length>=H.X.profile.minPasswordLength&&(o=se.i.VALID,this.state.data.password_confirm?this.state.data.password_confirm!==this.state.data.password?t=se.i.CONFIRM:this.state.data.password_confirm===this.state.data.password&&(r=this.isFormDirty):t=se.i.BLANK),(0,i.jsx)("div",{className:"changepassword",children:(0,i.jsxs)("form",{method:"post",onSubmit:this.updatePassword,children:[(0,i.jsx)(Y.Z,{label:C.Z.t("form.account.label.current_password"),type:"password",name:"current_password",value:this.state.data.current_password,onChange:function(e){return a.updateValue("current_password",e.target.value)},valid:se.i.DONT_CHECK}),(0,i.jsx)(ce.ZP,{message:this.getRemoteErrorMessage("current_password"),type:"error"}),(0,i.jsx)(Y.Z,{label:C.Z.t("form.account.label.new_password"),type:"password",name:"password",value:this.state.data.password,onChange:function(e){return a.updateValue("password",e.target.value)},valid:o}),e?(0,i.jsx)(ce.ZP,{message:this.getError("password",e),type:"error"}):null,(0,i.jsx)(Y.Z,{label:C.Z.t("form.account.label.repeat_new_password"),type:"password",name:"password_confirm",value:this.state.data.password_confirm,onChange:function(e){return a.updateValue("password_confirm",e.target.value)}}),t?(0,i.jsx)(ce.ZP,{message:this.getError("password_confirm",t),type:"error"}):null,(0,i.jsx)(B.Z,{text:n,active:r,align:"right",onClick:this.updatePassword,submit:!0})]})})}}]),a}(se.Z),de={resetPassword:a(27497).c0},pe=(0,s.$j)((function(e){var t=e.auth;return{isLoading:t.isLoading,email:t.email}}),de)((function(e){var t=e.isLoading,a=e.email,n=e.resetPassword,r=(0,o.useState)(!1),s=r[0],c=r[1],u=(0,o.useState)(!1),l=u[0],d=u[1],m={__html:s?C.Z.t("form.account.sso.password_reset.success",{email:a}):C.Z.t("form.account.sso.password_reset.instructions",{email:a})},f={__html:C.Z.t("exception.something_went_wrong")};return(0,i.jsxs)("div",{className:p()("PasswordReset",s&&"PasswordReset--success",l&&"PasswordReset--error"),children:[(0,i.jsx)("h3",{className:"PasswordReset__title",children:C.Z.t("form.account.sso.password_reset.title")}),(0,i.jsx)("p",{className:"PasswordReset__description",dangerouslySetInnerHTML:m}),l&&(0,i.jsx)("p",{className:"PasswordReset__error",dangerouslySetInnerHTML:f}),!s&&(0,i.jsx)(B.Z,{text:C.Z.t("form.account.sso.password_reset.button"),onClick:function(){d(!1),n().then((function(){c(!0)})).catch((function(){d(!0)}))},active:!t,"data-testid":"password-reset-button"})]})})),me=a(65131),fe=a(67238),_e=function(e){var t=e.user,a=e.disableTwoFactorAuthentication,n=e.resetNotification,r=(0,o.useRef)(null),s=(0,o.useState)(!1),u=s[0],d=s[1],p=(0,o.useState)(!1),m=p[0],f=p[1],_=(0,o.useState)(!1),g=_[0],v=_[1],h=(0,o.useState)(""),b=h[0],Z=h[1],x=(0,te.ZY)(),y=g?C.Z.t("form.submitting"):C.Z.t("form.submit.two-factor-authentication");(0,o.useEffect)((function(){var e;r&&(null===(e=r.current)||void 0===e||e.focus())}),[r]);var w=function(){var e=(0,c.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(!0),e.next=4,a(b,(0,te.ZY)()?"sso":"otp");case 4:return e.prev=4,v(!1),f(!1),Z(""),e.finish(4);case 9:case"end":return e.stop()}}),e,null,[[0,,4,9]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,c.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(),f(!0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.jsxs)("div",{className:"security",children:[(0,i.jsxs)("div",{className:"security__two-factor",children:[(0,i.jsx)("div",{ref:r,tabIndex:"-1",className:"two-factor__icon",children:(0,i.jsx)(J.Z,{type:t.otpEnabled?"Locked":"Unlock"})}),(0,i.jsxs)("div",{className:"two-factor__content",children:[(0,i.jsx)("div",{className:"two-factor__title",children:C.Z.t("page.password_and_security.two-factor-authentication.title")}),(0,i.jsx)("div",{className:"two-factor__detail",children:t.otpEnabled?C.Z.t("page.password_and_security.two-factor-authentication.description.enabled",{date:C.Z.date(new Date(t.otpEnabledAt),"long")}):C.Z.t("page.password_and_security.two-factor-authentication.text.protect_account")}),t.otpEnabled&&!x&&(0,i.jsx)("button",{className:"two-factor__generate-recovery-codes",onClick:function(){n(),d(!0)},children:C.Z.t("page.password_and_security.two-factor-authentication.get_recovery_codes")})]}),t.otpEnabled?(0,i.jsx)("button",{className:"two-factor__action two-factor__action--disable",onClick:k,children:C.Z.t("page.password_and_security.two-factor-authentication.disable")}):(0,i.jsx)("a",{className:"two-factor__action two-factor__action--enable",href:"/account/two-factor-authentication/enable",children:C.Z.t("page.password_and_security.two-factor-authentication.enable")})]}),x?(0,i.jsx)(pe,{}):(0,i.jsx)(le,{}),u&&(0,i.jsx)(ee,{message:C.Z.t("form.fill_in_password_two_factor_authentication"),password:b,onPasswordChange:function(e){return Z(e.target.value)},isSubmitActive:Boolean(b)&&!g,submitText:y,passwordFieldVariant:"actionbar-input",onCancel:function(){return d(!1)}}),m&&(0,i.jsx)(ee,{message:C.Z.t("form.fill_in_password_two_factor_authentication"),password:b,onPasswordChange:function(e){return Z(e.target.value)},isSubmitActive:Boolean(b)&&!g,submitText:y,passwordFieldVariant:"actionbar-input",onSubmit:w,onCancel:function(){return f(!1)}})]})};_e.propTypes={user:K().object.isRequired,disableTwoFactorAuthentication:K().func.isRequired,resetNotification:K().func.isRequired};var ge={disableTwoFactorAuthentication:fe.Z.disableTwoFactorAuthentication.bind(fe.Z),resetNotification:me.Z.resetNotification},ve=(0,s.$j)((function(e){return{user:e.user}}),ge)(_e),he=a(20804),be=a(47062),Ze=a(72180),xe=function(e){var t=e.url,a=e.thumbnailUrl,n=e.pending,r=void 0!==n&&n,o=e.onChange,s=e.onRemove,c=e.defaultThumb,u=e.isSocialPicture,l=(0,i.jsx)(B.Z,{text:C.Z.t("form.profile.upload_avatar"),active:!r,type:"inline"}),d=(0,i.jsx)(B.Z,{text:C.Z.t("form.profile.delete_avatar"),active:t!==c&&!r&&Boolean(t)&&!u,type:"inline"});return(0,i.jsx)(Ze.Z,{name:"profile_picture",className:"profile__asset-upload",addElement:l,removeElement:d,onChange:function(e){o(e,"profile_picture")},removePreview:function(){s("profile_picture")},value:a,pending:r,hideWhilePending:!1,avatarUpload:!0})},ye=a(1458),we=a(47477),ke=a(84233);function je(e){var t=e.emailValidationError,a=e.accountEmail,n=e.showEmailVerificationMessages,r=e.forceVerificationEnabled,u=(0,s.I0)(),d=(0,o.useState)(!1),p=d[0],m=d[1],f=(0,o.useState)(null),_=f[0],g=f[1];function v(){return(v=(0,c.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("BUTTON"===t.target.tagName){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,g(!1),e.next=6,u(I.Z.User.resendVerifyAccountEmail({email:a,showTransferNotification:!1}));case 6:m(!0),e.next=18;break;case 9:e.prev=9,e.t0=e.catch(2),e.t1=e.t0.status,e.next=e.t1===ke.F.TOO_MANY_REQUESTS?14:16;break;case 14:return g("form.account.email-verification-resend.throttle-error"),e.abrupt("break",17);case 16:g("form.account.email-verification-resend.error");case 17:m(!1);case 18:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}return t?(0,i.jsx)(ce.ZP,{message:t,type:ce.A_}):r?(0,i.jsx)(ce.ZP,{message:C.Z.t("form.account.force-account-verification.message"),type:ce.wZ}):n?_?(0,i.jsx)(ce.ZP,{message:C.Z.t(_,{throttle_time:C.Z.t("datetime.distance_in_words.x_minutes",{count:60})}),type:ce.A_}):p?(0,i.jsx)(ce.ZP,{message:C.Z.t("form.account.email-verification-resend.info_link"),type:ce.JN}):(0,i.jsx)(ce.ZP,{message:(0,i.jsx)("div",{onClick:function(e){return v.apply(this,arguments)},dangerouslySetInnerHTML:{__html:C.Z.t("form.account.email-verification-not-verified-link")}}),type:ce.wZ}):null}je.propTypes={accountEmail:K().string.isRequired,emailValidationError:K().string,showEmailVerificationMessages:K().bool.isRequired,forceVerificationEnabled:K().bool};var Se=(0,o.memo)(je),Ne=function(e){(0,ie.Z)(a,e);var t=(0,oe.Z)(a);function a(e){var n;return(0,ne.Z)(this,a),(n=t.call(this,e)).state={data:{given_name:"",family_name:"",email:"",profile_picture:null,current_password:""},validateFields:[],scrolledToError:!1,showActionBar:!1,showUploadInProgressWarning:!1},n.formName="user",n.validateState=n.validateState.bind((0,ae.Z)(n)),n.validateField=n.validateField.bind((0,ae.Z)(n)),n.updateUser=n.updateUser.bind((0,ae.Z)(n)),n.getRemoteError=n.getRemoteError.bind((0,ae.Z)(n)),n.hideActionBar=n.hideActionBar.bind((0,ae.Z)(n)),n.uploadImage=n.uploadImage.bind((0,ae.Z)(n)),n.updateValue=n.updateValue.bind((0,ae.Z)(n)),n.removePreview=n.removePreview.bind((0,ae.Z)(n)),n.cancelUploadInProgress=n.cancelUploadInProgress.bind((0,ae.Z)(n)),n.discardChanges=n.discardChanges.bind((0,ae.Z)(n)),n}return(0,re.Z)(a,[{key:"componentDidMount",value:function(){this.resetFormData()}},{key:"resetFormData",value:function(){var e=ue.ZP.getState().user;this.resetForm(),this.setState({data:{given_name:e.given_name,family_name:e.family_name,email:e.email,profile_picture:e.hasProfilePicture&&e.profile_picture,current_password:""},showUploadInProgressWarning:!1})}},{key:"componentDidUpdate",value:function(){"taken"===this.getRemoteError("email")&&this.state.showActionBar&&this.hideActionBar()}},{key:"validateField",value:function(e){var t=ue.ZP.getState(),a=t.user,n=t.errors;return this.getLocalError(e)?se.i.NOT_VALID:this.state.validateFields.indexOf(e)===se.i.NOT_VALID||this.state.data[e]===a[e]?se.i.DONT_CHECK:n[this.formName]&&n[this.formName][e]?se.i.NOT_VALID:se.i.VALID}},{key:"getRemoteError",value:function(e){var t=ue.ZP.getState().errors;if(this.state.validateFields.indexOf(e)!==se.i.NOT_VALID&&t[this.formName]&&t[this.formName][e]){var a="form.account.error.".concat(e,".").concat(t[this.formName][e][0]);return C.Z.t(a)}}},{key:"hideActionBar",value:function(){if(this.actionBarNode){var e=this;this.actionBarNode.hide((function(){e.setState({showActionBar:!1})}))}}},{key:"isFormDirty",get:function(){var e=ue.ZP.getState(),t=e.user,a=e.errors,n=!1;for(var r in this.state.data){if(n)break;if(!(["memberships","current_password"].indexOf(r)>-1))switch(r){case"given_name":case"family_name":case"email":this.state.data[r]!==t[r]&&(n=!0);break;case"profile_picture":null===this.state.data[r]&&null!==t[r]&&(n=!0),null!==this.state.data[r]&&null===t[r]&&(n=!0),t[r]&&this.state.data[r]&&this.state.data[r].id!==t[r].id&&(n=!0)}}return!this.state.showActionBar&&(!!n&&(!a[this.formName]||!Object.keys(a[this.formName]).length))}},{key:"updateUser",value:function(e){var t=this;return(0,c.Z)(l().mark((function a(){var i,o,s,c,u,d,p,m;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.preventDefault(),!ue.ZP.getState().upload.isPending){a.next=5;break}return t.setState({showActionBar:!1,showUploadInProgressWarning:!0}),a.abrupt("return");case 5:if(t.isFormDirty||t.state.showActionBar){a.next=7;break}return a.abrupt("return",t);case 7:if(i=ue.ZP.getState(),o=i.user,s=i.errors,c=t.state.data,t.setState({validateFields:Object.keys(c),data:(0,r.Z)((0,n.Z)({},c),{current_password:""})}),t.validateState(),!s[t.formName]||!Object.keys(s[t.formName]).length){a.next=13;break}return a.abrupt("return",t);case 13:if(u=t.getRemoteError("email"),(o.email===c.email||c.current_password)&&!u){a.next=17;break}return t.setState({showActionBar:!0},(function(){t.passwordNode.focus()})),a.abrupt("return");case 17:return ue.ZP.dispatch(I.Z.Route.setFormState(!1)),t.hideActionBar(),a.prev=19,a.next=22,ue.ZP.dispatch(I.Z.User.updateUser(c));case 22:o.email!==c.email&&(ue.ZP.dispatch(I.Z.Transfer.setState(ye.N.VERIFY_ACCOUNT)),ue.ZP.dispatch({type:fe.N.CHANGE_USER_IS_VERIFIED,isVerified:!1}),ue.ZP.dispatch({type:fe.N.CHANGE_HAS_SKIPPED_VERIFICATION,hasSkippedVerification:!1})),a.next=28;break;case 25:return a.prev=25,a.t0=a.catch(19),a.abrupt("return",t.resetFormData());case 28:(0,q.yG)("avatar",o.profile_picture,c.profile_picture,{category:"plus_account",action:"click_save_changes"}),d=ue.ZP.getState(),p=d.notification,m=d.account,"update_user"===p.panel.details&&(ue.ZP.dispatch(I.Z.Account.getAccount(m.id)),t.setState({validateFields:[],data:(0,r.Z)((0,n.Z)({},c),{current_password:""})}));case 31:case"end":return a.stop()}}),a,null,[[19,25]])})))()}},{key:"removePreview",value:function(e){this.updateValue(e,null)}},{key:"uploadImage",value:function(e,t){var a=this;return(0,c.Z)(l().mark((function n(){var r,i;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.target.files[0],O.Z.trackGoogleEvent({category:"User",action:"Profile Image Uploaded",label:t}),n.next=4,ue.ZP.dispatch(I.Z.UI.uploadAsset(r,t));case 4:if(!(i=n.sent)){n.next=8;break}return n.next=8,a.updateValue(t,i,!1);case 8:case"end":return n.stop()}}),n)})))()}},{key:"makeAccountVerificationExplanation",value:function(){return(0,i.jsxs)("div",{className:"personaldetails__account-verification-explanation",children:[(0,i.jsx)("a",{href:"https://wetransfer.zendesk.com/hc/en-us/articles/360041073672",target:"_blank",rel:"noopener noreferrer",children:C.Z.t("account.verify-info")}),(0,i.jsx)(he.Z,{color:$.nM,className:"personaldetails__account-verification-explanation--icon"})]})}},{key:"cancelUploadInProgress",value:function(){var e=ue.ZP.getState().transfer;ue.ZP.dispatch(we.dv.pauseUpload()),ue.ZP.dispatch(we.dv.cancelUpload(e,!0)),ue.ZP.dispatch(we.dv.resetTransfer()),this.setState({showActionBar:!0,showUploadInProgressWarning:!1})}},{key:"discardChanges",value:function(){this.setState({showActionBar:!1,showUploadInProgressWarning:!1})}},{key:"render",value:function(){var e=this,t=ue.ZP.getState(),a=t.user,n=t.errors,r=t.pending,s=t.account,c=t.auth,u=r.account?C.Z.t("form.submitting"):C.Z.t("form.save_changes"),l=this.isFormDirty;(this.state.showActionBar||r.account)&&(l=!1);var d="",p="";this.state.data.profile_picture&&this.state.data.profile_picture.image_url&&(d=this.state.data.profile_picture.image_url,p=this.state.data.profile_picture.thumbnail_url);var m,f=!a.hasProfilePicture&&!d,g=a.hasSkippedVerification||!a.isVerified&&s.active_subscription,v=null!==(m=c.emailIsLocked)&&void 0!==m&&m;return(0,i.jsxs)(o.Fragment,{children:[(0,i.jsxs)("form",{method:"post",onSubmit:this.updateUser,onBlur:this.validateState,children:[(0,i.jsx)(xe,{url:f?"":d,thumbnailUrl:f?"":p,defaultThumb:_.Z.getAvatar(a.id),isSocialPicture:c.picture===p,pending:Boolean(r.uploadAsset_profile_picture),onChange:this.uploadImage,onRemove:this.removePreview}),(0,i.jsx)(Y.Z,{shouldFocus:!0,label:C.Z.t("form.account.label.given_name"),value:this.state.data.given_name,name:"given_name",onChange:function(t){return e.updateValue("given_name",t.target.value)},valid:se.i.DONT_CHECK}),(0,i.jsx)(Y.Z,{label:C.Z.t("form.account.label.family_name"),value:this.state.data.family_name,name:"family_name",onChange:function(t){return e.updateValue("family_name",t.target.value)},valid:se.i.DONT_CHECK}),(0,i.jsx)(ce.ZP,{message:this.getRemoteError("family_name"),type:"error"}),(0,i.jsx)(Y.Z,{type:"email",label:C.Z.t("form.account.label.email"),value:this.state.data.email,name:"email",onChange:function(t){return e.updateValue("email",t.target.value)},valid:this.validateField("email"),variant:v?"readonly":"default"}),!this.isFormDirty&&!this.state.showActionBar&&(0,i.jsx)(Se,{accountEmail:this.state.data.email,emailValidationError:this.getRemoteError("email"),showEmailVerificationMessages:g,forceVerificationEnabled:a.forceVerificationEnabled}),this.state.showActionBar&&(0,i.jsx)(ee,{message:C.Z.t("form.fill_in_password"),password:this.state.data.current_password,passwordFieldVariant:n[this.formName]&&n[this.formName].current_password&&n[this.formName].current_password.indexOf("invalid")>se.i.NOT_VALID?"actionbar-input-invalid":"actionbar-input",actionBarRef:function(t){return e.actionBarNode=t},passwordFieldRef:function(t){return e.passwordNode=t},onPasswordChange:function(t){return e.updateValue("current_password",t.target.value)},submitText:u,isSubmitActive:Boolean(this.state.data.current_password)&&!this.getRemoteError("email"),onSubmit:this.updateUser,onCancel:this.hideActionBar}),!D.ZP.isMobile&&a.hasSkippedVerification&&(0,i.jsxs)("div",{className:"personaldetails__verification-changes",children:[this.makeAccountVerificationExplanation(),(0,i.jsx)(B.Z,{onClick:this.updateUser,active:l,text:u,submit:!0})]}),D.ZP.isMobile&&a.hasSkippedVerification&&(0,i.jsxs)(o.Fragment,{children:[(0,i.jsx)(B.Z,{onClick:this.updateUser,active:l,text:u,align:"right",submit:!0}),this.makeAccountVerificationExplanation()]}),!a.hasSkippedVerification&&(0,i.jsx)(B.Z,{onClick:this.updateUser,active:l,text:u,align:"right",submit:!0})]}),this.state.showUploadInProgressWarning&&(0,i.jsx)(be.Z,{cancelUpload:this.cancelUploadInProgress,continueUpload:this.discardChanges})]})}}]),a}(se.Z),Pe=a(33226),Ce=a.n(Pe),Ie=function(){(0,o.useEffect)((function(){document.title="".concat(C.Z.t("navigation.user.items.account")," - WeTransfer")}));var e=(0,s.v9)((function(e){return{user:e.user}})).user;return(0,i.jsxs)("div",{className:Ce().profileAndSecurity,children:[!D.ZP.isMobile&&(0,i.jsx)(Z,{setWorkspaceName:e.given_name.trim()+" "+e.family_name,showWorkspaceName:!0,panelName:C.Z.t("profile_and_security.page_name")}),(0,i.jsxs)("div",{className:Ce().PanelContent,children:[(0,i.jsx)("p",{className:Ce().sectionHeading,children:C.Z.t("profile_and_security.profile_title")}),(0,i.jsx)(Ne,{}),(0,i.jsx)("div",{className:Ce().seperator}),(0,i.jsx)("p",{className:Ce().sectionHeading,"data-testid":"password-and-security-title",children:C.Z.t("page.password_and_security.title")}),(0,i.jsx)(ve,{})]})]})},Ee=a(34187),Te=a(92419),De=a(43162),Ae=a(49916),Ue=a(71068),Re=a(33153),Fe=a(34049),Be={action:"Context Shown",additionalProperties:{Context:"Integration Settings"}},Me=a(30894),Ve=a(48412),Le=a(77903),He=a(16951),Oe=a(68782),qe=a(843),We=a.n(qe);function ze(e){var t=e.logo,a=e.description,n=e.children;return(0,i.jsxs)("div",{className:We().card,children:[t,a&&(0,i.jsx)("p",{className:We().description,children:a}),n]})}var Ge=a(84164),Qe=a(72608),Ke=a.n(Qe);function Ye(){return(0,i.jsx)("img",{src:Ge.Z.lookup("stripe-logo.png"),alt:"Stripe logo",className:Ke().logo})}var Je=a(25681),$e=a.n(Je),Xe=a(26297),et=a(47594),tt=a.n(et);function at(e){var t=e.className,a=(0,Xe.Z)(e,["className"]);return(0,i.jsx)("button",(0,n.Z)({className:p()(tt().button,t)},a))}var nt;!function(e){e.STRIPE="Stripe"}(nt||(nt={}));var rt=a(85737),it=a.n(rt),ot=(0,N.Z)({},nt.STRIPE,(function(e){var t=e.status,a=(0,s.v9)(Fe.c7),n=(0,s.v9)(Le.Y),r=(0,s.I0)(),u=(0,o.useState)(!1),d=u[0],p=u[1],m=(0,o.useState)(!1),f=m[0],_=m[1],g=(0,o.useCallback)((0,c.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,(0,Ve.ws)("Integrations Page",a),e.next=5,r((0,Ae.mY)());case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),_(!0),p(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])}))),[r,a]),v=(0,o.useState)(!1),h=v[0],b=v[1],Z=(0,o.useState)(!1),x=Z[0],y=Z[1],w=(0,o.useState)(!1),k=w[0],j=w[1],S=(0,o.useCallback)((0,c.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,De.rG)((0,Ve.$Y)("Integrations Page","Removed")),b(!0),e.prev=2,e.next=5,r((0,Ae.zF)());case 5:y(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),j(!0);case 11:b(!1);case 12:case"end":return e.stop()}}),e,null,[[2,8]])}))),[r]);(0,o.useEffect)((function(){t===Ue.NN.PENDING&&(0,De.rG)(He.SI)}),[t]);var N=(0,i.jsxs)(i.Fragment,{children:["Your account ",n," has been connected successfully."," ",(0,i.jsx)("a",{href:He.Uz,target:"_blank",rel:"noopener noreferrer",className:$e().inlineLink,children:"Visit Stripe"})," ","to view and manage your account."," ",(0,i.jsx)(at,{onClick:S,children:He.rG}),"."]});if(d||t===Ue.NN.PENDING_VERIFICATION)return(0,i.jsx)(ze,{logo:(0,i.jsx)(Ye,{}),description:He.Ii,children:(0,i.jsx)(Oe.Z,{type:Oe.E.Pending,message:He.eo})});if(f)return(0,i.jsx)(ze,{logo:(0,i.jsx)(Ye,{}),description:He.Ii,children:(0,i.jsx)(Oe.Z,{type:Oe.E.Error,message:He.Uk})});if(h)return(0,i.jsx)(ze,{logo:(0,i.jsx)(Ye,{}),description:N,children:(0,i.jsx)(Oe.Z,{type:Oe.E.Pending,message:He.QN})});if(k)return(0,i.jsx)(ze,{logo:(0,i.jsx)(Ye,{}),description:N,children:(0,i.jsx)(Oe.Z,{type:Oe.E.Error,message:He.N5})});if(x)return(0,i.jsx)(ze,{logo:(0,i.jsx)(Ye,{}),description:He.Ii,children:(0,i.jsx)(Oe.Z,{type:Oe.E.Success,message:He.l4})});if(t===Ue.NN.FETCHING)return null;switch(t){case Ue.NN.ACTIVE:return(0,i.jsx)(ze,{logo:(0,i.jsx)(Ye,{}),description:N});case Ue.NN.NOT_CONNECTED:return(0,i.jsx)(ze,{logo:(0,i.jsx)(Ye,{}),description:He.Ii,children:(0,i.jsx)(B.Z,{className:$e().connectButton,type:"primary",text:He.I3,onClick:g})});case Ue.NN.PENDING:case Ue.NN.INACTIVE:case Ue.NN.DUE:return(0,i.jsx)(ze,{logo:(0,i.jsx)(Ye,{}),description:(0,i.jsxs)(i.Fragment,{children:["Account: ",n,"."," ",(0,i.jsx)(at,{onClick:S,children:He.rG}),"."]}),children:(0,i.jsx)(Me.Z,{status:t,ctaHref:He.Uz})});default:return null}})),st=function(e){var t=e.list;return(0,i.jsxs)("div",{className:it().Integrations,"data-testid":"integrations",children:[!D.ZP.isMobile&&(0,i.jsx)(Z,{showWorkspaceName:!0,panelName:C.Z.t("paid_transfers.page_title")}),(0,i.jsx)("p",{className:it().description,children:"Connect payment system to begin accepting payments for your paid transfer"}),(0,i.jsx)("div",{className:it().list,children:t.map((function(e){var t=e.type,a=e.status,n=ot[t];return(0,i.jsx)(n,{status:a},"integration-status-".concat(t))}))})]})},ct=function(){var e=(0,s.v9)(Ue.XS),t=(0,g.Rs)().currentTeam,a=(0,s.v9)(Fe.Ts),c=(0,s.v9)(Re.Nu);(0,o.useEffect)((function(){document.title="".concat(C.Z.t("paid_transfers.page_title")," - WeTransfer")})),(0,Te.q)((function(){if(a){var e=(0,r.Z)((0,n.Z)({},Be),{additionalProperties:(0,n.Z)({},Be.additionalProperties),groups:{"Transfer ID":c.id||""}});(0,De.rG)(e)}}));var u=(0,s.I0)();return(0,o.useEffect)((function(){(null===t||void 0===t?void 0:t.id)&&u((0,Ae.Xh)())}),[null===t||void 0===t?void 0:t.id,u]),(0,i.jsx)(st,{list:[{type:nt.STRIPE,status:e}]})},ut=a(66383),lt=a(41929),dt=a(91956),pt=a(50959),mt=function(e){(0,ie.Z)(a,e);var t=(0,oe.Z)(a);function a(e){var n;return(0,ne.Z)(this,a),n=t.call(this,e),(0,N.Z)((0,ae.Z)(n),"state",{data:{current_password:"",company_name:"",street_and_number:"",city:"",zipcode:"",state_code:"",country_code:"",vat_number:""},validateFields:[],scrolledToError:!1}),n.formName="billingDetails",n.validateState=n.validateState.bind((0,ae.Z)(n)),n.validateField=n.validateField.bind((0,ae.Z)(n)),n.updateAccount=n.updateAccount.bind((0,ae.Z)(n)),n.onFieldChange=n.onFieldChange.bind((0,ae.Z)(n)),n.getRemoteErrorMessage=n.getRemoteErrorMessage.bind((0,ae.Z)(n)),n.getRemoteError=n.getRemoteError.bind((0,ae.Z)(n)),n.resetForm(),n.setDefaultDataInState(n.props.billingDetails),n}return(0,re.Z)(a,[{key:"setDefaultDataInState",value:function(e){for(var t in e)e[t]||(e[t]="");this.state.data=e}},{key:"validateField",value:function(e){var t=this.props,a=t.billingDetails,n=t.errors;return this.getLocalError(e)?se.i.NOT_VALID:-1===this.state.validateFields.indexOf(e)||this.state.data[e]===a[e]?se.i.DONT_CHECK:n[this.formName]&&n[this.formName][e]?se.i.NOT_VALID:se.i.VALID}},{key:"getRemoteError",value:function(e){var t=this.props.errors;if(-1===this.state.validateFields.indexOf(e))return!0;if(!t[this.formName]||!t[this.formName][e])return!0;var a="form.account.error."+e+"."+t[this.formName][e][0];return C.Z.t(a)}},{key:"getRemoteErrorMessage",value:function(e){var t=this.getRemoteError(e);return!0===t?"":t}},{key:"isFormDirty",get:function(){var e=this.props,t=e.billingDetails,a=e.errors,n=e.pending,r=!1,i=!0;for(var o in this.state.data){if(r)break;"vat_number"===o&&this.state.data[o]&&2===this.state.data[o].length&&!t[o]||"current_password"!==o&&this.state.data[o]!==t[o]&&(r=!0)}return(n.account||!r||a[this.formName]&&Object.keys(a[this.formName]).length)&&(i=!1),i}},{key:"updateAccount",value:function(e){var t=this;return(0,c.Z)(l().mark((function a(){var i,o,s,c;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.preventDefault(),t.isFormDirty){a.next=3;break}return a.abrupt("return",t);case 3:if(i=t.props,o=i.errors,s=i.account,c=t.state.data,t.setState({validateFields:Object.keys(t.state.data)}),t.validateState(),!o[t.formName]||!Object.keys(o[t.formName]).length){a.next=9;break}return a.abrupt("return",t);case 9:return t.props.setFormState(!1),a.next=12,t.props.onSubmit(s.subscription.id,c);case 12:t.props.getSubscription(s.id,s.subscription.id,{showNotification:!0}),t.setState({validateFields:[],data:(0,r.Z)((0,n.Z)({},c),{current_password:""})}),o[t.formName]&&t.scrollToError();case 15:case"end":return a.stop()}}),a)})))()}},{key:"onFieldChange",value:function(e){this.updateValue(e.target.name,e.target.value)}},{key:"render",value:function(){var e=this.props,t=e.pending,a=e.session,n=t.account?C.Z.t("form.submitting"):C.Z.t("form.save_changes"),r=this.isFormDirty;return t.account&&(r=!1),(0,i.jsx)("div",{children:(0,i.jsxs)("form",{method:"post",onSubmit:this.updateAccount,onBlur:this.validateState,children:[(0,i.jsx)(Y.Z,{shouldFocus:!1,label:"".concat(C.Z.t("form.account.label.company")," ").concat(C.Z.t("form.account.label.not_required")),value:this.state.data.company_name,name:"company_name",onChange:this.onFieldChange,valid:0}),(0,i.jsx)(ce.ZP,{message:this.getRemoteErrorMessage("company_name"),type:"error"}),(0,i.jsx)(Y.Z,{label:C.Z.t("form.account.label.street_and_number"),value:this.state.data.street_and_number,name:"street_and_number",onChange:this.onFieldChange,valid:0}),(0,i.jsx)(ce.ZP,{message:this.getRemoteErrorMessage("street_and_number"),type:"error"}),(0,i.jsx)(Y.Z,{label:C.Z.t("form.account.label.city"),value:this.state.data.city,name:"city",onChange:this.onFieldChange,valid:0}),(0,i.jsx)(ce.ZP,{message:this.getRemoteErrorMessage("city"),type:"error"}),(0,i.jsx)(Y.Z,{label:C.Z.t("form.account.label.zipcode"),value:this.state.data.zipcode,name:"zipcode",onChange:this.onFieldChange,valid:0}),(0,i.jsx)(ce.ZP,{message:this.getRemoteErrorMessage("zipcode"),type:"error"}),(0,i.jsx)(lt.Z,{value:this.state.data.country_code,defaultValue:this.state.data.country_code||a.region.country,errorMessage:this.getRemoteErrorMessage("country_code"),updateValue:this.updateValue,variant:"readonly"}),(0,i.jsx)(dt.Z,{value:this.state.data.state_code,errorMessage:this.getRemoteErrorMessage("state_code"),updateValue:this.updateValue,countryCode:this.state.data.country_code}),(0,i.jsx)(pt.Z,{value:this.state.data.vat_number,errorMessage:this.getRemoteErrorMessage("vat_number"),updateValue:this.updateValue,resetError:this.resetError,formName:this.formName,countryCode:this.state.data.country_code}),(0,i.jsx)(B.Z,{onClick:this.updateAccount,active:r,text:n,align:"right",submit:!0})]})})}}]),a}(se.Z);mt.propTypes={billingDetails:K().object,account:K().object,notification:K().object,errors:K().object,pending:K().object,onSubmit:K().func.isRequired,setFormState:K().func.isRequired,getSubscription:K().func.isRequired},mt.defaultProps={pending:{},errors:{},notification:{}};var ft=(0,s.$j)((function(e){return{billingDetails:e.billingDetails,account:e.account,errors:e.errors,pending:e.pending,session:e.session,notification:e.notification}}),(0,n.Z)({},I.Z.Route,I.Z.Account))(mt),_t=function(e){(0,ie.Z)(a,e);var t=(0,oe.Z)(a);function a(){return(0,ne.Z)(this,a),t.apply(this,arguments)}return(0,re.Z)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.account,a=e.pending;e.billingDetails.full_name||a.getBillingDetails||this.props.getBillingDetails(t.subscription.id)}},{key:"render",value:function(){var e=this.props,t=e.pending,a=e.updateBillingDetails;return t.getBillingDetails?(0,i.jsx)(k.Z,{}):(0,i.jsx)(ft,{onSubmit:a})}}]),a}(o.Component);_t.propTypes={account:K().object,pending:K().object,billingDetails:K().object,getBillingDetails:K().func.isRequired,updateBillingDetails:K().func.isRequired};var gt={getBillingDetails:I.Z.BillingDetails.getBillingDetails,updateBillingDetails:I.Z.BillingDetails.updateBillingDetails},vt=(0,s.$j)((function(e){return{account:e.account,pending:e.pending,billingDetails:e.billingDetails}}),gt)(_t),ht=function(e){(0,ie.Z)(a,e);var t=(0,oe.Z)(a);function a(e){var n;return(0,ne.Z)(this,a),(n=t.call(this,e)).onClick=n.onClick.bind((0,ae.Z)(n)),n}return(0,re.Z)(a,[{key:"onClick",value:function(){this.props.onClick(this.props.id)}},{key:"render",value:function(){var e=this.props,t=e.start,a=e.end,n=e.paidOnText;return(0,i.jsxs)("li",{className:"invoice__item",children:[(0,i.jsx)("span",{className:"invoice__title",children:"".concat(t," - ").concat(a)},"invoices_title"),(0,i.jsx)("span",{className:"invoice__details",children:n},"invoices_details"),(0,i.jsx)("button",{className:"invoice__download",onClick:this.onClick,children:(0,i.jsx)(J.Z,{className:"invoice_download",type:"DownloadSmall",color:$.kn},"invoices_download")})]})}}]),a}(o.Component);(0,N.Z)(ht,"propTypes",{end:K().string.isRequired,id:K().number.isRequired,onClick:K().func.isRequired,paidOnText:K().string.isRequired,start:K().string.isRequired});var bt=function(e){(0,ie.Z)(a,e);var t=(0,oe.Z)(a);function a(){return(0,ne.Z)(this,a),t.apply(this,arguments)}return(0,re.Z)(a,[{key:"componentDidMount",value:function(){var e=ue.ZP.getState(),t=e.pending,a=e.invoices;t.getInvoices||null!==a||ue.ZP.dispatch(I.Z.Invoices.getInvoices())}},{key:"downloadInvoice",value:function(e){ue.ZP.dispatch(I.Z.Invoices.getInvoice(e))}},{key:"renderItems",value:function(e){var t=this;return Object.keys(e).map((function(a){var n=e[a],r=n.id,o=n.started_at,s=n.ended_at,c=e[a],u=c.currency,l=c.total,d=c.created;u=C.Z.t("number.currency."+u.toUpperCase()),l=C.Z.number(l,{precision:2}),d=C.Z.date(new Date(d),"without_day");var p=new Date(o),m=new Date(s),f=p.getFullYear(),_=m.getFullYear(),g=C.Z.t("page.accountinfo.paid_on")+" "+d+"\u30fb"+u+l;return p=C.Z.t("date.month_names."+(new Date(p).getMonth()+1))+" "+f,m=C.Z.t("date.month_names."+(new Date(m).getMonth()+1))+" "+_,(0,i.jsx)(ht,{id:r,start:p,end:m,paidOnText:g,onClick:t.downloadInvoice},r)}))}},{key:"render",value:function(){var e=ue.ZP.getState(),t=e.pending,a=e.invoices;return a?t.getInvoices?(0,i.jsx)(k.Z,{}):a.list&&a.list.length?(0,i.jsx)("ul",{className:"invoice",children:this.renderItems(a.list)}):(0,i.jsx)("div",{className:"invoice__no-receipts",children:(0,i.jsx)("p",{children:C.Z.t("page.accountinfo.no_invoices")})}):null}}]),a}(o.Component),Zt=a(33197),xt=a(51746),yt=a(1301),wt=a(83043),kt=a(79050),jt=a.n(kt),St=function(e){var t,a,n,r,u,d=e.displayPill,m=e.variant,f=void 0===m?"grey":m,h=e.isUpgradeCard,b=void 0!==h&&h,Z=e.isPendingDowngrade,x=void 0!==Z&&Z,y=e.freeUser,w=e.isPremiumUpgrade,k=e.isProUpgrade,j=p()(jt().SubscriptionCard,(u={},(0,N.Z)(u,jt().SubscriptionCardGrey,"grey"===f),(0,N.Z)(u,jt().SubscriptionCardOutline,"outline"===f),u)),P=(0,s.v9)((function(e){return{user:e.user,account:e.account}})),E=P.user,T=P.account,D=(0,g.Rs)().currentTeam,A=(0,yt.t)().tiers,U=(0,s.I0)(),R=_.Z.parseSubscriptionDetails(T.subscription,E.planTier),F=null===R||void 0===R?void 0:R.number_of_members,B=(null===D||void 0===D?void 0:D.members.length)<=1||!D,M=null===(t=T.checkout)||void 0===t||null===(a=t.order)||void 0===a?void 0:a.interval,V=null===(n=T.checkout)||void 0===n||null===(r=n.order)||void 0===r?void 0:r.currency,L=(null===A||void 0===A?void 0:A.premium_2022)&&(null===A||void 0===A?void 0:A.premium_2022[M].plan_id),H=(null===A||void 0===A?void 0:A.pro_2022)&&(null===A||void 0===A?void 0:A.pro_2022[M].plan_id)||(null===A||void 0===A?void 0:A.plus)&&(null===A||void 0===A?void 0:A.plus[M].plan_id),O=(0,S.K4)(E),q="pro_2022"===O||"plus"===O,W=q?H:L,z=C.Z.t("number.currency.".concat(V&&V.toUpperCase())),G=(null===A||void 0===A?void 0:A.premium_2022)&&(null===A||void 0===A?void 0:A.premium_2022[M].total),Q=(null===A||void 0===A?void 0:A.pro_2022)&&(null===A||void 0===A?void 0:A.pro_2022[M].total),K=(null===A||void 0===A?void 0:A.pro_2022)&&(null===A||void 0===A?void 0:A.pro_2022[M].total_per_seat),Y=(null===A||void 0===A?void 0:A.premium_2022)&&(null===A||void 0===A?void 0:A.premium_2022[M].total_per_seat),J="/pricing",$=z+G,X=z+Q,ee=(0,S.Sz)(E)?Q/F:G/F,te=_.Z.getPlanName(E.planTier),ae=C.Z.t("pricing_panel.current_solo_workspace_information",{formattedintervaltotal:q?z+K:z+Y,subscriptioninterval:M,autorenewalattempt:null===R||void 0===R?void 0:R.autorenewal_attempt}),ne=C.Z.t("pricing_panel.current_team_workspace_information",{formattedTeamWorkspaceCost:q?z+Q:z+G,subscriptioninterval:M,membercount:F,tieramount:q?z+K:z+Y,autorenewalattempt:null===R||void 0===R?void 0:R.autorenewal_attempt}),re=[C.Z.t("page.pricing_panel.plans.free.usp.feature_1",{transferLimit:Zt.xj.TRANSFER_LIMIT}),C.Z.t("page.pricing_panel.plans.free.usp.feature_2")],ie=w?[C.Z.t("pricing_panel.premium_feature_one"),C.Z.t("pricing_panel.premium_feature_two"),C.Z.t("pricing_panel.premium_feature_three")]:[C.Z.t("page.pricing_panel.plans.pro.usp.feature_1",{transferLimit:(0,xt.y)()}),C.Z.t("page.pricing_panel.plans.pro.usp.feature_2",{storageLimit:Zt.SV.STORAGE_LIMIT}),C.Z.t("page.pricing_panel.plans.pro.usp.feature_3",{portalsLimit:Zt.SV.PORTALS_LIMIT})],oe=(0,o.useCallback)((0,c.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k&&(wt.Z.navigateTo(J),(0,De.rG)({action:"Upsell",additionalProperties:{Action:"Upgrade",Context:"Account: Plans Page","Plans Card":"Pro"}})),!w){e.next=5;break}return e.next=4,U(I.Z.Account.upgradePaidSubscription({plan_id:L}));case 4:(0,De.rG)({action:"Subscription Funnel",additionalProperties:{Action:"Upgrade",Context:"Account: Plans Page","Subscription Tier":"Premium"}});case 5:if(!x){e.next=8;break}return e.next=8,U(I.Z.Account.reactivateSubscription({plan_id:W}));case 8:case"end":return e.stop()}}),e)}))),[U,W,J,x,w,k,L]),se=(0,i.jsxs)("div",{className:jt().downgradeText,children:[(0,i.jsx)("p",{className:jt().planInfo,dangerouslySetInnerHTML:{__html:C.Z.t("pricing_panel.pending_downgrade_current_subscription",{cancellation_date:null===R||void 0===R?void 0:R.expiry})}}),(0,i.jsx)("span",{className:jt().planInfo,children:C.Z.t("pricing_panel.pending_downgrade_reactivate_text")})]}),ce=(0,S.Sz)(E),ue=1===F?C.Z.t("page.teams.subtitle.members.one",{count:F}):C.Z.t("page.teams.subtitle.members.other",{count:F});return(0,i.jsx)("div",{className:j,"data-testid":"SubscriptionCard",children:(0,i.jsxs)("div",{className:jt().currentPlan,children:[(0,i.jsxs)("div",{className:jt().planHeader,children:[(0,i.jsxs)("div",{className:jt().planTitle,children:[(0,i.jsx)("h2",{children:w?C.Z.t("pricing_panel.premium_title"):k?C.Z.t("page.payment_methods.plan_details.pro"):te}),d&&(0,i.jsx)(v.DR,{className:jt().Pill,textContent:C.Z.t("pricing_panel.pill_text"),variant:"sun"})]}),(0,i.jsxs)("div",{className:jt().UpgradePriceOverview,children:[!b&&(0,i.jsx)("span",{className:jt().memberCount,children:ue}),b&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:jt().UpgradePrice,dangerouslySetInnerHTML:{__html:C.Z.t("pricing_panel.upgrade_price",{totalprice:w?$:X,interval:M})}}),(0,i.jsx)("p",{className:jt().UpgradePriceBreakdown,dangerouslySetInnerHTML:1===F?{__html:C.Z.t("pricing_panel.team_upgrade_calculation_one",{membercount:F,tierprice:z+ee})}:{__html:C.Z.t("pricing_panel.team_upgrade_calculation_multiple",{membercount:F,tierprice:z+ee})}})]})]})]}),!b&&(x?se:(0,i.jsx)(i.Fragment,{children:!ce&&(0,i.jsx)("p",{className:jt().planInfo,dangerouslySetInnerHTML:{__html:B?ae:ne}})})),b&&(0,i.jsx)("ul",{className:jt().ListItems,children:ie.map((function(e,t){return(0,i.jsxs)("div",{className:jt().Item,children:[(0,i.jsx)(v.JO,{name:"checkmark-simple--blue",size:18}),(0,i.jsx)("li",{children:e})]},t)}))}),y&&(0,i.jsx)("ul",{className:jt().ListItems,children:re.map((function(e,t){return(0,i.jsxs)("div",{className:jt().Item,children:[(0,i.jsx)(v.JO,{name:"checkmark-simple--blue",size:18}),(0,i.jsx)("li",{children:e})]},t)}))}),x||b?(0,i.jsx)(v.zx,{className:jt().SwitchCta,variant:"primary",label:x?C.Z.t("pricing_panel.pending_downgrade_reactivate_cta"):w?C.Z.t("page.payment.premium_upgrade.cta"):C.Z.t("pricing_panel.pro_card_cta"),"aria-label":x?"downgrading plan":w?"upgrade to premium":"Learn more about plans and pricing",square:!0,onClick:oe,as:"a"}):null]})})},Nt=a(64604),Pt=a.n(Nt),Ct=a(82322),It=a.n(Ct),Et=(0,s.$j)((function(e){return{account:e.account}}))((function(e){var t=e.account.unpaidInvoices||[];return t.length<1?null:(0,i.jsxs)("div",{className:It().container,children:[(0,i.jsxs)("div",{className:It().header,children:[(0,i.jsx)("h5",{children:C.Z.t("page.payment.unpaid_invoices.heading")}),(0,i.jsx)("p",{children:C.Z.t("page.payment.unpaid_invoices.subheading")}),t.find((function(e){return e.payment_pending}))&&(0,i.jsx)("p",{children:C.Z.t("page.payment.unpaid_invoices.subheading_2")})]}),(0,i.jsx)("div",{className:It().invoices,children:t.map((function(e){var t=e.id,a=e.created,n=e.currency,r=e.hosted_invoice_url,o=e.amount_due,s=e.payment_pending,c=new Date(a),u=C.Z.t("date.month_names."+(c.getMonth()+1))+" "+c.getFullYear(),l=C.Z.t("page.payment.unpaid_invoices.item.issued_on"),d=C.Z.date(new Date(a),"without_day"),m=C.Z.t("number.currency."+n.toUpperCase()),f=C.Z.number(o,{precision:2}),_="".concat(l," ").concat(d,"\u30fb").concat(m," ").concat(f);return(0,i.jsxs)("div",{className:p()(It().invoiceItem,(0,N.Z)({},It().invoiceItemPending,s)),children:[(0,i.jsxs)("div",{className:It().invoiceItemRow,children:[(0,i.jsx)("span",{className:It().invoiceItemHeader,children:u}),(0,i.jsx)("a",{className:It().invoiceItemLink,href:r,target:"_blank",rel:"noreferrer",children:C.Z.t(s?"page.payment.unpaid_invoices.item.pending_invoice":"page.payment.unpaid_invoices.item.pay_invoice")})]}),(0,i.jsx)("span",{className:It().invoiceItemInfo,children:_})]},t)}))})]})})),Tt={getUnpaidInvoices:I.Z.Account.getUnpaidInvoices,getPaidUpgradePreview:I.Z.Account.getPaidUpgradePreview,getCheckoutDetails:I.Z.Account.getCheckoutDetails,getInvoices:I.Z.Invoices.getInvoices,getSubscription:I.Z.Account.getSubscription},Dt=(0,s.$j)((function(e){return{pending:e.pending,account:e.account,user:e.user,route:e.route}}),Tt)((function(e){var t=e.pending,a=e.account,n=e.user,r=e.route,s=e.actionType,u=e.getUnpaidInvoices,d=e.getPaidUpgradePreview,m=e.getCheckoutDetails,f=e.getInvoices,g=e.getSubscription,h=o.useRef(null),b=(0,yt.t)(),x=b.tiers,y=b.fetchTiersPricing,w=b.isTiersPricingPending,j=a.subscription,N=a.paidUpgradePreview,P=Zt.V2.includes(j.status),I=j.cancel_at_period_end,E=_.Z.parseSubscriptionDetails(a.subscription),T=null===E||void 0===E?void 0:E.autorenewal_attempt,A=(0,ut.Z)(o.useState(!1),2),U=A[0],R=A[1],F=P&&(0,S.Jb)(n),B="marketing"===r.query.from,M=F&&(!a.paidUpgradePreview||t.getPaidUpgradePreview||!x.premium_2022||w);o.useEffect((function(){document.title="".concat(C.Z.t("page.payment.pagename")," - WeTransfer")})),o.useEffect((function(){u(),f(),g(a.id,a.subscription.id,{showNotification:!0})}),[u,f,g,a.id,a.subscription.id]),o.useEffect((function(){a.checkout||t.getCheckoutDetails||m(a.subscription.id)}),[m,a.subscription.id,a.checkout,t.getCheckoutDetails]),o.useEffect((function(){var e=function(){var e=(0,c.Z)(l().mark((function e(){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(w||x.premium_2022||t.getCheckoutDetails)&&a.checkout){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,y({country_code:null===a||void 0===a||null===(n=a.checkout)||void 0===n||null===(r=n.order)||void 0===r?void 0:r.country_code});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[y,w,a.checkout,t.getCheckoutDetails,x.premium_2022]),o.useEffect((function(){void 0!==t.getUnpaidInvoices&&!t.getUnpaidInvoices&&u()}),[t,u]),o.useEffect((function(){if(!N&&F&&!U&&x.premium_2022){var e=x.premium_2022[j.plan.interval].plan_id;d({plan_id:e}),R(!0)}}),[N,U,j,x,F,d]),o.useEffect((function(){var e;h&&(null===(e=h.current)||void 0===e||e.focus())}),[h,t]);var V=o.useCallback((function(){O.Z.trackSnowplowEvent({category:"pro",action:"click_cancel_pro"}),O.Z.trackWithPixelOrSDK("WeTransfer_Account_Cancel_Subscription_Click")}),[]);if(!a.unpaidInvoices||M||t.upgradePaidSubscription)return(0,i.jsx)(k.Z,{});var L=(0,S.sm)(n),H=!a.active_subscription;return(0,i.jsxs)("div",{className:"payment",children:[!D.ZP.isMobile&&(0,i.jsx)(Z,{showWorkspaceName:!0,panelName:C.Z.t("page.payment.pagename")}),P&&(0,i.jsx)(Et,{}),I?(0,i.jsx)("div",{className:Pt().subscriptionCardContainer,children:(0,i.jsx)(St,{isPendingDowngrade:!0,variant:"outline"})}):L?(0,i.jsx)("div",{className:Pt().subscriptionCardContainer,children:(0,i.jsx)(St,{displayPill:!0,variant:"grey"})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:Pt().subscriptionCardContainer,children:[(0,S.Sz)(n)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(St,{displayPill:!0,freeUser:!0}),(0,i.jsx)(St,{variant:"outline",isUpgradeCard:!0,isProUpgrade:!0})]}),(0,S.Jb)(n)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(St,{displayPill:!0}),(0,i.jsx)(St,{variant:"outline",isUpgradeCard:!0,isPremiumUpgrade:!0})]})]}),(0,i.jsx)("a",{className:Pt().LearnMore,href:"/pricing",children:C.Z.t("pricing_panel.learn_more")})]}),(0,S.Sz)(n)||H?null:(0,i.jsxs)("div",{className:Pt().UpdatePaymentDetails,children:[(0,i.jsx)("h5",{className:Pt().UpdatePaymentDetailsHeading,children:"Payment"}),(0,i.jsx)("p",{className:Pt().UpdatePaymentDetailsText,dangerouslySetInnerHTML:{__html:I?C.Z.t("pricing_panel.pending_downgrade_payment"):C.Z.t("pricing_panel.next_payment_date",{recurring_billing_date:T})}}),(0,i.jsx)(v.zx,{className:Pt().UpdatePaymentButton,variant:"secondary",label:C.Z.t("pricing_panel.update_payment_cta"),square:!0,small:!0,as:"a",href:"/payment/update"})]}),(0,S.dM)(n)&&function(){if("cancel"===s)return function(){var e=(0,i.jsxs)("div",{className:Pt().cancellationText,children:[(0,i.jsx)("p",{className:Pt().cancellationTextInfo,dangerouslySetInnerHTML:{__html:C.Z.t("pricing_panel.cancel_plan",{planName:_.Z.getPlanName(n.planTier),subscriptionRenewalDate:T})}}),(0,i.jsx)("span",{className:Pt().cancellationTextInfo,children:C.Z.t("pricing_panel.cancel_expiry_text")})]}),a=p()("payment__cancel",Pt().cancelContainer);return(0,i.jsxs)("div",{className:a,hidden:B&&(0,S.xB)(n),children:[(0,i.jsx)("h5",{className:Pt().cancelHeader,children:C.Z.t("page.payment.cancellation_heading_trial")}),e,t.cancelSubscription?(0,i.jsx)("p",{className:"payment__cancel-message",children:C.Z.t("page.payment.cancelling")}):(0,i.jsx)("div",{className:"payment__cancel-link",children:(0,i.jsx)(v.zx,{as:"a",href:"/workspace/payment/cancel",fullWidth:!0,label:C.Z.t("page.payment.cancellation_cta"),variant:"destructive",square:!0,onClick:V,className:"payment__cancel-link--downgrade"})})]})}()}(),(0,S.dM)(n)&&(0,i.jsxs)("div",{className:Pt().BillingSection,children:[(0,i.jsx)("h5",{className:Pt().BillingHeader,children:C.Z.t("page.billinginfo.pagename")}),(0,i.jsx)(vt,{})]}),(0,i.jsxs)("div",{className:Pt().ReceiptSection,children:[(0,i.jsx)("h5",{className:Pt().ReceiptsHeader,children:C.Z.t("page.invoices.pagename")}),(0,i.jsx)(bt,{})]})]})})),At=Dt,Ut=a(56563),Rt=a(36354),Ft=a(12014),Bt=a.n(Ft),Mt=(0,s.$j)((function(e){return{account:e.account}}),null)((function(e){var t=e.account,a=t&&t.subscription?t.subscription.payment_method:null,n=(0,o.useState)({appName:"",linkText:"",linkHref:""}),r=n[0],s=n[1],c=r.appName,u=r.linkText,l=r.linkHref,d=(0,o.useCallback)((function(){var e;return"App Store"===c?e="click_go_to_app_store":"Google Play"===c&&(e="click_go_to_play_store"),e&&O.Z.trackSnowplowEvent({category:"pro",action:e}),!0}),[c]),p=(0,o.useCallback)((function(){return O.Z.trackSnowplowEvent({category:"pro",action:"click_learn_more_app_subscription"}),!0}),[]);return(0,o.useEffect)((function(){a!==Rt.hL.app_store?a===Rt.hL.play_store&&s({appName:"Google Play",linkText:"".concat(C.Z.t("page.payment.app_subscription_banner.go_to")," Google Play"),linkHref:Ut.Eh}):s({appName:"App Store",linkText:"".concat(C.Z.t("page.payment.app_subscription_banner.go_to")," App Store"),linkHref:Ut.xq})}),[a]),a?(0,i.jsxs)("div",{className:Bt().appSubscriptionBanner,children:[(0,i.jsx)("div",{className:Bt().appSubscriptionBanner__title,children:C.Z.t("page.payment.app_subscription_banner.title",{app_name:c})}),(0,i.jsx)("div",{className:Bt().appSubscriptionBanner__content,children:C.Z.t("page.payment.app_subscription_banner.content",{app_name:c})}),(0,i.jsxs)("div",{className:Bt().appSubscriptionBanner__footer,children:[(0,i.jsx)("a",{className:Bt().appSubscriptionBanner__appStoreLink,href:l,target:"_blank",rel:"noreferrer",onClick:d,children:u}),(0,i.jsx)("a",{className:Bt().appSubscriptionBanner__learnMoreLink,href:Ut.eZ,onClick:p,children:C.Z.t("page.payment.app_subscription_banner.learn_more")})]})]}):null})),Vt=function(e){var t=e.memberQuantity,a=_.Z.getManageTeamUrl();return(0,i.jsx)("div",{className:"TeamSettings","data-testid":"TeamSettings",children:t>1?(0,i.jsx)("p",{dangerouslySetInnerHTML:{__html:C.Z.t("page.teamsettings.members",{amountOfMembers:t,href:a,cta:C.Z.t("page.teamsettings.manage.cta")})}}):(0,i.jsx)("p",{dangerouslySetInnerHTML:{__html:C.Z.t("page.teamsettings.no_members",{href:a,cta:C.Z.t("page.teamsettings.invite.cta")})}})})},Lt=function(){return(0,i.jsx)("div",{className:"userinformation",children:(0,i.jsx)(Ne,{})})},Ht=a(85374),Ot=a(21153),qt=a(51058),Wt=a(89666),zt=a(49573),Gt=a(84011);var Qt=a(2352),Kt=a(26831),Yt=a(65835),Jt=a(76832),$t=function(e){var t=(0,o.useState)(!1),a=t[0],s=t[1],u=function(t){var a=e.signout,n=e.isForwardedTransfer,r=void 0!==n&&n,i=e.uploadInProgress;t.preventDefault(),i&&s(!0),a({isForwardedTransfer:r})};(0,o.useEffect)((function(){e.routeQueryDuration&&!e.routeQueryRenewal&&O.Z.trackGoogleEvent({category:"Plus",action:"Onboarding",label:"Step 3 View - Free-".concat(e.freeRoute?"yes":"no"," Duration-").concat(e.routeQueryDuration)})}),[e]);var d=e.resetNotification,p=(0,o.useCallback)((function(){d()}),[d]),m=(0,o.useCallback)((function(){var t=e.routeQueryDuration,a=e.routeQueryRenewal;if(/year|month/.test(t)){var n="page.accountinfo.payment_success.".concat(t,"ly");return"1"===a&&(n+="_renewal"),(0,i.jsx)(F.Z,{showClose:!0,children:(0,i.jsx)("p",{dangerouslySetInnerHTML:{__html:C.Z.t(n)}})})}}),[e.routeQueryDuration,e.routeQueryRenewal]),g={account:{href:"/account",label:"page.userinfo.pagename",component:Lt,key:"user_information"},profileAndSecurity:{href:"/account",label:"profile_and_security.page_name",component:Ie,key:"profile_and_security"},payment:(0,n.Z)({href:"/workspace/payment",label:"page.payment.pagename",key:"payment"},function(){if(!e.userCanManageSubscription)return{component:Mt};if(e.userCanCancelSubscription)return{component:At,options:{actionType:"cancel"}};if(e.userCanReactivateSubscription){var t=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=function(s){(0,ie.Z)(d,s);var u=(0,oe.Z)(d);function d(e){var t;return(0,ne.Z)(this,d),(t=u.call(this,e)).showConfirmation=t.showConfirmation.bind((0,ae.Z)(t)),t.hideConfirmation=t.hideConfirmation.bind((0,ae.Z)(t)),t.makeConfirmation=t.makeConfirmation.bind((0,ae.Z)(t)),t.onConfirm=t.onConfirm.bind((0,ae.Z)(t)),t.state={showConfirmation:!1},t}return(0,re.Z)(d,[{key:"onConfirm",value:function(){var e=this;return(0,c.Z)(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,a();case 4:e.hideConfirmation();case 5:case"end":return n.stop()}}),n)})))()}},{key:"showConfirmation",value:function(){this.setState({showConfirmation:!0})}},{key:"hideConfirmation",value:function(){if(this.actionbarNode){var e=this;this.actionbarNode.hide((function(){e.setState({showConfirmation:!1})}))}}},{key:"makeConfirmation",value:function(){var e=this;if(this.state.showConfirmation)return(0,i.jsxs)(f.Z,{ref:function(t){return e.actionbarNode=t},text:C.Z.t(r.message),children:[(0,i.jsx)(B.Z,{type:"actionbar-action",text:t?C.Z.t(r.confirmingMessage):C.Z.t(r.confirmButton),onClick:this.onConfirm}),(0,i.jsx)(B.Z,{type:"actionbar-cancel",text:C.Z.t("form.cancel"),onClick:this.hideConfirmation})]})}},{key:"render",value:function(){return(0,i.jsxs)(o.Fragment,{children:[(0,i.jsx)(e,(0,n.Z)({showConfirmation:this.showConfirmation,confirming:this.state.showConfirmation},this.props)),this.makeConfirmation()]})}}]),d}(o.Component);return s}(At,e.pendingReactivateSubscription,(function(){O.Z.trackWithPixelOrSDK("WeTransfer_Reactivate_Plus_Go_Ahead_Conversion"),e.reactivateSubscription()}),{message:"page.payment.confirm_reactivate_subscription",confirmButton:"page.payment.yes_disable",confirmingMessage:"page.payment.updating"});return{component:t,options:{actionType:"reactivate"}}}return{component:At}}()),brandedEmails:{href:"/workspace/emails",label:"branded_emails.title",component:U,key:"branded emails"},brandedPage:{href:"/workspace/branded-page",label:"branded_page.title",component:G,key:"branded_page"},changePassword:{href:"/account",label:"page.password_and_security.title",component:ve,key:"change_password"},manageTeam:{href:_.Z.getManageTeamUrl(),label:"page.workspace_bar.settings_and_members",component:Vt,key:"team_settings",icon:(0,i.jsx)(he.Z,{}),options:{memberQuantity:e.accountSubscriptionsQuantity||1}},integrations:{href:Ee.De.route,label:"Integrations",component:ct,key:"integrations"}},v=(0,o.useCallback)((function(){var t=[g.brandedPage,g.brandedEmails,g.payment,g.manageTeam];return D.ZP.isMobile&&t.unshift(g.account,g.changePassword),((0,zt.iU)(e.user)&&!D.ZP.isMobile||qt.Z.isEnablePaidTransfers()&&Wt.Z.isOn())&&t.splice(2,0,g.integrations),t}),[g.account,g.brandedPage,g.brandedEmails,g.changePassword,g.integrations,g.manageTeam,g.payment,e.user]),h=(0,o.useCallback)((function(){return[g.profileAndSecurity]}),[g.profileAndSecurity]),b=(0,o.useMemo)((function(){return v()}),[v]),Z=(0,o.useMemo)((function(){return h()}),[h]),x=(null===Z||void 0===Z?void 0:Z.find((function(t){return t.href===e.routePath})))||b.find((function(t){return t.href===e.routePath})),y=(0,o.useMemo)((function(){var e=[];return!D.ZP.isMobile&&x||x&&x.hidden?e.push(x):e=(null===Z||void 0===Z?void 0:Z.filter((function(e){return!e.hidden})))&&(null===b||void 0===b?void 0:b.filter((function(e){return!e.hidden}))),e}),[x,b,Z]),w=null,j=!1;!D.ZP.isMobile&&x?x.hidden||(w=(0,i.jsx)("div",{className:"account__menu",children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h3",{className:"nav-title",children:C.Z.t("user.items.account")}),(0,i.jsx)(Ht.Z,{items:Z,activeItem:e.routePath,onClick:p}),(0,i.jsx)("h3",{className:"nav-title",children:C.Z.t("page.workspace_bar.workspace")}),(0,i.jsx)(Ht.Z,{items:b,activeItem:e.routePath,onClick:p})]})})):j=!0;var N=(0,o.useMemo)((function(){var t=[];return y.forEach((function(a,s){var c=a.component;t.push((0,o.createElement)(c,(0,r.Z)((0,n.Z)({},a.options),{navigate:p,setReturnPath:e.setReturnPath,key:"".concat(a.key,"_component")}))),j&&y.length>1&&s!==y.length-1&&t.push((0,i.jsx)("hr",{},"".concat(a.key,"_hr")))})),t}),[y,p,e.setReturnPath,j]),P=(0,i.jsxs)("div",{className:"account__mobile-header",children:[(0,i.jsx)("h1",{children:"Account"}),function(){var t=e.user;return(0,i.jsxs)("div",{className:"account__navigation-buttons",children:[(0,S.Sz)(t)&&(0,i.jsx)("a",{className:"button button--enabled account__navigation-button",href:(0,Gt.HP)("WT202006_account_fa_to_".concat((0,S.Jb)(t)?"premium":"pro")),children:C.Z.t("page.payment.upgrade_cta")}),(0,i.jsx)(B.Z,{className:"account__navigation-button",active:!e.pendingSignout,type:"secondary",onClick:function(t){e.uploadInProgress&&s(!0),u(t)},text:C.Z.t("navigation.logout")})]})}()]});if(!e.accountSubscriptionId)return(0,i.jsx)(k.Z,{});var I=e.tip,E=e.routePath!==g.account.href;return(0,i.jsxs)(i.Fragment,{children:[E&&(0,i.jsx)("div",{className:"workspace_bar__container",children:(0,i.jsx)(Ot.Z,{})}),(0,i.jsxs)("div",{className:"account",children:[D.ZP.isMobile&&!(null===x||void 0===x?void 0:x.hidden)?P:null,(0,i.jsx)("div",{className:"account__content",children:N}),m()||I,w,a&&(0,i.jsx)(be.Z,{cancelUpload:u,continueUpload:function(){s(!1)}})]})]})},Xt={signout:I.Z.User.signout.bind(I.Z.User),reactivateSubscription:I.Z.Account.reactivateSubscription,resetNotification:I.Z.Notification.resetNotification},ea=(0,s.$j)((function(e){return{routePath:(0,Kt.b6)(e),freeRoute:(0,Kt.yh)(e),routeQueryDuration:(0,Kt.Sq)(e),routeQueryRenewal:(0,Kt.m0)(e),accountSubscriptionId:(0,Qt.W4)(e),accountSubscriptionsQuantity:(0,Qt.Oh)(e),userCanManageSubscription:(0,S.Ch)(e.account),userCanCancelSubscription:(0,Qt.TU)(e),userCanReactivateSubscription:(0,Qt.l0)(e),user:(0,Fe.dy)(e),pendingReactivateSubscription:(0,A.Wv)(e),pendingSignout:(0,A.zr)(e),uploadInProgress:(0,Yt.iJ)(e),isForwardedTransfer:(0,Jt.V$)(e)}}),Xt)($t)},65835:function(e,t,a){"use strict";a.d(t,{c8:function(){return r},iJ:function(){return n}});var n=(0,a(5994).P1)((function(e){return e.upload}),(function(e){return e.isPending})),r=function(e){return e.uploadNotifications}},20646:function(e){e.exports={PanelHeader:"PanelHeader_PanelHeader__y_uj8",WorkspaceName:"PanelHeader_WorkspaceName__tgWZD",PanelInformation:"PanelHeader_PanelInformation__PJKf7",PanelAvatar:"PanelHeader_PanelAvatar__bdw9h",PanelName:"PanelHeader_PanelName__ZZMQG",divider:"PanelHeader_divider__A3DNk"}},91543:function(e){e.exports={workspaceUpgradeBanner:"WorkspaceUpgradeBanner_workspaceUpgradeBanner__1EkAg",workspaceUpgradeBannerHeading:"WorkspaceUpgradeBanner_workspaceUpgradeBannerHeading__if5dD",workspaceUpgradeBannerInfo:"WorkspaceUpgradeBanner_workspaceUpgradeBannerInfo__26JtI",workspaceUpgradeBannerCta:"WorkspaceUpgradeBanner_workspaceUpgradeBannerCta__w71WI"}},85737:function(e){e.exports={description:"Integrations_description__2OzcP",list:"Integrations_list__nDpa6"}},843:function(e){e.exports={card:"StatusCard_card__jBIuC",description:"StatusCard_description___6nwr"}},72608:function(e){e.exports={logo:"StripeLogo_logo__ODP6S"}},25681:function(e){e.exports={connectButton:"StripeStatus_connectButton__eMiCw",inlineLink:"StripeStatus_inlineLink__kvhSI"}},47594:function(e){e.exports={button:"TextButton_button__7c3y3"}},33226:function(e){e.exports={profileAndSecurity:"ProfileAndSecurity_profileAndSecurity___EXxo",PanelContent:"ProfileAndSecurity_PanelContent__LTVSm",sectionHeading:"ProfileAndSecurity_sectionHeading__YicRJ",seperator:"ProfileAndSecurity_seperator__C66EE"}},79050:function(e){e.exports={SubscriptionCardGrey:"SubscriptionCard_SubscriptionCardGrey__pNLGh",SubscriptionCardOutline:"SubscriptionCard_SubscriptionCardOutline__8Od8S",SubscriptionCard:"SubscriptionCard_SubscriptionCard___SRsJ",currentPlan:"SubscriptionCard_currentPlan__a_b6W",planHeader:"SubscriptionCard_planHeader__urjsy",planTitle:"SubscriptionCard_planTitle__VUvDh",Pill:"SubscriptionCard_Pill__InyLq",memberCount:"SubscriptionCard_memberCount__waN_H",downgradeText:"SubscriptionCard_downgradeText__L8GQo",planInfo:"SubscriptionCard_planInfo__8GDeC",FreeItems:"SubscriptionCard_FreeItems__90_9r",ListItems:"SubscriptionCard_ListItems__96m8Z",Item:"SubscriptionCard_Item__nxYRB",UpgradePriceOverview:"SubscriptionCard_UpgradePriceOverview__bk8Dp",UpgradePrice:"SubscriptionCard_UpgradePrice__4_p9q",UpgradePriceBreakdown:"SubscriptionCard_UpgradePriceBreakdown__7jlwO",SwitchCta:"SubscriptionCard_SwitchCta__tvtpo"}},12014:function(e){e.exports={appSubscriptionBanner:"AppSubscriptionBanner_appSubscriptionBanner__6q99i",appSubscriptionBanner__title:"AppSubscriptionBanner_appSubscriptionBanner__title__RbI_O",appSubscriptionBanner__content:"AppSubscriptionBanner_appSubscriptionBanner__content__2w7g9",appSubscriptionBanner__footer:"AppSubscriptionBanner_appSubscriptionBanner__footer__pynvG",appSubscriptionBanner__appStoreLink:"AppSubscriptionBanner_appSubscriptionBanner__appStoreLink__P7QSW",appSubscriptionBanner__learnMoreLink:"AppSubscriptionBanner_appSubscriptionBanner__learnMoreLink__2ZEul"}},64604:function(e){e.exports={cancelContainer:"Subscription_cancelContainer__QttiI",cancelHeader:"Subscription_cancelHeader__QMs7U",cancellationText:"Subscription_cancellationText__rDMXt",cancellationTextInfo:"Subscription_cancellationTextInfo__7YMFo",subscriptionCardContainer:"Subscription_subscriptionCardContainer__qgx9l",UpdatePaymentDetails:"Subscription_UpdatePaymentDetails__Op6Lx",UpdatePaymentDetailsHeading:"Subscription_UpdatePaymentDetailsHeading__uTYId",UpdatePaymentDetailsText:"Subscription_UpdatePaymentDetailsText__t1Sbs",UpdatePaymentButton:"Subscription_UpdatePaymentButton__6glSo",LearnMore:"Subscription_LearnMore__xq8Tb",ReceiptSection:"Subscription_ReceiptSection__j7cYf",BillingSection:"Subscription_BillingSection__3G_hr",ReceiptsHeader:"Subscription_ReceiptsHeader__MxdQ_",BillingHeader:"Subscription_BillingHeader__6FWaK"}},82322:function(e){e.exports={container:"UnpaidInvoices_container__nVJX_",header:"UnpaidInvoices_header__8490t",invoices:"UnpaidInvoices_invoices__Yz_fk",invoiceItem:"UnpaidInvoices_invoiceItem__w7bE6",invoiceItemRow:"UnpaidInvoices_invoiceItemRow__IPxP3",invoiceItemHeader:"UnpaidInvoices_invoiceItemHeader__72DGj",invoiceItemLink:"UnpaidInvoices_invoiceItemLink__x6Pur",invoiceItemInfo:"UnpaidInvoices_invoiceItemInfo__Qva5H",invoiceItemPending:"UnpaidInvoices_invoiceItemPending__mUVUN"}}}]);
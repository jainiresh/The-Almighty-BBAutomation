(this.webpackJsonphelios=this.webpackJsonphelios||[]).push([[3],{442:function(e,t,n){"use strict";n.r(t);var c=n(9),a=n(15),r=n(27),i=n(236),u=n(94),o=n(46),s=n(19),d=n(2),b=n(3),l=n(1),h=n(11),p=n(82),f=n(41),j=n(23),O={setLoading:function(e){return function(t){t(Object(i.c)(e))}},setAuthenticated:function(e){var t=e.isAuthenticated,n=e.returnUrl,a=e.user;return function(e){a&&(Object(u.b)(a.sub),Object(o.b)({userId:a.sub})),Object(c.c)((function(){e(Object(i.a)(t)),e(Object(i.b)(a))})),n&&e(Object(r.d)(n))}}},w=Object(a.a)({isLoading:s.c}),k=Object(c.d)(w,O)((function(e){var t=e.children,n=e.setLoading,c=e.setAuthenticated,a=Object(p.a)().embeddedMobile;return Object(l.useEffect)((function(){function e(){return(e=Object(b.a)(Object(d.a)().mark((function e(){var t,r,i,u,o,s;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(f.a)("AuthenticationProvider: check"),n(!0),t=null,"true"!==a&&"true"!==Object(j.b)(j.a.embeddedMobile)){e.next=8;break}Object(j.c)(j.a.embeddedMobile,"true"),h.a.setActiveAuthClient("nativeAuthClient"),e.next=13;break;case 8:if("/auth/callback"!==window.location.pathname){e.next=13;break}return e.next=11,h.a.getActiveAuthClient().handleRedirectCallback();case 11:r=e.sent,t=r.appState;case 13:return e.prev=13,e.next=16,h.a.checkSession();case 16:return e.next=18,h.a.isAuthenticated();case 18:return u=e.sent,e.next=21,h.a.getIdTokenClaims();case 21:o=e.sent,c({isAuthenticated:u,returnUrl:null===(i=t)||void 0===i?void 0:i.redirectUrl,user:o}),e.next=32;break;case 25:if(e.prev=25,e.t0=e.catch(13),s=e.t0,!["/join/team","/link/new","/auth-flows/error","/mfa/recovery-codes","/reset_password/continue"].includes(window.location.pathname)){e.next=31;break}return n(!1),e.abrupt("return");case 31:["login_required","do_login"].includes(s.error)&&h.a.login({appState:{redirectUrl:"".concat(window.location.pathname).concat(window.location.search)}});case 32:n(!1);case 33:case"end":return e.stop()}}),e,null,[[13,25]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c,n,a]),t}));t.default=k}}]);
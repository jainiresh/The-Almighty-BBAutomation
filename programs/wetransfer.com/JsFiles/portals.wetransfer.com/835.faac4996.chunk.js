"use strict";(self.webpackChunkensemble_client=self.webpackChunkensemble_client||[]).push([[835],{77054:function(e,t,a){a.d(t,{W:function(){return s}});var r=a(90222),n=a(19055),i="IncompatibleDeviceHint_container__sip1-",o=a(80184);function s(e){var t=e.children;return(0,o.jsx)("div",{className:i,children:(0,o.jsx)(r.k,{icon:n.pH,size:"extra-large",space:"small",children:t})})}},88244:function(e,t,a){a.d(t,{s:function(){return x}});var r=a(4942),n=a(81694),i=a.n(n),o=a(11087),s=a(19055),l=a(19623),c=a(38684),d=a(18298),v=a(4766),p="PlaceholderResourceCard_container__uOSpj",_="PlaceholderResourceCard_icon__O2aJn",u="PlaceholderResourceCard_gridNotEmpty__2QZiS",m="PlaceholderResourceCard_showCursor__JePQn",w="PlaceholderResourceCard_emptyGridItem__wqAWl",h=a(80184);function x(e){var t=e.className,a=e.to,n=e.state,x=e.testId,f=e.onClick,C=e.children,j=e.showIcon,N=void 0===j||j,P=e.isEmptyGrid,I=e.isDisabled,R=void 0!==I&&I,b=e.restrictionType,T=e.analyticsEventName,g=(0,c.T)(),M=g.canUseFreeTier,y=g.canCreatePortals,E=g.canCreateReviews,k=g.restrictActionWithModal,D=(0,l.P)().getEntitlementPopover,A=(0,d.G)().isMinDesktopM,L=(0,v.i)().width,S="canCreateReviews"===b?"review":"portal",U="review"===S?E:y,O=(0,h.jsx)("div",{className:i()(p,t,!R&&m,P?w:u),"data-test-id":x,children:N?(0,h.jsx)(s.ZC,{size:"regular",className:_}):C});if(R)return O;var F=(0,h.jsxs)(o.rU,{to:a,state:n,onClick:function(e){return!M&&k({restrictionType:b,analyticsEventName:T,onAccessGiven:f,onAccessRefused:function(){return e.preventDefault()}})},className:i()(p,t,(0,r.Z)({},w,P)),"data-test-id":x,children:[N?(0,h.jsx)(s.ZC,{size:"regular",className:_}):null,C]});return M&&!U?D({target:O,type:S,position:A?"review"===S&&L>1277&&L<1293?["right","left"]:void 0:"portal"===S?["bottom"]:["top"]}):F}},49185:function(e,t,a){a.d(t,{e:function(){return r}});var r=function(e,t){var a=t?"#000000":"black",r=t?"#ffffff":"white";if(e){var n=e.replace("#","");return(299*parseInt(n.substr(0,2),16)+587*parseInt(n.substr(2,2),16)+114*parseInt(n.substr(4,2),16))/1e3>=128?a:r}return a}},20282:function(e,t,a){a.d(t,{c:function(){return u}});var r=a(68775),n=a(68825),i=a(11087),o=a(24566),s=a(19055),l=a(90222),c=a(19623),d=a(38684),v=a(8004),p="AddReviewButton_actionButton__vo+cB",_=a(80184),u=function(e){var t=e.portalId,a=e.dataTestId,u=(0,d.T)(),m=u.canUseFreeTier,w=u.canCreateReviews,h=u.restrictActionWithModal,x=(0,c.P)().getEntitlementPopover,f=(0,v.o)(),C=function(){f.trackCreateReviewTapped()},j="portal.add_review-hero"===a?(0,_.jsx)(l.k,{icon:s.ZC,space:"small",size:"regular",children:(0,_.jsx)("span",{children:(0,n.t)("portal.hero.create_review")})}):(0,n.t)("portal.hero.create_review"),N=(0,_.jsxs)(o.z,{as:i.rU,to:{pathname:"/reviews/create"},state:{portalId:t},"data-test-id":a,disabled:m&&!w,onClick:function(e){return h({restrictionType:"canCreateReviews",analyticsEventName:"create_new_review",onAccessGiven:C,onAccessRefused:function(){return e.preventDefault()}})},children:[(0,_.jsx)(r.T,{size:"medium"}),(0,n.t)("portal.add_review")]}),P=m&&!w?x({target:(0,_.jsx)("div",{children:N}),type:"review",position:["top","bottom"]}):N;return m?P:(0,_.jsx)(o.YP,{as:i.rU,to:{pathname:"/reviews/create"},state:{portalId:t},size:"small","data-test-id":a,className:p,onClick:function(e){return h({restrictionType:"canCreateReviews",analyticsEventName:"create_new_review",onAccessGiven:C,onAccessRefused:function(){return e.preventDefault()}})},children:j})}},98350:function(e,t,a){a.d(t,{A:function(){return Ve}});var r=a(4942),n=a(81694),i=a.n(n),o=a(72791),s=a(39230),l=a(57689),c=a(11087),d=a(89985),v=a(19055),p=a(90222),_=a(7879),u=a(2491),m=a(68899),w=a(14160),h=a(89827),x="LockedPreviewIcon_container__jqXAc",f="LockedPreviewIcon_iconContainer__H2els",C=a(80184);function j(){var e=(0,s.$G)().t;return(0,C.jsx)("div",{className:x,children:(0,C.jsx)(h.u,{content:e("review.passphrase_help"),positions:["top"],children:(0,C.jsx)("div",{className:f,children:(0,C.jsx)(v.jU,{size:"small"})})})})}var N=a(14011),P={container:"ReviewCard_container__oDaoi",trackerWrapper:"ReviewCard_trackerWrapper__WTaNG",previewWrapper:"ReviewCard_previewWrapper__ypIcN",draftLabel:"ReviewCard_draftLabel__5DHlM",previewOverride:"ReviewCard_previewOverride__xObYa",show:"ReviewCard_show__j3Ajh",previewOverride_pdfPreviews:"ReviewCard_previewOverride_pdfPreviews__DWWLN",tracker:"ReviewCard_tracker__HU1bO",previewCardDescription:"ReviewCard_previewCardDescription__w1Roa",avatar:"ReviewCard_avatar__s-37N",fadeInAnimation:"ReviewCard_fadeInAnimation__aRsXP",fadeOutAnimation:"ReviewCard_fadeOutAnimation__ic4+h",moveUp:"ReviewCard_moveUp__DVHw5",spin:"ReviewCard_spin__B8wCe",pulse:"ReviewCard_pulse__HyYYU",bgColorPulse:"ReviewCard_bgColorPulse__HFFYz"},I=a(15861),R=a(29439),b=a(64687),T=a.n(b),g=a(59434),M=a(26342),y=a(1793),E=a(38684),k=a(18298),D=a(27029),A=a(38347),L=a(28661),S=a(89032),U=a(93433),O=a(90645),F=a(29151),Z="MoveReviewModal_link__qEHDG",W="MoveReviewModal_notificationIcon__5W6bp",B="MoveReviewModal_notificationText__EEEFK",z=a(24566),G=a(99426),H=a(61910),V={container:"Dropdown_container__r9qU4",menuButton:"Dropdown_menuButton__iwjU4",chevron:"Dropdown_chevron__Kb1KA",optionWrapper:"Dropdown_optionWrapper__9lVSU",avatar:"Dropdown_avatar__wilpP",truncatedButton:"Dropdown_truncatedButton__jFvSO",truncatedListItem:"Dropdown_truncatedListItem__s+NjT"};function $(e){var t=e.selectedOption,a=e.onUpdateValue,r=e.options,n=void 0===r?[]:r;return(0,C.jsx)("div",{className:V.container,children:(0,C.jsxs)(H.v2,{children:[(0,C.jsxs)(H.j2,{disabled:!n.length,className:V.menuButton,"data-test-id":"MoveReviewModal.dropdown.selectButton",children:[(0,C.jsxs)("span",{className:V.optionWrapper,"data-test-id":"MoveReviewModal.dropdown.optionWrapper",children:[(0,C.jsx)(d.q,{size:"small",className:V.avatar,imageUrl:null===t||void 0===t?void 0:t.imageUrl}),(0,C.jsx)("span",{className:V.truncatedButton,title:t.title,children:t.title})]}),(0,C.jsx)(v.Wg,{className:V.chevron})]}),(0,C.jsx)(H.qy,{portal:!1,className:V.menuList,"data-test-id":"MoveReviewModal.dropdownList",children:(0,C.jsx)(H.sd,{className:V.menuItems,children:n.map((function(e,t){return(0,C.jsx)(H.sN,{"data-test-id":"MoveReviewModal.dropdown.item-".concat(t),onSelect:function(){return a(e)},className:V.menuItem,children:(0,C.jsxs)("span",{className:V.optionWrapper,children:[(0,C.jsx)(d.q,{size:"small",className:V.avatar,imageUrl:e.imageUrl}),(0,C.jsx)("span",{className:V.truncatedListItem,title:e.title,children:e.title})]})},t)}))})})]})})}var Y="SelectPortalModal_container__yty7h",q="SelectPortalModal_modal__4QwB+",K="SelectPortalModal_header__H2PQ-",Q="SelectPortalModal_subTitle__wtrpZ",J="SelectPortalModal_buttonContainer__Ldbzr",X="SelectPortalModal_button__jlqXJ",ee="SelectPortalModal_paragraph__ABAmM";function te(e){var t=e.portalOptions,a=e.targetPortal,r=e.setTargetPortal,n=e.currentPortalId,i=e.isFetchingReviewAnalyticsData,o=e.onMoveReview,l=e.onDismiss,c=(0,s.$G)().t,d=i||a.value===n||""===a.value&&null===n,v=t.filter((function(e){return e.value!==a.value}));return(0,C.jsx)("div",{className:Y,children:(0,C.jsxs)(G.u,{"data-test-id":"SelectPortalModal.modal",onDismiss:l,styleOverrides:q,ariaLabel:c("move_review_modal.move_review"),children:[(0,C.jsx)("div",{className:K,children:(0,C.jsx)("p",{className:Q,children:c("move_review_modal.move_review")})}),(0,C.jsx)("p",{className:ee,children:c("move_review_modal.portal_link_access")}),(0,C.jsx)("p",{className:ee,children:c("move_review_modal.choose_a_portal")}),(0,C.jsx)($,{onUpdateValue:function(e){return r(e)},options:v,selectedOption:a}),(0,C.jsxs)("span",{className:J,children:[(0,C.jsx)(z.LE,{className:X,"data-test-id":"SelectPortalModal.actionButton",appearance:"primary",type:"button",onClick:o,disabled:d,children:c("move_review_modal.move")}),(0,C.jsx)(z.LE,{className:X,"data-test-id":"SelectPortalModal.dismissButton",appearance:"secondary",type:"button",onClick:l,children:c("move_review_modal.cancel")})]})]})})}var ae="UpdatePassphraseModal_container__RYCaz",re="UpdatePassphraseModal_modal__HTAGm",ne="UpdatePassphraseModal_header__UHuII",ie="UpdatePassphraseModal_subTitle__0SBb8",oe="UpdatePassphraseModal_passphraseButtonContainer__udD6o",se="UpdatePassphraseModal_button__d8W82",le="UpdatePassphraseModal_paragraph__ZIMyk",ce="UpdatePassphraseModal_bold__66Nl9";function de(e){var t=e.onMoveReview,a=e.onDismiss,r=e.isSettingFirstPassphrase,n=e.targetPortalTitle,i=(0,s.$G)().t;return(0,C.jsx)("div",{className:ae,children:(0,C.jsxs)(G.u,{"data-test-id":"UpdatePassphraseModal.modal",onDismiss:a,styleOverrides:re,ariaLabel:i("move_review_modal.move_review"),children:[(0,C.jsx)("div",{className:ne,children:(0,C.jsx)("p",{className:ie,children:(0,C.jsx)(s.cC,{i18nKey:r?"move_review_modal.portal_passphrase_protected":"move_review_modal.passphrase_will_change",values:{portal:n},components:[(0,C.jsx)("span",{className:ce})]})})}),(0,C.jsx)("p",{className:le,children:(0,C.jsx)(s.cC,{i18nKey:r?"move_review_modal.protected_with_passphrase":"move_review_modal.protected_with_same_passphrase",values:{portal:n},components:[(0,C.jsx)("span",{className:ce})]})}),(0,C.jsxs)("span",{className:oe,children:[(0,C.jsx)(z.LE,{className:se,"data-test-id":"UpdatePassphraseModal.actionButton",appearance:"primary",type:"button",onClick:t,children:i("move_review_modal.move_anyway")}),(0,C.jsx)(z.LE,{className:se,"data-test-id":"UpdatePassphraseModal.dismissButton",appearance:"secondary",type:"button",onClick:a,children:i("move_review_modal.go_back")})]})]})})}var ve,pe,_e=a(1413),ue=a(30168),me=a(45984),we=a(45726),he=(0,me.Ps)(ve||(ve=(0,ue.Z)(["\n  mutation MoveReviewMutation($id: String!, $reviewCollectionId: String!) {\n    moveReview(id: $id, reviewCollectionId: $reviewCollectionId) {\n      review {\n        publicId\n        reviewCollectionId\n      }\n    }\n  }\n"])));var xe=(0,me.Ps)(pe||(pe=(0,ue.Z)(["\n  query PortalQueryByPortalId($portalId: String!) {\n    portal: reviewCollection(id: $portalId) {\n      publicId\n      teamId\n      title\n      passwordProtected\n      logoUrl\n    }\n  }\n"])));function fe(e){var t=e.review,a=e.onDismiss,n=(0,s.$G)().t,i=(0,D.Fn)(),d=i.fireErrorEvent,p=i.fireEvent,_=(0,o.useContext)(A.Z1),u=_.executeTrackMoveReview,m=_.isFetchingReviewAnalyticsData,w=null!==(0,l.bS)("/"),h=function(){var e,t=(0,we.Db)(he),a=(0,R.Z)(t,2),r=a[0],n=r.data,i=r.fetching,s=a[1],l=(0,o.useCallback)((function(e,t){return s(e,(0,_e.Z)((0,_e.Z)({},t),{},{additionalTypenames:["ReviewMeta","ReviewConnection"]}))}),[s]);return{review:null===n||void 0===n||null===(e=n.moveReview)||void 0===e?void 0:e.review,isUpdatingReview:i,moveReview:l}}(),x=h.moveReview,f=(0,o.useState)("SELECT_PORTAL"),j=(0,R.Z)(f,2),N=j[0],P=j[1],b=(0,F.J)().portalList,g=(0,o.useMemo)((function(){var e=b.map((function(e){var t=e.portal;return{value:t.publicId,title:t.title||n("portal.untitled"),imageUrl:t.logoUrl||je,passwordProtected:t.passwordProtected}})),t={value:"",title:n("move_review_modal.no_portal"),imageUrl:Ce,passwordProtected:!1};return[].concat((0,U.Z)(e),[t])}),[b,n]),y=g[0];if(null===t.reviewCollectionId)y=g[g.length-1];else{var E=g.find((function(e){return e.value===t.reviewCollectionId}));E&&(y=E)}var k=(0,o.useState)(y),L=(0,R.Z)(k,2),S=L[0],z=L[1],G=S.value?"/portals/".concat(S.value):"",H=(0,C.jsx)(c.rU,{className:Z,to:G}),V=function(e){var t,a=(0,we.aM)({query:xe,variables:{portalId:e},pause:!e}),r=(0,R.Z)(a,1)[0],n=r.data,i=r.fetching;return{portal:null!==(t=null===n||void 0===n?void 0:n.portal)&&void 0!==t?t:null,isFetchingPortal:i}}(S.value||t.reviewCollectionId).portal,$=!S.value?n(t.passwordProtected?"move_review_modal.review_moved_standalone_password":"move_review_modal.review_moved_standalone"):(0,C.jsx)(s.cC,{i18nKey:"move_review_modal.review_moved_portal",components:[H],values:{portal:S.title}});function Y(){return q.apply(this,arguments)}function q(){return(q=(0,I.Z)(T().mark((function e(){var i,o,s,l;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=S.passwordProtected,s=t.reviewCollectionId,!o||"SELECT_PORTAL"!==N){e.next=5;break}return P("UPDATE_PASSPHRASE"),e.abrupt("return");case 5:return e.next=7,x({id:t.publicId,reviewCollectionId:S.value});case 7:if((l=e.sent)&&!l.error){e.next=12;break}return(0,M.t6)({message:n("error.submit_review_error")}),d("error.submit_review_error"),e.abrupt("return");case 12:(0,M.t6)({message:(0,C.jsx)(O.k,{icon:v.U2,space:"small",size:"regular",className:W,children:(0,C.jsx)("span",{className:B,children:$})})}),p({eventName:D.B_.REVIEW_MOVED,optionalEventProperties:(i={},(0,r.Z)(i,D.r8.OLD_PARENT,"".concat(s?"Portal":"Null")),(0,r.Z)(i,D.r8.NEW_PARENT,"".concat(S.value?"Portal":"Null")),(0,r.Z)(i,D.r8.LOCATION,"".concat(w?"Home":"")),i),groups:(0,r.Z)({},D.YT.REVIEW,null===t||void 0===t?void 0:t.publicId)}),u({targetPortal:S.value?V:null,hasParent:!!S.value}),null===a||void 0===a||a();case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return"SELECT_PORTAL"===N?(0,C.jsx)(te,{currentPortalId:t.reviewCollectionId,targetPortal:S,setTargetPortal:z,isFetchingReviewAnalyticsData:m,onMoveReview:Y,portalOptions:g,onDismiss:a}):(0,C.jsx)(de,{targetPortalTitle:S.title,isSettingFirstPassphrase:!t.passwordProtected,onMoveReview:Y,onDismiss:function(){P("SELECT_PORTAL")}})}var Ce=a.p+"static/media/no_portal_placeholder.0949f5a40546b107f70cf0ed2dc81ec5.svg";var je=a.p+"static/media/no_logo_placeholder.13f32dff935ab191c93e9fd918b5740c.svg",Ne=a(64161),Pe=a(20405),Ie=a(65310),Re="ContextMenu_menuPopover__tEXwE",be="ContextMenu_menuItems__GBJ9g",Te="ContextMenu_menuItem__aottQ",ge="ContextMenu_menuDivider__JZ1hQ",Me="ContextMenu_menuButton__ZFqFB",ye="ContextMenu_expanded__LLJYC",Ee="ContextMenu_lockContainer__numKr",ke=function(e){var t=e.onDeleteItem,a=e.onShowInPortal,n=e.onCopy,o=e.onShare,l=e.onEditReview,c=e.onMoveReview,d=(0,s.$G)().t,p=(0,E.T)(),_=p.canUseFreeTier,u="OVER_LIMIT"===p.restrictionStatus;return(0,C.jsx)("div",{"data-test-id":"previewCard.contextMenu",children:(0,C.jsx)(Ie.v2,{children:function(e){var s=e.isExpanded;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Ie.j2,{as:z.hU,className:i()(Me,(0,r.Z)({},ye,s)),children:(0,C.jsx)(v.v2,{size:"regular"})}),s?(0,C.jsx)(Ie.YI,{className:Re,offsetYAbove:16,children:(0,C.jsxs)(Ie.sd,{className:be,children:[a&&(0,C.jsx)(Ie.sN,{onSelect:a,className:Te,children:d("portal.show_in_portal")}),c&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(Ie.sN,{onSelect:c,className:Te,disabled:u,children:[d("move_review_modal.move"),_&&u&&(0,C.jsx)("div",{className:Ee,children:(0,C.jsx)(Pe._,{disabled:!0,size:"small"})})]}),(0,C.jsx)("hr",{className:ge})]}),n&&(0,C.jsx)(Ie.sN,{onSelect:n,className:Te,children:d("share.action")}),o&&(0,C.jsx)(Ie.sN,{onSelect:o,className:Te,children:d("share.name")}),(0,C.jsx)("hr",{className:ge}),l&&(0,C.jsxs)(Ie.sN,{onSelect:l,disabled:u,className:Te,children:[d("review.edit_review"),_&&u&&(0,C.jsx)("div",{className:Ee,children:(0,C.jsx)(Pe._,{disabled:!0,size:"small"})})]}),t&&(0,C.jsx)(Ie.sN,{onSelect:t,className:Te,"data-test-id":"reviewItem.delete",children:d("reviewItem.delete")})]})}):null]})}})})},De={reviewTitleContainer:"ReviewCardFooter_reviewTitleContainer__sCPpi",reviewTitle:"ReviewCardFooter_reviewTitle__OzMHC",contentContainer:"ReviewCardFooter_contentContainer__AUB3p",textContent:"ReviewCardFooter_textContent__AU098",contextMenu:"ReviewCardFooter_contextMenu__OsP48",portalName:"ReviewCardFooter_portalName__emiBy",portalLink:"ReviewCardFooter_portalLink__kOMK6",portalNameTooltip:"ReviewCardFooter_portalNameTooltip__x494t",mobile:"ReviewCardFooter_mobile__JiL2y"},Ae=function(e){var t=e.title,a=e.classNames,n=e.review,d=e.portalTitle,p=e.reviewItems,u=e.reviewPath,m=e.enableContextMenu,w=e.enableShowInPortal,x=e.isUserOwner,f=e.isPortalLocked,j=n.reviewCollectionId,N=n.publicId,P=(0,s.$G)().t,b=(0,D.Fn)(),U=b.fireEvent,O=b.fireErrorEvent,F=(0,l.TH)(),Z=(0,l.s0)(),W=null!==(0,l.bS)("/portals/:portalId"),B=(0,g.v9)(Ne.v9),z=(0,o.useState)(!1),G=(0,R.Z)(z,2),H=G[0],V=G[1],$=(0,o.useState)(!1),Y=(0,R.Z)($,2),q=Y[0],K=Y[1],Q=(0,o.useState)(!1),J=(0,R.Z)(Q,2),X=J[0],ee=J[1],te=(0,k.G)().isMinTablet,ae=(0,E.T)().canUseFreeTier,re=D.sR.HOME;F.pathname.includes("portals")&&(re=D.sR.PORTAL),F.pathname.includes("reviews")&&(re=D.sR.REVIEW);var ne=(0,o.useMemo)((function(){return(0,_.yW)(n.totalSize)}),[n.totalSize]),ie=(0,E.T)().restrictActionWithModal,oe=function(){return V(!1)},se=j?"/portals/".concat(j):"";function le(){return(le=(0,I.Z)(T().mark((function e(){var t,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,D.BH)({tier:B}),U({eventName:D.B_.REVIEW_LINK_COPIED,optionalEventProperties:(0,r.Z)({},D.r8.LOCATION,re),groups:(0,r.Z)({},D.YT.REVIEW,null===n||void 0===n?void 0:n.publicId)}),e.prev=2,t="".concat(window.location.origin),a=t+u,e.next=7,navigator.clipboard.writeText(a);case 7:(0,M.t6)({message:P("share.success"),type:"info"}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),(0,M.t6)({message:P("share.failure"),type:"error"}),O("share.failure");case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}var ce=j&&N?function(){return Z(se,{state:{fromPreviewCard:!0,fromPortalPage:W}})}:void 0,de=(0,C.jsx)(C.Fragment,{children:te&&m&&(0,C.jsx)("span",{className:De.contextMenu,children:(0,C.jsx)(ke,{onShowInPortal:w?ce:void 0,onCopy:function(){return le.apply(this,arguments)},onShare:function(){K(!0)},onEditReview:function(){ie({restrictionType:"canUpdateReviews",analyticsEventName:"update_review",onAccessGiven:function(){return Z("".concat(u,"/edit"),{state:{fromPreviewCard:!0,fromPortalPage:W}})}})},onDeleteItem:function(){V(!0)},onMoveReview:function(){ie({restrictionType:"canMoveReviews",analyticsEventName:"move_review",onAccessGiven:function(){ee(!0)}})}})})}),ve=(0,C.jsx)("div",{className:De.contentContainer,children:(0,C.jsxs)("div",{className:De.textContent,children:[j&&d&&(0,C.jsxs)(C.Fragment,{children:[!ae&&P("in"),te?(0,C.jsx)(c.rU,{to:"portals/".concat(j),className:i()(De.portalName,De.portalLink),children:(0,C.jsx)(h.u,{isEnabled:!0,"data-test-id":"reviewListItem.portalName.tooltip",positions:["top"],content:P("portal.show_in_portal"),targetClassName:De.portalNameTooltip,children:d})}):(0,C.jsx)("div",{className:i()(De.portalName,De.portalNameTooltip,De.mobile),"data-test-id":"reviewListItem.portalName",children:d}),(0,C.jsx)("span",{children:"\u30fb"})]}),(0,C.jsx)("span",{children:P("previewCard.updated",{date:n.updatedAt?(0,y.$r)(new Date(n.updatedAt)):""})}),ae&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{children:"\xa0\xa0\u2022\xa0\xa0"}),(0,C.jsx)("span",{children:ne})]}),!ae&&de]})}),pe=(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("div",{className:De.reviewTitleContainer,children:[!f&&n.passwordProtected&&x&&(0,C.jsx)(h.u,{content:P("review.passphrase_help"),positions:["right"],children:(0,C.jsx)(v.Z0,{className:De.reviewPassphraseIcon,"data-test-id":"reviewCard.icon.passphrase"})}),(0,C.jsx)("p",{className:De.reviewTitle,title:t,children:t}),ae&&de]})}),_e=ae?(0,C.jsxs)(C.Fragment,{children:[pe,ve]}):(0,C.jsxs)(C.Fragment,{children:[ve,pe]});return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:i()(De.container,a),"data-test-id":"previewCard.footer.".concat(t),children:[H&&N&&(0,C.jsx)(L.n,{onConfirm:function(){return oe()},onDismiss:oe,title:t||P("review.untitled"),reviewId:N,portalId:j,forceNavigation:!0}),_e]}),q&&(0,C.jsx)(S.G,{portalId:j,reviewId:N,onDismiss:function(){K(!1)},reviewItems:p,reviewActionType:n.actionType}),X&&(0,C.jsx)(A.oC,{reviewId:N,children:(0,C.jsx)(fe,{onDismiss:function(){ee(!1)},review:n})})]})},Le=a(66893),Se="Tracker_container__-dim1",Ue="Tracker_container__cta__QdlhV",Oe="Tracker_container__icon__yMfnH",Fe="Tracker_container__feedbackWrapper__nc7Uc",Ze="Tracker_container__dueDates__6PRn5",We="Tracker_container__dueDates_overdue__6dpj1",Be="Tracker_trackerStatus__KYLQ7",ze=function(e){switch(e.actionType){case"APPROVE":return(0,C.jsx)(v.EC,{size:"large"});case"FAVORITE":return(0,C.jsx)(v.OE,{size:"large"});case"DOWNLOAD":case"VIEW":case null:return(0,C.jsx)(v.cV,{size:"large"});default:return null}},Ge=function(e){var t=e.actionType,a=e.totalNumberOfComments,r=e.totalApprovalCount,n=e.totalFavoritedCount,i=(0,s.$G)().t,o=null;switch(t){case"APPROVE":o=a?a&&r?"".concat(i("tracker.item_approved",{count:r}),", ").concat(i("tracker.item_with_comment",{count:a})):i("tracker.item_approved_with_comment_zero"):i("tracker.item_approved",{count:r});break;case"FAVORITE":o=a?a&&n?"".concat(i("tracker.item_favorited",{count:n}),", ").concat(i("tracker.item_with_comment",{count:a})):i("tracker.item_favorited_with_comment_zero"):i("tracker.item_favorited",{count:n});break;default:o=i("tracker.item_with_comment",{count:a})}return(0,C.jsx)("p",{className:Be,children:o})},He=function(e){var t=e.className,a=e.actionType,n=e.totalNumberOfComments,o=e.totalApprovalCount,d=e.totalFavoritedCount,v=e.reviewDueDate,p=(e.portalId,e.reviewId),_=(0,s.$G)().t,u=(0,l.TH)().pathname,m=null!==(0,l.bS)("/portals/:portalId"),w=(0,D.Fn)().fireEvent,h=(0,y.Hb)(v||""),x="",f=i()(t,Se),j=i()(Ze,(0,r.Z)({},We,!h)),N="'".concat(_("report.header.dueBy"),"' MMM d', 'yyyy");if(v)if(h){x=(0,y.gU)(new Date(v),N).returnedDateFormat}else{var P=(0,y.Tr)((new Date).toDateString(),v);x=_("tracker.days_overdue",{count:0===P?1:P})}var I="".concat((0,Le.o)({reviewId:p}),"/report");return(0,C.jsxs)("div",{className:f,"data-test-id":"previewCard.tracker",children:[(0,C.jsx)("div",{className:Oe,children:(0,C.jsx)(ze,{actionType:a})}),(0,C.jsxs)("div",{className:Fe,children:[(0,C.jsx)(Ge,{actionType:a,totalApprovalCount:o,totalFavoritedCount:d,totalNumberOfComments:n}),v&&(0,C.jsx)("p",{className:j,children:x})]}),(0,C.jsx)(z.LE,{appearance:"neutral",size:"extra-small",className:Ue,as:c.rU,to:I,state:{fromPreviewCard:!0,fromPortalPage:m,viewReport:!0},"data-test-id":"previewCard.tracker.viewReport",onClick:function(){var e="/"===u?"home":"portal";w({eventName:D.B_.REPORT_OPENED,optionalEventProperties:(0,r.Z)({},D.r8.LOCATION,e),groups:(0,r.Z)({},D.YT.REVIEW,p)})},children:_("review.info_box.viewReport")})]})},Ve=function(e){var t,a,n,h,x,f=e.reviewItems,I=e.footerTitle,R=e.enableTracker,b=void 0!==R&&R,T=e.portalTitle,g=e.review,M=e.reviewPath,y=e.enableContextMenu,E=e.enableShowInPortal,k=e.isLoading,D=void 0!==k&&k,A=e.isUserOwner,L=void 0===A||A,S=e.isPortalLocked,U=void 0!==S&&S,O=e.onPreviewLoad,F=e.showLoader,Z=(0,s.$G)().t,W=f[0],B=(0,_.Tn)(W).isPdf,z=g.reviewCollectionId,G=g.publicId,H=(0,l.TH)(),V=null!==(0,l.bS)("/portals/:portalId"),$=(0,o.useContext)(u.H).identity,Y=i()(P.previewOverride,(t={},(0,r.Z)(t,P.pdfPreviews,B),(0,r.Z)(t,P.show,!D),t)),q=null===(a=g.reviewCollection)||void 0===a?void 0:a.logoUrl,K=!L&&!U&&!(0,m.BV)(g.publicId)&&g.passwordProtected;return(0,C.jsxs)("div",{className:P.container,children:[(0,C.jsxs)("div",{className:P.previewWrapper,children:[(0,C.jsxs)(c.rU,{to:M,state:{fromPreviewCard:!0,fromPortalPage:V,previousPathname:H.pathname},"data-test-id":"previewCard.".concat(I),children:[D?(0,C.jsx)(N.l,{isLoading:D}):null,(0,C.jsx)(w.t,{styleOverrides:Y,reviewItem:W,shouldDisplayPreviewPadding:!1,onLoad:O,showLoader:F,isLoading:D,isLocked:K,viewerIdentity:$}),K&&(0,C.jsx)(j,{})]}),b&&(0,C.jsx)("div",{className:P.trackerWrapper,children:(0,C.jsx)(He,{className:P.tracker,totalApprovalCount:(null===(n=g.stats)||void 0===n?void 0:n.totalApprovedCount)||0,totalFavoritedCount:(null===(h=g.stats)||void 0===h?void 0:h.totalFavoritedCount)||0,totalNumberOfComments:(null===(x=g.stats)||void 0===x?void 0:x.totalCommentCount)||0,actionType:g.actionType,reviewDueDate:g.dueDate||void 0,portalId:z,reviewId:G})}),"DRAFT"===g.status&&(0,C.jsx)("div",{className:P.draftLabel,children:(0,C.jsx)(p.k,{icon:v.z,space:"small","data-test-id":"reviewCard.draftLabel",children:Z("draft")})}),q&&(0,C.jsx)(d.q,{className:P.avatar,size:"extra-small",imageUrl:q})]}),(0,C.jsx)(Ae,{classNames:P.previewCardDescription,title:I,portalTitle:T,review:g,reviewItems:f,reviewPath:M,enableContextMenu:y,enableShowInPortal:E,isUserOwner:L,isPortalLocked:U})]})}}}]);
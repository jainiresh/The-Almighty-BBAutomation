"use strict";(self.webpackChunkensemble_client=self.webpackChunkensemble_client||[]).push([[668],{80753:function(e,t,n){n.d(t,{h:function(){return i}});var r=n(8990),a=(n(76474),n(80184));function i(){return(0,a.jsx)(r.hM,{currentAppId:r.QK.WeTransfer,openOnClick:!0,children:(0,a.jsx)(r.V4,{})})}},31323:function(e,t,n){n.d(t,{V:function(){return p}});var r=n(29439),a=n(81694),i=n.n(a),o=n(72791),s=n(5107),c=n(19055),l="Ribbon_container__xD9Wk",u="Ribbon_arrowButton__EbrfN",d="Ribbon_arrowLeft__UHVxP",v="Ribbon_arrowRight__znr9X",m="Ribbon_itemsContainer__0NOsK",f=n(80184),p=function(e){var t=e.children,n=e.itemsContainerClassName,a=e.lastChildMargin,p=void 0===a?0:a,_=e.stepSize,h=void 0===_?1:_,g=(0,o.useState)(0),w=(0,r.Z)(g,2),x=w[0],b=w[1],C=(0,o.useState)(0),j=(0,r.Z)(C,2),y=j[0],N=j[1],T=(0,o.useState)(0),I=(0,r.Z)(T,2),L=I[0],R=I[1],k=(0,o.useRef)(null),P=(0,s.Z)(k);(0,o.useEffect)((function(){k.current&&(R(k.current.scrollWidth),N(k.current.clientWidth))}),[k.current]);var M=(0,o.useCallback)((function(e){if(k.current&&k.current.children[0]&&!P){var t=function(e){var t=getComputedStyle(e),n=e.parentElement&&getComputedStyle(e.parentElement),r=parseInt((null===n||void 0===n?void 0:n.columnGap)||"")||0,a=parseInt(t.marginLeft)+parseInt(t.marginRight)+r,i=parseInt(t.borderLeftWidth)+parseInt(t.borderRightWidth);return parseFloat(t.width)+a+i}(k.current.children[0]),n=t*h;if("left"===e){var r=x-n<L?x-n:x-t;return k.current.scrollTo({left:r,behavior:"smooth"})}var a=x+n<L?x+n:x+t;k.current.scrollTo({left:a,behavior:"smooth"})}}),[x,L,h,P]),Z=(0,o.useCallback)((function(){M("left")}),[M]),A=(0,o.useCallback)((function(){M("right")}),[M]),E=!(x+y===L||x+y>L-p)&&(x>0||L>y),S=0!==x&&x>0;return(0,f.jsxs)("div",{className:l,"data-test-id":"ribbon.container",children:[S&&(0,f.jsx)("button",{className:i()(u,d),onClick:Z,"data-test-id":"ribbon.navigation.left",children:(0,f.jsx)(c.Ub,{size:"extra-large"})}),(0,f.jsx)("div",{ref:k,onScroll:function(e){if(e.target){var t=e.target;b(t.scrollLeft),N(t.clientWidth),R(t.scrollWidth)}},className:i()(m,n),children:t}),E&&(0,f.jsx)("button",{className:i()(u,v),onClick:A,"data-test-id":"ribbon.navigation.right",children:(0,f.jsx)(c.FM,{size:"extra-large"})})]})}},98405:function(e,t,n){n.r(t),n.d(t,{default:function(){return en}});var r=n(4942),a=n(15861),i=n(29439),o=n(64687),s=n.n(o),c=n(81694),l=n.n(c),u=n(72791),d=n(39230),v=n(59434),m=n(57689),f=n(8624);function p(e){if(!e)return null;if("BODY"===e.tagName)return e;if("IFRAME"===e.tagName){var t=e.contentDocument;return t?t.body:null}return e.offsetParent?p(e.offsetParent):null}function _(e){var t=e||window.event;return t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1)}var h=f.jU&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),g=new Map,w="object"===typeof document?document:void 0,x=!1,b=w?function(e,t){void 0===e&&(e=!0);var n=(0,u.useRef)(w.body);t=t||n;var r=function(e){var t=g.get(e);t&&(1===t.counter?(g.delete(e),h?(e.ontouchmove=null,x&&((0,f.S1)(document,"touchmove",_),x=!1)):e.style.overflow=t.initialOverflow):g.set(e,{counter:t.counter-1,initialOverflow:t.initialOverflow}))};(0,u.useEffect)((function(){var n=p(t.current);n&&(e?function(e){var t=g.get(e);t?g.set(e,{counter:t.counter+1,initialOverflow:t.initialOverflow}):(g.set(e,{counter:1,initialOverflow:e.style.overflow}),h?x||((0,f.on)(document,"touchmove",_,{passive:!1}),x=!0):e.style.overflow="hidden")}(n):r(n))}),[e,t.current]),(0,u.useEffect)((function(){var e=p(t.current);if(e)return function(){r(e)}}),[])}:function(e,t){void 0===e&&(e=!0)},C=n(54715),j=n(80184),y=(0,u.lazy)((function(){return n.e(143).then(n.bind(n,33927))})),N=(0,u.lazy)((function(){return n.e(648).then(n.bind(n,82018))})),T=function(e){var t=e.type,n=e.onDismiss;return(0,j.jsxs)(u.Suspense,{children:["portals"===t&&(0,j.jsx)(N,{onDismiss:n}),"reviews"===t&&(0,j.jsx)(y,{onDismiss:n})]})},I=n(38684),L=n(8004),R=n(18298),k=n(29151),P=function(e){try{return JSON.parse(e)}catch(t){return null}},M=n(75737),Z=n(39047),A="undefined"!==typeof n(1426)&&!1,E=n(15751),S=n(23246),U=function(e){var t="".concat(e,"Storage");return M.Z&&!(0,Z.Z)(t)&&(0,S.Z)("".concat(t," is not supported")),function(e,n){if(!M.Z)return A&&(0,S.Z)("Please be aware that ".concat(t," could not be available during SSR")),[JSON.stringify(n),E.Z];var r=window[t],a=(0,u.useCallback)((function(t){try{r.setItem(e,t)}catch(n){}}),[r,e]),o=(0,u.useState)((function(){var t,i;try{i=null!==(t=r.getItem(e))&&void 0!==t?t:JSON.stringify(n)}catch(o){i=JSON.stringify(n)}return a(i),P(i)})),s=(0,i.Z)(o,2),c=s[0],l=s[1];return[c,(0,u.useCallback)((function(e){l((function(t){var n=e instanceof Function?e(t):e;return a(JSON.stringify(n)),n}))}),[a])]}}("local"),D=n(76753),F=n(64161),H=n(85885),q="product-intro-modal-reviews-show-timestamp",B="product-intro-modal-portals-show-timestamp";var z,O,W=n(15263),G=n(2491),$=n(7597),X=n(22327),J=n(1413),V=n(30168),K=n(45984),Q=n(45726),Y=n(9911),ee=n(28447),te=n(87843),ne=n(28611),re=(0,K.Ps)(z||(z=(0,V.Z)(["\n  query ReviewsPreviewsQuery(\n    $first: Int\n    $after: String\n    $previewWidth: Int\n    $previewHeight: Int\n  ) {\n    reviews(orderBy: UPDATED_AT, first: $first, after: $after) {\n      nodes {\n        publicId\n        items(first: 1) {\n          nodes {\n            isProcessingComplete\n            publicId\n            stormId\n            order\n            name\n            size\n            itemType\n            reviewId\n            previewStatus\n            preview(\n              previewHeight: $previewHeight\n              previewWidth: $previewWidth\n            ) {\n              image {\n                url\n                format\n              }\n              videoStatic {\n                url\n                format\n                metadata {\n                  framerate\n                }\n              }\n              videoStream {\n                url\n                format\n                metadata {\n                  framerate\n                }\n              }\n              audio {\n                url\n                format\n              }\n              audioVisualization {\n                imageWaveform\n                textWaveform\n              }\n            }\n          }\n        }\n      }\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n    }\n  }\n"])));function ae(e){var t,n=e.first,r=e.after,a=e.previewWidth,o=void 0===a?480:a,s=e.previewHeight,c=void 0===s?640:s,l=e.pause,d=(0,u.useMemo)((function(){return{additionalTypenames:["Review"]}}),[]),v=(0,Q.aM)({query:re,variables:{first:n,after:r,previewWidth:o,previewHeight:c},context:d,pause:l}),m=(0,i.Z)(v,1)[0],f=m.data,p=m.fetching,_=(0,Y.T)();return(0,u.useEffect)((function(){var e,t,n,r,a;if(f){var i=null!==(e=null===(t=f.reviews)||void 0===t||null===(n=t.nodes)||void 0===n?void 0:n.flatMap((function(e){return e.items.nodes.map((function(e){return e}))})))&&void 0!==e?e:[],o=i.map((function(e){var t=e.comments,n=e.publicId,r=e.reviewId;return(0,J.Z)((0,J.Z)({},t),{},{publicId:n,reviewId:r})}));o.length>0&&_((0,ee.h0)(o)),_((0,te.XL)(i)),null===(r=f.reviews)||void 0===r||null===(a=r.nodes)||void 0===a||a.forEach((function(e){_((0,ne.E)(e.publicId))}))}}),[f,_]),{pageInfo:null===f||void 0===f||null===(t=f.reviews)||void 0===t?void 0:t.pageInfo,isFetchingReviewsPreviews:p}}var ie=(0,K.Ps)(O||(O=(0,V.Z)(["\n  query ReviewsQuery {\n    reviews(orderBy: UPDATED_AT) {\n      nodes {\n        publicId\n        title\n        actionType\n        reviewCollectionId\n        updatedAt\n        dueDate\n        actionRequestType\n        commentsEnabled\n        teamId\n        description\n        downloadEnabled\n        itemCount\n        layoutType\n        totalSize\n        password\n        passwordProtected\n        createdAt\n        status\n        actionRequests {\n          email\n          engagementType\n          completedAt\n          publicId\n          favoritedItems {\n            publicId\n          }\n          approvedItems {\n            publicId\n          }\n        }\n        stats {\n          totalCommentCount\n          totalApprovedCount\n          totalFavoritedCount\n        }\n        reviewCollection {\n          title\n          logoUrl\n          passwordProtected\n        }\n      }\n    }\n  }\n"])));var oe=n(77054),se=n(66952),ce="Footer_container__BtNmQ",le="Footer_brandContainer__ciw+d",ue="Footer_linksContainer__W6q0V",de="Footer_dot__f5hRq",ve="Footer_linkElement__hm+p9";function me(){var e=(0,d.$G)().t,t=[{href:"https://wetransfer.zendesk.com/hc/en-us/categories/8596653844116-Portals",textContent:e("portalList.footer.help_center")},{href:(0,se.hy)(),textContent:e("portalList.footer.account")},{href:"https://wetransfer.com/legal/terms",textContent:e("portalList.footer.terms_of_service")}];return(0,j.jsxs)("footer",{className:ce,children:[(0,j.jsx)("div",{className:le,children:e("portalList.footer.branding")}),(0,j.jsx)("div",{className:ue,children:t.map((function(e){var t=e.href,n=e.textContent;return(0,j.jsxs)("div",{className:ve,children:[(0,j.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:n}),(0,j.jsx)("span",{className:de,children:"\xb7"})]},n)}))})]})}var fe,pe=n(80753),_e=n(24566),he=n(19055),ge=n(28301);function we(e){try{var t=new URL(e);return ge.D.isDev||t.host.match(/(wetransfer(alpha|beta)?.(net|com)$)|(pasteapp.com$)/)}catch(n){return!1}}var xe=(0,K.Ps)(fe||(fe=(0,V.Z)(["\n  query UserQuery {\n    user {\n      profilePicture {\n        thumbnailUrl\n      }\n    }\n  }\n"])));var be=n(27029),Ce=n(96855),je=n(98325),ye=n(67300),Ne=n(76841),Te=n(763),Ie=n(11087),Le=n(9530),Re=function(e,t){void 0===e&&(e=1/0),void 0===t&&(t=1/0);var n=(0,Le.Z)({width:f.jU?window.innerWidth:e,height:f.jU?window.innerHeight:t}),r=n[0],a=n[1];return(0,u.useEffect)((function(){if(f.jU){var e=function(){a({width:window.innerWidth,height:window.innerHeight})};return(0,f.on)(window,"resize",e),function(){(0,f.S1)(window,"resize",e)}}}),[]),r},ke=n(89985),Pe=n(65310),Me={container:"ProgressBar_container__QqegR",bar:"ProgressBar_bar__iBZh-",default:"ProgressBar_default__tkDHw",warn:"ProgressBar_warn__RZRu4",error:"ProgressBar_error__XGF2h"};function Ze(e){var t=e.percentage,n=e.appearance,r=void 0===n?"default":n;return(0,j.jsx)("div",{className:Me.container,children:(0,j.jsx)("div",{className:l()(Me.bar,Me[r]),style:{width:"".concat(t,"%")}})})}var Ae=n(7879),Ee="AccountMenu_button__0pXI1",Se="AccountMenu_loadingIndicator__Gv2c7",Ue="AccountMenu_menuPopover__3HBAD",De="AccountMenu_email__Sh87+",Fe="AccountMenu_menuItems__HHo40",He="AccountMenu_link__Knup9",qe="AccountMenu_teamContainer__TOS8C",Be="AccountMenu_progressContainer__pzrBO",ze="AccountMenu_progressTitle__i7IHs",Oe="AccountMenu_progressBarContainer__Wct8m",We="AccountMenu_storage__cvuGq",Ge="AccountMenu_team__TUAq8",$e="AccountMenu_teamLogo__XJFWk",Xe="AccountMenu_teamName__miEjJ",Je="AccountMenu_teamInfo__lGATy",Ve="AccountMenu_dot__ZXqK6",Ke="AccountMenu_separator__rZRAq",Qe="AccountMenu_check__FAQqR";function Ye(e){var t=e.email,n=e.userThumbnailAvatarUrl,r=e.teams,a=e.currentTeam,i=e.isLoading,o=e.onTeamSelect,s=e.onLogOutClick,c=(0,d.$G)().t,l=(0,v.v9)(H.dm),m=(0,Ne.Z)(),f=Re().height,p=(0,u.useRef)(null),_=(0,R.G)().isMinTablet,h=(0,I.T)(),g=h.canUseAccountMenuChanges,w=h.canUseFreeTier,x=h.isFreeUser,b=h.storage,C=h.restrictionStatus;m((function(){var e,t;null!==(e=p.current)&&void 0!==e&&e.getAttribute("aria-expanded")&&(null===(t=p.current)||void 0===t||t.focus())}));var y=a&&a.membersCount>1||r.length>1,N=y?null===a||void 0===a?void 0:a.logo:n,T=(0,u.useMemo)((function(){return!_&&f<400?"".concat(f-("OVER_LIMIT"===C?156:100),"px"):void 0}),[_,f,C]),L=(0,u.useMemo)((function(){var e=1e9,t={used:"0 GB",quota:"3 GB",percentage:0,appearance:"default"};if(!b||null===b||void 0===b||!b.quota||0===b.used)return t;var n=(0,Ae.yW)(b.used);return t=(0,J.Z)((0,J.Z)({},t),{},{used:n,quota:"".concat(b.quota/e," GB"),percentage:b.used/b.quota*100}),(b.used===b.quota||b.quota-b.used<=e)&&(t=(0,J.Z)((0,J.Z)({},t),{},{appearance:"warn"})),b.used>b.quota&&(t=(0,J.Z)((0,J.Z)({},t),{},{appearance:"error",percentage:100})),b.used/1e6<500&&(t=(0,J.Z)((0,J.Z)({},t),{},{percentage:2})),t}),[b]),k=[{href:(0,se.hy)(),textContent:c("portalList.account_menu.account"),isLink:!0},{href:(0,se.Em)(),textContent:c("portalList.account_menu.manage_workspace"),isLink:!0},{href:(0,se.Cp)("?trk=portals_btn_usermenu"),textContent:c("portalList.account_menu.wetransfer_free"),isLink:!1},{href:"https://wetransfer.zendesk.com/hc/en-us/categories/8596653844116-Portals",textContent:c("portalList.account_menu.help_center"),isLink:!0},{href:"https://wetransfer.com/products",textContent:c("portalList.account_menu.products"),isLink:!0},{href:"https://wetransfer.com/company",textContent:c("portalList.account_menu.company"),isLink:!0}],P=function(e){return l===e.creatorId?c("portalList.account_menu.workspace.your_workspace"):(0,Te.capitalize)(c("portalList.account_menu.workspace.default_workspace",{name:e.name}))};return(0,j.jsx)(Pe.v2,{children:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Pe.j2,{className:Ee,"data-test-id":"portalList.account_menu.button",ref:p,children:i?(0,j.jsx)("div",{className:Se,"data-test-id":"accountMenu.loadingIndicator"}):(0,j.jsx)(ke.q,{size:"small",imageUrl:N})}),(0,j.jsxs)(Pe.YI,{className:Ue,style:{height:T},children:[(0,j.jsx)("p",{className:De,title:t,children:t}),(0,j.jsxs)(Pe.sd,{className:Fe,children:[y&&(0,j.jsxs)(j.Fragment,{children:[r.map((function(e){return(0,j.jsxs)(Pe.sN,{className:qe,onSelect:function(){return null===o||void 0===o?void 0:o(e.id,e.creatorId)},children:[(0,j.jsxs)("div",{className:Ge,children:[(0,j.jsx)("img",{src:e.logo,alt:c("portalList.account_menu.team_logo_alt",{name:e.name}),className:$e}),(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:Xe,title:e.name,children:e.defaultName?P(e):e.name}),(0,j.jsx)("div",{className:Je,children:e.membersCount>1?(0,j.jsx)(j.Fragment,{children:g?c("portalList.account_menu.members_count",{count:e.membersCount}):[c("portalList.account_menu.team"),(0,j.jsx)("span",{className:Ve,children:"\xb7"},e.name),c("portalList.account_menu.members_count",{count:e.membersCount})]}):(0,j.jsx)(j.Fragment,{children:c("portalList.account_menu.just_you")})})]})]}),(null===a||void 0===a?void 0:a.id)===e.id&&r.length>1&&(0,j.jsx)(he.Jr,{className:Qe,size:"large"})]},e.id)})),(0,j.jsx)("hr",{className:Ke})]}),k.map((function(e,t){return(0,j.jsx)("div",{children:e.isLink?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Pe.Uk,{href:e.href,target:"_blank",rel:"noopener noreferrer",className:He,children:e.textContent}),1===t&&(0,j.jsx)("hr",{className:Ke})]}):w&&x&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:Be,children:[(0,j.jsxs)("div",{className:ze,children:[e.textContent,(0,j.jsx)(_e.Yz,{as:Ie.rU,buttonStyle:"badge",size:"small",to:e.href,target:"_blank",rel:"noopener noreferrer",analyticsLocation:"User Menu"})]}),(0,j.jsxs)("div",{className:Oe,children:[(0,j.jsx)("div",{className:We,children:c("portalList.account_menu.storage",{used:L.used,quota:L.quota})}),(0,j.jsx)(Ze,{percentage:L.percentage,appearance:L.appearance})]})]}),(0,j.jsx)("hr",{className:Ke})]})},e.textContent)})),(0,j.jsx)(Pe.sN,{onSelect:s,className:He,"data-test-id":"portalList.account_menu.log_out",children:c("portalList.account_menu.log_out")})]})]})]})})}var et=n(20282),tt=n(21105),nt=n(52662),rt=n(21673),at="Header_headerActionsContainer__uo4MA";function it(){var e=(0,be.Fn)(),t=e.fireEvent,n=e.fireUserSet,a=(0,I.T)(),o=a.canUseFreeTier,s=a.portals,c=a.reviews,l=a.storage,d=(0,v.v9)(H.HF),f=(0,v.v9)(nt.Gx),p=(0,v.v9)(nt.BX),_=!(null!==s&&void 0!==s&&s.quota)&&!(null!==c&&void 0!==c&&c.quota)&&!(null!==l&&void 0!==l&&l.quota),h=(0,R.G)().isMinTablet,g=(0,v.v9)(rt.q),w=function(){var e=(0,m.s0)(),t=(0,m.TH)();return(0,u.useEffect)((function(){var n=new URLSearchParams(t.search).get("returnUrl");n&&we(n)&&(sessionStorage.setItem("returnURL",n),e("/",{replace:!0}))}),[t.search,e]),{returnURL:(0,u.useCallback)((function(){var e=sessionStorage.getItem("returnURL");return e&&we(e)?e:""}),[])()}}().returnURL,x=(0,L.o)(),b=function(){var e,t,n=(0,Q.aM)({query:xe}),r=(0,i.Z)(n,1)[0],a=r.data,o=r.fetching;return{thumbnailUrl:null===a||void 0===a||null===(e=a.user)||void 0===e||null===(t=e.profilePicture)||void 0===t?void 0:t.thumbnailUrl,isFetchingUser:o}}(),C=b.thumbnailUrl,y=b.isFetchingUser;return(0,j.jsxs)(tt.M,{yThreshold:32,children:[!g&&(0,j.jsxs)(j.Fragment,{children:[w?(0,j.jsx)(_e.hU,{size:"regular",appearance:"default",as:"a",href:w,"data-test-id":"home.header.returnToRefererButton",children:(0,j.jsx)(he.s$,{})}):(0,j.jsx)(pe.h,{}),(0,j.jsxs)("div",{className:at,children:[h&&(0,j.jsx)(et.c,{dataTestId:"portals.create_review_header",portalId:""}),o&&!_&&(0,j.jsx)(_e.Yz,{as:"a",href:(0,se.Cp)("?trk=portals_btn_topnav"),target:"_blank",analyticsLocation:"Top Nav"}),(0,j.jsx)(Ye,{email:null===d||void 0===d?void 0:d.email,userThumbnailAvatarUrl:C,teams:f,currentTeam:p,isLoading:y,onTeamSelect:function(e,a){(0,je.dT)()!==e&&(t({eventName:be.B_.TEAM_SWITCHED}),null!==d&&void 0!==d&&d.sub&&n(d.sub,(0,r.Z)({},be.OE.TEAM_ROLE,a===d.sub?"Admin":"Member")),(0,je.RK)(e),window.location.reload())},onLogOutClick:function(){ye.Z.removeUser(),(0,je.d3)(),x.shutdown(),Ce.ho.logoutSession({returnTo:ge.D.logoutReturnTo})}})]})]}),g&&w&&(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(_e.hU,{size:"regular",appearance:"default",as:"a",href:w,children:(0,j.jsx)(he.s$,{})})})]})}var ot="Home_containerLoader__0kJQr",st="Home_verificationOverlay__6WVcp",ct="Home_container__cD9mN",lt="Home_verification__IebV-",ut="Home_mainContent__Z8u3h",dt="Home_withOutageBanner__qEcgg",vt="Home_listHeadingContainer__DfImR",mt="Home_listHeading__wsojq",ft="Home_canUseFreeTier__HU3J7",pt="Home_portalList__aZAXu",_t="Home_reviewListLoader__D24Jb",ht=n(20405),gt=n(19623),wt={buttonContainer:"ListHeadingButton_buttonContainer__64kYF",buttonBadgeContainer:"ListHeadingButton_buttonBadgeContainer__MGBFa",lock:"ListHeadingButton_lock__TfYP7",badgeContainer:"ListHeadingButton_badgeContainer__u39Zc",createResourceButton:"ListHeadingButton_createResourceButton__t9izc",disabled:"ListHeadingButton_disabled__VuUeN",createResourceIcon:"ListHeadingButton_createResourceIcon__FII5B"},xt=function(e){var t=e.type,n=(0,I.T)(),a=n.canUseFreeTier,i=n.canCreateReviews,o=n.canCreatePortals,s=n.isFreeUser,c=n.restrictActionWithModal,u=n.restrictionStatus,d=n.reviews,v=n.portals,m=(0,gt.P)().getEntitlementPopover,f="review"===t,p=a&&"OVER_LIMIT"===u,_=f?i:o,h=f?null!=(null===d||void 0===d?void 0:d.quota)&&null!=(null===d||void 0===d?void 0:d.used)&&d.quota-d.used:null!=(null===v||void 0===v?void 0:v.quota)&&null!=(null===v||void 0===v?void 0:v.used)&&v.quota-v.used,g=a&&(s&&((null===d||void 0===d?void 0:d.used)||(null===v||void 0===v?void 0:v.used))||"portal"===t&&(null===v||void 0===v?void 0:v.quota)&&(null===v||void 0===v?void 0:v.used)||!_&&!p),w=f?{to:"/reviews/create",dataTestId:"portals.create_review_more",restrictionType:"canCreateReviews",analyticsEventName:"create_new_review"}:{to:"/portals/create?new=true",dataTestId:"portals.create_portal_more",restrictionType:"canCreatePortals",analyticsEventName:"create_new_portal"};return(0,j.jsxs)("div",{className:wt.buttonContainer,children:[a&&(0,j.jsxs)("div",{className:l()(wt.buttonBadgeContainer,(0,r.Z)({},wt.lock,p)),children:[!p&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(_e.hU,{as:_?Ie.rU:"button",to:w.to,"data-test-id":w.dataTestId,disabled:!_,className:l()(wt.createResourceButton,(0,r.Z)({},wt.disabled,!_)),onClick:function(e){!a&&c({restrictionType:w.restrictionType,analyticsEventName:w.analyticsEventName,onAccessRefused:function(){return e.preventDefault()}})},children:(0,j.jsx)(he.dR,{size:"small",className:l()((0,r.Z)({},wt.disabledButton,!_))})}),g&&(0,j.jsx)("div",{className:wt.badgeContainer,children:m({target:(0,j.jsx)(_e.Yz,{buttonStyle:"badge",remaining:h,"data-test-id":"list-heading-upgrade-".concat(t),analyticsLocation:"List Heading ".concat(t),fireUpgradeAnalytics:!1}),type:t})})]}),p&&m({target:(0,j.jsx)("div",{children:(0,j.jsx)(ht._,{dataTestId:"list-heading-lock-badge-".concat(t)})}),type:t})]}),!a&&(0,j.jsx)(_e.hU,{as:Ie.rU,to:w.to,"data-test-id":w.dataTestId,className:wt.createResourceButton,onClick:function(e){c({restrictionType:w.restrictionType,analyticsEventName:w.analyticsEventName,onAccessRefused:function(){return e.preventDefault()}})},children:(0,j.jsx)(he.dR,{size:"large",className:wt.createResourceIcon})})]})},bt=n(93433),Ct="CreateResourceCard_container__HpXHy",jt="CreateResourceCard_addIcon__hXJYG",yt="CreateResourceCard_title__MBKm9",Nt="CreateResourceCard_subtitle__nz4pD",Tt="CreateResourceCard_createMessage__0hh1e";function It(e){var t=e.className,n=e.to,r=e.messageKey,a=e.testId,i=e.onClick,o=e.restrictionType,s=e.analyticsEventName,c=(0,I.T)(),u=c.canUseFreeTier,v=c.canCreatePortals,m=c.canCreateReviews,f=c.restrictActionWithModal,p=(0,gt.P)().getEntitlementPopover,_="canCreateReviews"===o?"review":"portal",h="review"===_?m:v,g=(0,j.jsxs)("div",{className:l()(Ct,t),"data-test-id":a,children:[(0,j.jsx)(he.dR,{size:"extra-large",className:jt}),(0,j.jsx)("p",{className:l()(yt,Tt),children:(0,j.jsx)(d.cC,{i18nKey:r,components:[(0,j.jsx)("span",{className:Nt})]})})]}),w=(0,j.jsxs)(Ie.rU,{onClick:function(e){return u?h?null===i||void 0===i?void 0:i():void e.preventDefault():f({restrictionType:o,analyticsEventName:s,onAccessGiven:i,onAccessRefused:function(){return e.preventDefault()}})},to:n,className:l()(Ct,t),"data-test-id":a,children:[(0,j.jsx)(he.dR,{size:"extra-large",className:jt}),(0,j.jsx)("p",{className:l()(yt,Tt),children:(0,j.jsx)(d.cC,{i18nKey:r,components:[(0,j.jsx)("span",{className:Nt})]})})]});return u&&!h?p({target:g,type:_}):w}var Lt=n(88244),Rt=n(31323),kt=n(49185),Pt="PortalCard_container__d5X7X",Mt="PortalCard_topWrapper__TjGs6",Zt="PortalCard_logo__6JpmW",At="PortalCard_lockIcon__XZ1DI",Et="PortalCard_title__PTwA0",St="PortalCard_isTrimmed__2zlIA",Ut="PortalCard_subtitle__6Q8IS",Dt="PortalCard_inverted__7RDVr";function Ft(e){var t=e.title,n=e.logo,a=e.backgroundColor,i=e.textColor,o=e.url,s=e.reviewCount,c=e.isLocked,u=(0,d.$G)().t,v="white"===i||a===i;return(0,j.jsxs)(Ie.rU,{to:o,className:Pt,style:{backgroundColor:a},"data-test-id":t,children:[(0,j.jsxs)("div",{className:Mt,children:[n&&(0,j.jsx)(ke.q,{size:"medium",imageUrl:n,backgroundColor:"transparent",className:Zt}),c&&(0,j.jsx)(he.Z0,{className:At,"data-test-id":"portalCard.icon.lock",style:{color:i}})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:l()(Et,St,(0,r.Z)({},Dt,v)),style:{color:i},children:t}),(0,j.jsx)("p",{className:l()(Ut,(0,r.Z)({},Dt,v)),style:{color:i},children:u("portalListItem.review_count",{count:s})})]})]})}var Ht="PortalRibbon_root__87s34",qt="PortalRibbon_emptyCard__6nvpk",Bt="PortalRibbon_itemsContainer__TKl7S",zt="PortalRibbon_portalCardContainer__Ejgut",Ot=function(e){var t=e.items,n=(0,d.$G)().t,r=(0,R.G)(),a=r.isMinTablet,i=r.isMinDesktop,o=r.isMinDesktopM,s=r.isMinDesktopL,c=function(e,t,n,r){return e?6:t?5:n?4:r?3:2}(r.isMinDesktopXL,s,o,i),l=function(e,t){return e<t?t-e:0}(t.length,c);return(0,j.jsx)("div",{className:Ht,"data-empty-placeholders-count":a||0!==t.length?void 0:l,children:(0,j.jsxs)(Rt.V,{itemsContainerClassName:Bt,stepSize:c,children:[t.map((function(e){var t=e.portal,r=e.reviewCount;return(0,j.jsx)("div",{className:zt,"data-test-id":"portalRibbon.item",children:(0,j.jsx)(Ft,{url:"/portals/".concat(t.publicId),title:t.title||n("portal.untitled"),logo:t.logoUrl,backgroundColor:t.color,textColor:(0,kt.e)(t.color),reviewCount:r||0,isLocked:t.passwordProtected})},"portal-ribbon-card-".concat(t.publicId))})),a?null:(0,bt.Z)(Array(l)).map((function(e,t){return(0,j.jsx)("div",{className:zt,"data-test-id":"portalRibbon.item.emptyPortalCardContainer",children:(0,j.jsx)(Lt.s,{to:"/portals/create?new=true",className:qt,isDisabled:!0,showIcon:!1,restrictionType:"canCreatePortals",analyticsEventName:"create_new_portal"})},"portal-ribbon-item-".concat(t))})),a?(0,bt.Z)(Array(l)).map((function(e,n){return(0,j.jsx)("div",{className:zt,"data-test-id":"portalRibbon.item.emptyPortalCardContainer",children:0===n&&0===t.length?(0,j.jsx)(It,{to:"/portals/create?new=true",messageKey:"portalList.create_portal_card_title",testId:"portals.create_portal",className:qt,restrictionType:"canCreatePortals",analyticsEventName:"create_new_portal"}):(0,j.jsx)(Lt.s,{to:"/portals/create?new=true",className:qt,restrictionType:"canCreatePortals",analyticsEventName:"create_new_portal"})},"portal-ribbon-item-".concat(n))})):null]})})},Wt="ReviewList_container__0nThY",Gt="ReviewList_createReviewCard__1tPej",$t="ReviewList_wideCard__vWNgA",Xt=n(98350),Jt=n(66893),Vt=n(21800),Kt=function(e){return e.reviewItemsFetched},Qt=function(e){var t,n,r,a=e.review,o=(0,d.$G)().t,s=(0,v.v9)(Kt),c=(0,u.useState)(!0),l=(0,i.Z)(c,2),m=l[0],f=l[1],p=a.reviewCollectionId,_=a.publicId,h=(0,Jt.o)({reviewId:_}),g=(0,u.useMemo)(Vt.yh,[]),w=(0,v.v9)((function(e){return g(e,_)})),x=(0,u.useCallback)((function(){f(!1)}),[]),b=a.title?a.title:o("review.untitled"),C=p?null!==(t=a.reviewCollection)&&void 0!==t&&t.title?null===(n=a.reviewCollection)||void 0===n?void 0:n.title:o("portal.untitled"):null,y=m&&!s[_];return(0,j.jsx)("div",{children:(0,j.jsx)(Xt.A,{reviewItems:w,footerTitle:b,enableTracker:null!==a.actionRequestType||a.commentsEnabled||Boolean(null===(r=a.stats)||void 0===r?void 0:r.totalCommentCount),enableContextMenu:!0,enableShowInPortal:!0,review:a,portalTitle:C,reviewPath:h,isLoading:y,onPreviewLoad:x,showLoader:!0})})},Yt=function(e){var t=e.items,n=(0,R.G)(),r=n.isMinTablet,a=n.isMinDesktop,i=n.isMinDesktopL,o=n.isMinDesktopXL,s=(0,L.o)(),c=function(e,t,n,r,a){var i=t?6:n?4:2;if(0===e)return i;if(e<i)return i-e;var o=t?3:r?2:1;return o-e%o}(t.length,o,i,a),u=function(){s.trackCreateReviewTapped()};return(0,j.jsxs)("div",{className:Wt,children:[null===t||void 0===t?void 0:t.map((function(e){return(0,j.jsx)("div",{"data-test-id":"reviewList.item",children:(0,j.jsx)(Qt,{review:e})},"review-card-".concat(e.publicId))})),r?null:(0,bt.Z)(Array(c)).map((function(e,t){return(0,j.jsx)("div",{"data-test-id":"reviewList.item.emptyReviewCardContainer",children:(0,j.jsx)(Lt.s,{to:"/reviews/create",onClick:u,className:$t,isDisabled:!0,showIcon:!1,restrictionType:"canCreateReviews",analyticsEventName:"create_new_review"})},"review-card-".concat(t))})),r?(0,bt.Z)(Array(c)).map((function(e,n){return(0,j.jsx)("div",{"data-test-id":"reviewList.item.emptyReviewCardContainer",children:0===n&&0===t.length?(0,j.jsx)(It,{className:l()(Gt,$t),testId:"portals.create_review",to:"/reviews/create",messageKey:"portalList.create_review_card_title",onClick:u,restrictionType:"canCreateReviews",analyticsEventName:"create_new_review"}):(0,j.jsx)(Lt.s,{to:"/reviews/create",onClick:u,className:$t,restrictionType:"canCreateReviews",analyticsEventName:"create_new_review"})},"review-card-".concat(n))})):null]})};function en(){var e=(0,k.J)(),t=e.portalList,n=e.isFetchingPortals,o=e.refreshPortals,c=(0,R.G)().isMinTablet,f=(0,d.$G)().t,p=(0,m.TH)().state,_=(0,u.useContext)($.L).isOutageBannerOn,h=(0,v.v9)(F.v9),g=(0,I.T)(),w=g.canUseFreeTier,x=g.restrictionStatus,y=(0,X.v)(),N=y.entitlement,P=y.updateEntitlement,M=(0,L.o)(),Z=(0,v.v9)(H.HF),A=function(){var e,t,n=(0,u.useMemo)((function(){return{additionalTypenames:["Review"]}}),[]),r=(0,Q.aM)({query:ie,context:n,requestPolicy:"cache-and-network"}),a=(0,i.Z)(r,1)[0],o=a.data,s=a.fetching;return{reviews:null!==(e=null===o||void 0===o||null===(t=o.reviews)||void 0===t?void 0:t.nodes)&&void 0!==e?e:[],isFetchingReviews:s}}(),E=A.reviews,S=A.isFetchingReviews,z=(0,u.useContext)(G.H),O=z.setIdentity,J=z.setIsOverLimit,V=(0,u.useState)(!(null!==Z&&void 0!==Z&&Z.email_verified)),K=(0,i.Z)(V,2),Y=K[0],ee=K[1],te=(0,u.useState)(null),ne=(0,i.Z)(te,2),re=ne[0],se=ne[1],ce=function(e){var t=e.reviewsCount,n=e.portalsCount,r=e.isFetchingPortals,a=e.isFetchingReviews,o=(0,R.G)().isMinDesktopL,s=U(q),c=(0,i.Z)(s,2),l=c[0],u=c[1],d=U(B),m=(0,i.Z)(d,2),f=m[0],p=m[1],_=(0,v.v9)(F.v9),h=(0,v.v9)(H.HF),g=(0,I.T)().restrictionStatus;if(!o||!_||null===h||void 0===h||!h.email_verified||"OVER_LIMIT"===g||r||a)return{type:null};if(!l)return t>0?(u(Number(new Date).toString()),{type:null}):{type:"reviews",markAsSeen:function(){return u(Number(new Date).toString())}};var w=(0,D.default)(new Date,7);return!f&&t>=2&&0===n&&null!==l&&new Date(Number(l))<w?{type:"portals",markAsSeen:function(){return p(Number(new Date).toString())}}:{type:null}}({reviewsCount:E.length,portalsCount:t.length,isFetchingPortals:n,isFetchingReviews:S}),le=ce.type,ue=ce.markAsSeen,de=(0,u.useState)(""),ve=(0,i.Z)(de,2),fe=ve[0],pe=ve[1],_e=ae({first:3,after:""}).pageInfo;if(ae({after:fe,pause:""===fe}),(0,u.useEffect)((function(){_e&&_e.hasNextPage&&pe(_e.endCursor)}),[_e]),(0,u.useEffect)((function(){O("OWNER")}),[O]),(0,u.useEffect)((function(){J(w&&"OVER_LIMIT"===x)}),[w,x,J]),(0,u.useEffect)((function(){document.title=f("app.document_default_title")}),[f]),(0,u.useEffect)((function(){if(w&&null!==p&&void 0!==p&&p.refreshEntitlements){var e=function(){var e=(0,a.Z)(s().mark((function e(){var t,n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N({query:"portals,storage,reviews"});case 2:null!==(n=e.sent)&&void 0!==n&&null!==(t=n.entitlements)&&void 0!==t&&t.portals&&P(["portals","reviews","storage"],[n.entitlements.portals,n.entitlements.reviews,null===(r=n.entitlements)||void 0===r?void 0:r.storage]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[w,null===p||void 0===p?void 0:p.refreshEntitlements]),(0,u.useEffect)((function(){w&&null!==p&&void 0!==p&&p.refreshPortals&&o()}),[w,null===p||void 0===p?void 0:p.refreshPortals]),(0,u.useEffect)((function(){var e=t.map((function(e){return e.portal}));M.updatePortalData({portals:e})}),[M,t,null===Z||void 0===Z?void 0:Z.sub]),(0,u.useEffect)((function(){null!==le&&(se(le),null===ue||void 0===ue||ue())}),[le,ue]),(0,u.useEffect)((function(){Y&&null!==Z&&void 0!==Z&&Z.email_verified&&ee(!(null!==Z&&void 0!==Z&&Z.email_verified))}),[null===Z||void 0===Z?void 0:Z.email_verified,Y]),b(Y),n)return(0,j.jsx)("div",{className:ot,children:(0,j.jsx)(C.a,{})});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:l()(!(null!==Z&&void 0!==Z&&Z.email_verified)&&st)}),(0,j.jsxs)("div",{className:l()(ct,!(null!==Z&&void 0!==Z&&Z.email_verified)&&lt),children:[(0,j.jsx)(it,{}),(0,j.jsxs)("div",{className:l()(ut,_&&dt),children:[(0,j.jsxs)("div",{className:vt,children:[(0,j.jsx)("h1",{className:l()(mt,(0,r.Z)({},ft,w)),"data-test-id":"portals.list.heading",children:f("portalList.portals")}),c&&(0,j.jsx)(xt,{type:"portal"})]}),(0,j.jsx)("div",{className:pt,children:(0,j.jsx)(Ot,{items:t})}),(0,j.jsxs)("div",{className:vt,children:[(0,j.jsx)("h1",{className:l()(mt,(0,r.Z)({},ft,w)),children:f("reviews")}),c&&(0,j.jsx)(xt,{type:"review"})]}),c&&(0,j.jsx)(W.n,{placeAttention:!t||t.length<=0,tier:h}),S?(0,j.jsx)("div",{className:_t,children:(0,j.jsx)(C.a,{})}):(0,j.jsx)(Yt,{items:E}),!c&&(0,j.jsx)(oe.W,{children:f("portalList.mobile_disclaimer_banner")}),(0,j.jsx)(me,{})]})]}),(0,j.jsx)(T,{type:re,onDismiss:function(){return se(null)}})]})}},39040:function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var r=n(29297),a=n(38527),i=n(4522);function o(e,t){(0,i.Z)(2,arguments);var n=(0,a.default)(e),o=(0,r.Z)(t);return isNaN(o)?new Date(NaN):o?(n.setDate(n.getDate()+o),n):n}},76753:function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var r=n(39040),a=n(4522),i=n(29297);function o(e,t){(0,a.Z)(2,arguments);var n=(0,i.Z)(t);return(0,r.default)(e,-n)}},5107:function(e,t,n){var r=n(72791),a=n(8624);t.Z=function(e){var t=(0,r.useState)(!1),n=t[0],i=t[1];return(0,r.useEffect)((function(){if(e.current){var t,n=function(){i(!0),clearTimeout(t),t=setTimeout((function(){i(!1)}),150)};return(0,a.on)(e.current,"scroll",n,!1),function(){e.current&&(0,a.S1)(e.current,"scroll",n,!1)}}return function(){}}),[e]),n}}}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5998],{5877:function(e){e.exports=function(e,t,r,a,n){return n(e,(function(e,n,i){r=a?(a=!1,e):t(r,e,n,i)})),r}},58215:function(e,t,r){var a=r(81207),n=r(24303),i=r(68286),s=r(5877),o=r(86152);e.exports=function(e,t,r){var c=o(e)?a:s,l=arguments.length<3;return c(e,i(t,4),r,l,n)}},41929:function(e,t,r){"use strict";var a=r(98788),n=r(94776),i=r.n(n),s=r(52322),o=r(13980),c=r.n(o),l=r(2784),u=r(6091),d=r(57580),p=r(72164),m=r(47968),g=r(72597),_=function(e){var t=e.value,r=e.defaultValue,n=e.errorMessage,o=e.updateValue,c=e.variant,_=(0,l.useState)(t),f=_[0],v=_[1],h=g.T.getCountryByCode(t),y=g.T.getCountryByCode(r),b=function(){var e=(0,a.Z)(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=g.T.getCountryByName(t))){e.next=6;break}return e.next=4,o("country_code",r.id,!0);case 4:e.next=7;break;case 6:o("country_code","",!0),v(t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,s.jsxs)("div",{children:[(0,s.jsx)(u.Z,{data:m.Z,label:p.Z.t("form.account.label.country_code"),name:"country_code",defaultValue:y&&y.label||"",value:h&&h.label||f,onChange:b,valid:0,variant:c}),(0,s.jsx)(d.ZP,{message:n,type:"error"})]})};_.propTypes={value:c().string,defaultValue:c().string,errorMessage:c().string,updateValue:c().func.isRequired,variant:c().string},_.defaultProps={value:"",variant:"default"},t.Z=_},57580:function(e,t,r){"use strict";r.d(t,{A_:function(){return o},JN:function(){return c},wZ:function(){return u}});var a=r(52322),n=r(13980),i=r.n(n),s=(r(2784),r(18723)),o="error",c="validated",l="warning",u="info",d=function(e){var t=e.type,r=e.message;if(!r)return null;var n=t!==l&&t!==u;return(0,a.jsxs)("div",{className:"form-notification form-notification--".concat(t),children:[n&&(0,a.jsx)(s.Z,{type:t===o?"Error":"Valid",className:"form-notification__icon"}),(0,a.jsx)("span",{className:"form-notification__message",children:r})]})};d.propTypes={type:i().oneOf([o,c,l,u]).isRequired,message:i().node},d.defaultProps={type:o},t.ZP=d},91956:function(e,t,r){"use strict";var a=r(98788),n=r(94776),i=r.n(n),s=r(52322),o=r(13980),c=r.n(o),l=(r(2784),r(6091)),u=r(57580),d=r(70813),p=r(55907),m=r(8870),g=r(72164),_=r(72597),f=r(99868),v=function(e){var t=e.value,r=e.errorMessage,n=e.updateValue,o=e.countryCode,c=void 0===o?"":o;if(void 0===(0,m.hl)(d.K4,"on"))return null;var v=_.T.getCountryByCode(c),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"US"===(null===t||void 0===t?void 0:t.id)?_.H.getStateByCode(e):null}(t,v),y="US"===(null===v||void 0===v?void 0:v.id)?"":"statefield--hidden",b=function(){var e=(0,a.Z)(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=_.H.getStateByName(t))){e.next=6;break}return e.next=4,n("state_code",r.id,!0);case 4:e.next=7;break;case 6:n("state_code","",!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,s.jsxs)("div",{className:"statefield ".concat(y),children:[(0,s.jsx)(l.Z,{data:f.Z,label:g.Z.t("form.account.label.state_code"),defaultValue:(null===h||void 0===h?void 0:h.label)||"",value:(null===h||void 0===h?void 0:h.label)||"",name:"state_code",onChange:b,valid:p.d.DONT_CHECK,noResultsLabel:g.Z.t("form.account.error.no_state_results")}),(0,s.jsx)(u.ZP,{message:r,type:"error"})]})};v.propTypes={value:c().string,errorMessage:c().string,updateValue:c().func.isRequired,countryCode:c().string},v.defaultProps={value:""},t.Z=v},50959:function(e,t,r){"use strict";var a=r(66383),n=r(52322),i=r(13980),s=r.n(i),o=(r(2784),r(57580)),c=r(58491),l=r(55907),u=r(72164),d=r(72597),p=function(e){return new RegExp("(".concat(e,")(.+)"),"g")},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return e;var r=t.vatPrefix;return r?e.match(p(r))?e:r:e},g=function(e){var t,r=e.value,i=e.errorMessage,s=e.updateValue,g=e.countryCode,_=void 0===g?"":g,f=d.T.getCountryByCode(_),v=m(r,f),h=(null===f||void 0===f?void 0:f.vatPrefix)||"-";(null===f||void 0===f?void 0:f.vatPrefix)?t=(0,a.Z)(v.split(p(h)).filter((function(e){return e})),2)[1]:t=v;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"vatfield",children:[(0,n.jsx)(c.Z,{variant:"readonly",value:h,name:"vat_prefix",valid:l.d.DONT_CHECK,className:"vatfield__prefix-field"}),(0,n.jsx)(c.Z,{label:u.Z.t("form.account.label.vat_number")+" "+u.Z.t("form.account.label.not_required"),value:t||"",name:"vat_user_value",onChange:function(e){var t="".concat((null===f||void 0===f?void 0:f.vatPrefix)||"").concat(e.target.value);s("vat_number",m(t,f),!0)},valid:l.d.DONT_CHECK,description:u.Z.t("form.account.description.vat_number"),hidden:f&&!f.vatPrefix&&""!==f.vatPrefix,className:"vatfield__text-field"})]}),(0,n.jsx)(c.Z,{value:v,name:"vat_number",valid:l.d.DONT_CHECK,className:"vatfield__value-field",type:"hidden"}),(0,n.jsx)(o.ZP,{message:i,type:"error"})]})};g.propTypes={value:s().string,errorMessage:s().string,updateValue:s().func.isRequired,countryCode:s().string},g.defaultProps={value:""},t.Z=g},19604:function(e,t,r){"use strict";r.d(t,{Z:function(){return Re}});var a=r(13706),n=r(98788),i=r(90581),s=r(27805),o=r(47842),c=r(21218),l=r(70865),u=r(96670),d=r(88673),p=r(94776),m=r.n(p),g=r(52322),_=r(13980),f=r.n(_),v=r(2784),h=r(17635),y=r(70273),b=r(27497),Z=r(91504),x=r(47062),w=r(94539),k=r(51393),E=r(70813),P=r(6442),N=r(41202),R=r(25356),T=r(84011),S=r(45941),j=r(22808),C=r(14334),F=r(1301),U=r(73293),D=r(47730),O=r(43162),B=r(8870),A=r(72164),L=r(83043),V=r(90991),q=r(72779),M=r.n(q),I=r(15144),z=r(88769),H=r(57580),K=r(41929),G=r(91956),W=r(58491),Y=r(50959),X=r(55907),Q=function(e){var t=e.companyName,r=e.countryCode,a=e.streetAndNumber,i=e.city,s=e.zipcode,o=e.state_code,c=e.country,l=e.vatNumber,u=e.updateValue,d=e.getErrorMessage,p=e.variant,_=v.useCallback((function(e){return u(e.target.name,e.target.value)})),f=function(){var e=(0,n.Z)(m().mark((function e(t,r){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t,r,!0);case 2:return e.next=4,u("vat_number","",!0);case 4:return e.next=6,u("state_code","",!0);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return(0,g.jsxs)(v.Fragment,{children:[(0,g.jsx)("legend",{className:"signup-form__legend",children:A.Z.t("form.account.billing_address")}),(0,g.jsx)(W.Z,{label:A.Z.t("form.account.label.company")+" "+A.Z.t("form.account.label.not_required"),value:t,name:"company_name",onChange:_}),(0,g.jsx)(H.ZP,{message:d("company_name"),type:"error"}),(0,g.jsx)(W.Z,{label:A.Z.t("form.account.label.street_and_number"),value:a,name:"street_and_number",onChange:_,valid:X.d.DONT_CHECK}),(0,g.jsx)(H.ZP,{message:d("street_and_number"),type:"error"}),(0,g.jsx)(W.Z,{label:A.Z.t("form.account.label.city"),value:i,name:"city",onChange:_,valid:X.d.DONT_CHECK}),(0,g.jsx)(H.ZP,{message:d("city"),type:"error"}),(0,g.jsx)(W.Z,{label:A.Z.t("form.account.label.zipcode"),value:s,name:"zipcode",onChange:_,valid:X.d.DONT_CHECK}),(0,g.jsx)(H.ZP,{message:d("zipcode"),type:"error"}),(0,g.jsx)(K.Z,{value:r,defaultValue:c,errorMessage:d("country_code"),updateValue:f,variant:p}),(0,g.jsx)(G.Z,{value:o,errorMessage:d("state_code"),updateValue:u,countryCode:r}),(0,g.jsx)(Y.Z,{value:l,errorMessage:d("vat_number"),updateValue:u,countryCode:r})]})};Q.propTypes={companyName:f().string.isRequired,countryCode:f().string.isRequired,streetAndNumber:f().string.isRequired,city:f().string.isRequired,zipcode:f().string.isRequired,state_code:f().string.isRequired,country:f().string.isRequired,vatNumber:f().string.isRequired,updateValue:f().func.isRequired,getErrorMessage:f().func.isRequired,variant:f().string};var J,$,ee=Q,te=r(6091),re=r(18490),ae=r(26893),ne=r(13981),ie=function(){var e=(0,n.Z)(m().mark((function e(t,r){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.Z)(t);case 2:r();case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),se={postal_code:{fieldName:"long_name",formField:"zipcode"},postal_code_prefix:{fieldName:"long_name",formField:"zipcode"},locality:{fieldName:"long_name",formField:"city"},administrative_area_level_1:{fieldName:"short_name",formField:"state_code"},country:{fieldName:"short_name",formField:"country_code"}},oe=function(e,t){return e[se[t].fieldName]},ce=(0,ne.D)((function(e,t,r){J.getPlacePredictions({types:["address"],componentRestrictions:{country:t},input:e},(function(e){if(e){var t=e.map((function(e){return{id:e.place_id,label:e.description}}));r(t)}}))}),300),le=function(e){var t=e.companyName,r=e.countryCode,a=e.streetAndNumber,i=e.city,s=e.zipcode,o=e.state_code,c=e.country,l=e.vatNumber,u=e.updateValue,d=e.getErrorMessage,p=e.variant,_=(0,re.A)().metadata,f=(0,v.useState)([]),h=f[0],y=f[1];(0,v.useEffect)((function(){ie("https://maps.googleapis.com/maps/api/js?key=".concat(_.googleMapsApiKey,"&libraries=places"),(function(){J=new window.google.maps.places.AutocompleteService,$=new window.google.maps.places.PlacesService(document.createElement("div"))}))}),[_.googleMapsApiKey]);var b=v.useCallback((function(e){return u(e.target.name,e.target.value)}),[u]),Z=function(){var e=(0,n.Z)(m().mark((function e(t,r){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t,r,!0);case 2:return e.next=4,u("vat_number","",!0);case 4:return e.next=6,u("state_code","",!0);case 6:r&&(s&&u("zipcode","",!0),i&&u("city","",!0),a&&u("street_and_number","",!0));case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return(0,g.jsxs)(v.Fragment,{children:[(0,g.jsx)("legend",{className:"signup-form__legend",children:A.Z.t("form.account.billing_address")}),(0,g.jsx)(te.Z,{label:A.Z.t("form.account.label.street_and_number"),value:a,name:"street_and_number",formName:"billing",data:h,showEmptyStateMessage:!1,onChange:function(e){u("street_and_number",e);var t=h.find((function(t){return t.label===e}));t?$.getDetails({placeId:t.id,fields:["address_components","formatted_address","name"]},(function(e){var t={},r=!0,a=!1,n=void 0;try{for(var i,s=e.address_components[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var o=i.value,c=o.types[0],l=se[c];if(l){var d=l.formField,p=oe(o,c);t[d]=p}}}catch(m){a=!0,n=m}finally{try{r||null==s.return||s.return()}finally{if(a)throw n}}u("street_and_number",e.name),Object.keys(t).forEach((function(e){u(e,t[e])}))})):e.length>2?ce(e,r,y):y([])},valid:X.d.DONT_CHECK,placeholder:"",maxVisibleItems:ae.ZP.isMobile?3:5,shouldFocus:!0}),(0,g.jsx)(H.ZP,{message:d("street_and_number"),type:"error"}),(0,g.jsx)(W.Z,{label:A.Z.t("form.account.label.city"),value:i,name:"city",onChange:b,valid:X.d.DONT_CHECK}),(0,g.jsx)(H.ZP,{message:d("city"),type:"error"}),(0,g.jsx)(W.Z,{label:A.Z.t("form.account.label.zipcode"),value:s,name:"zipcode",onChange:b,valid:X.d.DONT_CHECK}),(0,g.jsx)(H.ZP,{message:d("zipcode"),type:"error"}),(0,g.jsx)(K.Z,{value:r,defaultValue:c,errorMessage:d("country_code"),updateValue:Z,variant:p}),(0,g.jsx)(G.Z,{value:o,name:"state_code",errorMessage:d("state_code"),updateValue:u,countryCode:r}),(0,g.jsx)(W.Z,{label:A.Z.t("form.account.label.company")+" "+A.Z.t("form.account.label.not_required"),value:t,name:"company_name",onChange:b}),(0,g.jsx)(H.ZP,{message:d("company_name"),type:"error"}),(0,g.jsx)(Y.Z,{value:l,errorMessage:d("vat_number"),updateValue:u,countryCode:r})]})};le.propTypes={companyName:f().string.isRequired,countryCode:f().string.isRequired,streetAndNumber:f().string.isRequired,city:f().string.isRequired,zipcode:f().string.isRequired,state_code:f().string.isRequired,country:f().string.isRequired,vatNumber:f().string.isRequired,updateValue:f().func.isRequired,getErrorMessage:f().func.isRequired,variant:f().string};var ue=le,de=function(e){var t=e.givenName,r=e.familyName,a=e.email,n=e.password,i=e.passwordConfirm,s=e.onFieldChange,o=e.getErrorMessage,c=e.validate,l=o("email");return(0,g.jsxs)(v.Fragment,{children:[(0,g.jsx)(W.Z,{autoFocus:!0,label:A.Z.t("form.account.label.given_name"),value:t,name:"given_name",onChange:s,valid:0}),(0,g.jsx)(H.ZP,{message:o("given_name"),type:"error"}),(0,g.jsx)(W.Z,{label:A.Z.t("form.account.label.family_name"),value:r,name:"family_name",onChange:s,valid:0}),(0,g.jsx)(H.ZP,{message:o("family_name"),type:"error"}),(0,g.jsx)(W.Z,{type:"email",label:A.Z.t("form.account.label.email"),value:a,name:"email",onChange:s,valid:c("email")}),(0,g.jsx)(H.ZP,{message:l?(0,g.jsx)("span",{dangerouslySetInnerHTML:{__html:o("email")}}):null,type:"error"}),(0,g.jsx)(W.Z,{value:n,label:A.Z.t("form.account.label.password"),name:"password",type:"password",onChange:s,valid:c("password"),description:A.Z.t("form.account.description.password")}),(0,g.jsx)(H.ZP,{message:o("password"),type:"error"}),(0,g.jsx)(W.Z,{value:i,label:A.Z.t("form.account.label.password_confirm"),name:"password_confirm",type:"password",onChange:s,valid:c("password_confirm")}),(0,g.jsx)(H.ZP,{message:o("password_confirm"),type:"error"})]})};de.propTypes={givenName:f().string.isRequired,familyName:f().string.isRequired,email:f().string.isRequired,password:f().string.isRequired,passwordConfirm:f().string.isRequired,onFieldChange:f().func.isRequired,getErrorMessage:f().func.isRequired,validate:f().func.isRequired};var pe=de,me=r(33119),ge=function(e){var t=e.termsOfService,r=e.onTermsChange,a=e.getErrorMessage,n=e.label,i=n||A.Z.t("form.account.terms_conditions",{options:'tabindex="-1" data-route-context="plus" target="_blank" rel="noopener noreferrer"'});return(0,g.jsxs)(v.Fragment,{children:[(0,g.jsx)(z.Z,{label:i,name:"terms_of_service",onChange:r,checked:t}),(0,g.jsx)(H.ZP,{message:a("terms_of_service"),type:"error"})]})};ge.propTypes={termsOfService:f().bool.isRequired,onTermsChange:f().func.isRequired,getErrorMessage:f().func.isRequired,label:f().string};var _e,fe=ge,ve=r(53438),he=r(2352);!function(e){e.PRO="PRO",e.FREE="FREE",e.UPGRADE="UPGRADE",e.COUPON_FULL="COUPON_FULL",e.COUPON_PARTIAL="COUPON_PARTIAL"}(_e||(_e={}));var ye=function(e){var t,r=e.type,a=void 0===r?_e.PRO:r,n=e.data,i=e.country,s=e.tier,o=e.errors,c=e.isPending,d=e.isSubmitButtonActive,p=e.getErrorMessage,m=e.validate,_=e.updateValue,f=e.onFormSubmit,b=e.auth,Z=e.updateTier,x=e.desiredTier,w=function(e){e.target.name=e.target.name.replace("monthlyBilling","billing").replace("yearlyBilling","billing");var t=e.target.value;"checkbox"===e.target.type&&(t=e.target.checked),_(e.target.name,t)},k=(0,y.ZY)(),R=k&&(0,y.EV)(),T=new URLSearchParams(location.search).get("tier"),S=(0,h.v9)(he.DI),j=function(){var e,t,r;return!(null===S||void 0===S||null===(e=S.subscription)||void 0===e?void 0:e.scopes)||(null===S||void 0===S||null===(t=S.subscription)||void 0===t||null===(r=t.scopes)||void 0===r?void 0:r.can_change_country_and_currency)},C=P.Z.isShowUiDiscountExperiment(),F={showLegend:a===_e.COUPON_FULL,showExpiredError:"expired"===(null===o||void 0===o||null===(t=o.assign_transfer)||void 0===t?void 0:t.convert[0]),showPlans:a===_e.PRO||a===_e.UPGRADE||a===_e.COUPON_PARTIAL,showAuth:!1,showPersonalInfo:a!==_e.UPGRADE,showBillingInfo:a!==_e.FREE,showTermsOfService:a!==_e.UPGRADE,showMarketingOptIn:a===_e.FREE,showSubmitButton:!0};k&&(F=(0,u.Z)((0,l.Z)({},F),{showPlans:a===_e.UPGRADE,showPersonalInfo:!1,showBillingInfo:a===_e.UPGRADE,showTermsOfService:!1,showMarketingOptIn:!1,showSubmitButton:a===_e.UPGRADE}),R&&(F=(0,u.Z)((0,l.Z)({},F),{showPlans:a!==_e.FREE,showAuth:b.isLoggedIn,showBillingInfo:a!==_e.FREE,showSubmitButton:!0})));var U=(0,v.useCallback)((function(e,t){t!==me.m.desiredTier?_(t,e):Z(t,e)}),[Z,_]),D=(0,v.useCallback)((function(e,t){_(e,t)}),[_]),O="on"===(0,B.hl)(E.Q6,"on")?(0,g.jsx)(ue,{companyName:n.company_name,countryCode:n.country_code,streetAndNumber:n.street_and_number,city:n.city,zipcode:n.zipcode,state_code:n.state_code,country:i,vatNumber:n.vat_number,updateValue:_,getErrorMessage:p,variant:j()?void 0:"readonly"}):(0,g.jsx)(ee,{companyName:n.company_name,countryCode:n.country_code,streetAndNumber:n.street_and_number,city:n.city,zipcode:n.zipcode,state_code:n.state_code,country:i,vatNumber:n.vat_number,updateValue:_,getErrorMessage:p,variant:j()?void 0:"readonly"}),L=M()("signup-form",{"signup-form__wide-view":C}),V=M()({"signup-form__two-columns":C}),q=M()({"signup-form__form-width":C});return(0,g.jsxs)("div",{className:L,"data-testid":"billing-info-form",children:[(0,g.jsx)("h2",{className:"signup-form__pricing-title",children:A.Z.t("form.account.billing_title")}),(0,g.jsxs)("div",{className:V,children:[(0,g.jsxs)("form",{className:q,method:"post",onSubmit:f,children:[F.showLegend&&(0,g.jsx)("legend",{className:"signup-form__legend",children:A.Z.t("form.account.legend.free_plus")}),F.showExpiredError&&(0,g.jsxs)(v.Fragment,{children:[(0,g.jsx)(H.ZP,{message:A.Z.t("form.account.error.convert.expired"),type:"error"},"account_error_converter"),(0,g.jsx)("br",{},"account_error_break")]}),F.showPlans&&!C&&(0,g.jsx)(me.Z,{tier:s,billing:n.billing,defaultTier:T,country:n.country_code,onDropdownSelect:U}),F.showPersonalInfo&&(0,g.jsx)(pe,{givenName:n.given_name,familyName:n.family_name,email:n.email,password:n.password,passwordConfirm:n.password_confirm,getErrorMessage:p,validate:m,onFieldChange:w}),F.showBillingInfo&&O,F.showTermsOfService&&(0,g.jsx)(fe,{termsOfService:n.terms_of_service||!1,onTermsChange:w,getErrorMessage:p,label:a===_e.FREE?A.Z.t("form.account.terms_conditions",{options:'tabindex="-1" data-route-context="plus" target="_blank" rel="noopener noreferrer"'}):void 0}),F.showMarketingOptIn&&(0,g.jsx)(z.Z,{label:A.Z.t("form.account.marketing_opt_in"),name:"email_marketing_opted_in",onChange:w,checked:n.email_marketing_opted_in||!1}),F.showSubmitButton&&(0,g.jsx)(I.Z,{onClick:f,active:d,text:c?A.Z.t("form.submitting"):A.Z.t("form.account.billing_cta"),className:"button__billing-cta",dataTestId:"go-to-payment-button",submit:!0})]}),C&&F.showPlans&&(0,g.jsx)(ve.t,{desiredTier:x,desiredPeriod:n.billing,tier:s,country:n.country_code,onDropdownSelect:U,onChangeCouponCode:D,showTiersDropdown:!0,location:N.Ct.BILLING_DETAILS,comingFromEmailLink:Boolean(new URLSearchParams(location.search).get("coupon"))})]})]})},be=function(e){var t=e.currency,r=e.total,a=A.Z.t("number.currency.".concat(t.toUpperCase())),n=A.Z.number(r,{precision:0});return(0,g.jsx)(v.Fragment,{children:(0,g.jsxs)("span",{children:[a,n]})})};be.propTypes={currency:f().string.isRequired,total:f().number.isRequired};var Ze=v.memo(be),xe=r(33197),we=r(51746),ke=function(e){var t=e.onTierSelect,r=e.tier,a=r.month.currency,n=r.month.total;return(0,g.jsxs)("div",{className:"free-account-tiers",children:[(0,g.jsx)("h1",{className:"free-account-tiers__title",children:A.Z.t("splash.heading.line_2_free")}),(0,g.jsxs)("div",{className:"tiers__list",children:[(0,g.jsxs)("div",{className:"tier",children:[(0,g.jsxs)("div",{className:"tier__content",children:[(0,g.jsx)("h2",{className:"tier__title",children:"WeTransfer Account"}),(0,g.jsx)("h3",{className:"tier__subtitle",children:A.Z.t("splash.plan.free_account.price_label")}),(0,g.jsxs)("ul",{className:"tier__features",children:[(0,g.jsx)("li",{className:"tier__feature-item tier__feature-item--unavailable",children:A.Z.t("splash.plan.free_account.feature_1")}),(0,g.jsx)("li",{className:"tier__feature-item",children:A.Z.t("splash.plan.free_account.feature_2",{free_transfer_limit:xe.v8.TRANSFER_LIMIT})}),(0,g.jsx)("li",{className:"tier__feature-item",children:A.Z.t("splash.plan.free_account.feature_3")})]})]}),(0,g.jsx)("button",{className:"button button--enabled button--inline",onClick:t,"data-tier":N.yv.FREE,children:A.Z.t("splash.plan.free_account.cta")})]}),(0,g.jsxs)("div",{className:"tier",children:[(0,g.jsxs)("div",{className:"tier__content",children:[(0,g.jsx)("h2",{className:"tier__title",children:"WeTransfer Pro"}),(0,g.jsx)("h3",{className:"tier__subtitle",children:(0,g.jsxs)("div",{className:"tier__price",children:[(0,g.jsx)(Ze,{currency:a,total:n}),(0,g.jsx)("span",{className:"tier__period",children:A.Z.t("page.signin.plus_month")})]})}),(0,g.jsxs)("ul",{className:"tier__features",children:[(0,g.jsx)("li",{className:"tier__feature-item",children:A.Z.t("splash.plan.pro.feature_1",{storage_limit_pro:xe.SV.STORAGE_LIMIT})}),(0,g.jsx)("li",{className:"tier__feature-item",children:A.Z.t("splash.plan.pro.feature_2",{transfer_limit_pro:(0,we.y)()})}),(0,g.jsx)("li",{className:"tier__feature-item",children:A.Z.t("splash.plan.pro.feature_3")}),(0,g.jsx)("li",{className:"tier__feature-item",children:A.Z.t("splash.plan.pro.feature_4")}),(0,g.jsx)("li",{className:"tier__feature-item",children:A.Z.t("splash.plan.pro.feature_5")})]})]}),(0,g.jsx)("button",{className:"button button--enabled",onClick:t,"data-tier":N.yv.PLUS,children:A.Z.t("page.signin.plus_cta")})]})]})]})};ke.propTypes={onTierSelect:f().func.isRequired,tier:f().object.isRequired};var Ee=v.memo(ke),Pe=function(e){(0,c.Z)(r,e);var t=(0,d.Z)(r);function r(e){var n;(0,i.Z)(this,r),n=t.call(this,e),(0,o.Z)((0,a.Z)(n),"tierNames",{pro_2022:"purchasing_pro",premium_2022:"purchasing_premium"}),(0,o.Z)((0,a.Z)(n),"amplitudeTracking",(function(){var e=n.state,t=e.data,r=e.desiredTier;(0,O.rG)({action:"Subscription Funnel",additionalProperties:{Action:"Shown",Step:"Billing Information","Subscription Tier":(0,D.y3)(r),"Billing Period":(0,D.PQ)(t.billing)}})})),(0,o.Z)((0,a.Z)(n),"trackProPremiumSignup",(function(e){var t=n.state.data.billing===N.XT.MONTHLY?1:12,r=(0,j.hW)(n.props.user);U.Z.trackSnowplowEvent({category:"sign_up_page",action:"click_complete_order",property:r,label:e,value:t}),U.Z.trackGoogleEvent({category:"sign_up_page",action:"click_complete_order",property:r,label:e,value:t})})),(0,o.Z)((0,a.Z)(n),"handleFreeAccountTierSelect",(function(e){U.Z.trackSnowplowEvent({category:"plus_page",action:e.target.dataset.tier===N.yv.FREE?"click_create_an_account":"click_get_wetransfer_plus"}),n.handleTierSelect(e)})),(0,o.Z)((0,a.Z)(n),"updateTier",(function(e,t){t!==n.state.desiredTier&&(n.setState((0,o.Z)({},e,t)),U.Z.trackSnowplowEvent({category:"sign_up_page",action:"click_plan",property:(0,j.hW)(n.props.user),label:n.tierNames[t]}))})),(0,o.Z)((0,a.Z)(n),"handleFormSubmit",(function(e){e&&e.preventDefault(),n.props.uploadInProgress?n.setState({showUploadInProgressWarning:!0}):n.createAccount()})),(0,o.Z)((0,a.Z)(n),"continueUpload",(function(){n.setState({showUploadInProgressWarning:!1})}));var s=n.props.route.query.tier||new URLSearchParams(location.search).get("tier")||N.yv.PRO_2022,c=e.route.query.billing||new URLSearchParams(location.search).get("billing")||"yearly",l=new URLSearchParams(location.search).get("prefill_email")||"";return n.state={data:{billing:c,given_name:"",family_name:"",email:"",password:"",password_confirm:"",company_name:"",street_and_number:"",city:"",zipcode:"",state_code:"",country_code:e.session.region.country,vat_number:"",terms_of_service:!1,email_marketing_opted_in:!1,coupon_code:"",convert:"",sig:""},desiredTier:s,country:e.session.region.country,showUploadInProgressWarning:!1,autoSignUp:!1,autoSignUpPending:!1},n.prefillEmail=l,n.routeBackElement=null,n.formName="upgrade"===e.route.name?"upgrade":"signup",n.createAccount=n.createAccount.bind((0,a.Z)(n)),n.getErrorMessage=n.getErrorMessage.bind((0,a.Z)(n)),n.getPricing=n.getPricing.bind((0,a.Z)(n)),n.validate=n.validate.bind((0,a.Z)(n)),n.validateState=n.validateState.bind((0,a.Z)(n)),n.handleRouteBackClick=n.handleRouteBackClick.bind((0,a.Z)(n)),n.handleTierSelect=n.handleTierSelect.bind((0,a.Z)(n)),n.getBillingDetails=n.getBillingDetails.bind((0,a.Z)(n)),n.hasBillingDetails=!1,n.isFormFillTracked=!1,n.showUiDiscountExperiment=P.Z.isShowUiDiscountExperiment(),n}return(0,s.Z)(r,[{key:"componentDidMount",value:function(){var e=this;return(0,n.Z)(m().mark((function t(){var r,a,n,i,s,o,c,d,p,g,_;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.route.query,a=r.convert,n=r.sig,i=r.prefill,s=e.props.transfer.sender,o=e.props.signUpSSO,c=(0,y.ZY)(),d=(0,y.EV)(),U.Z.trackWithPixelOrSDK("Wetransfer_Signup_Visit"),window.addEventListener("blur",e.validateState,!0),p=e.getFormType(),"signup"!==e.formName||!(0,C.ix)(e.props.user)){t.next=13;break}return g=new URLSearchParams(window.location.search).get("coupon"),_=T.ZP.createCheckoutRoute({tier:e.state.desiredTier,billingPeriod:e.state.data.billing,coupon:g}),window.location.href=_,t.abrupt("return");case 13:if(!c){t.next=22;break}if(d){t.next=19;break}if(p!==_e.PRO){t.next=17;break}return t.abrupt("return",o(N.yv.PRO,"",{tier:e.state.desiredTier}));case 17:if(p!==_e.FREE){t.next=19;break}return t.abrupt("return",o(N.yv.FREE,"",{tier:e.state.desiredTier,login_hint:e.prefillEmail}));case 19:if(p!==_e.UPGRADE||e.state.desiredTier!==N.yv.FREE){t.next=21;break}return t.abrupt("return",L.Z.navigateTo("/"));case 21:e.state.desiredTier===N.yv.FREE&&"signup"===e.formName&&e.setState({autoSignUp:!0});case 22:if(e.getBillingDetails(!0),e.state.desiredTier===N.yv.FREE&&"true"===i&&e.setState((function(e){return{data:(0,u.Z)((0,l.Z)({},e.data),{email:s||""})}})),e.validateState(),!a||!n){t.next=28;break}return t.next=28,e.assignTransferToSignup(a,n);case 28:return e.amplitudeTracking(),t.next=31,(0,S.Z)(Z.X.stripe.url);case 31:case"end":return t.stop()}}),t)})))()}},{key:"assignTransferToSignup",value:function(e,t){var r=this;return(0,n.Z)(m().mark((function a(){return m().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.props.validateForm({convert:e,sig:t},"assign_transfer"),a.next=3,r.updateValue("convert",e);case 3:return a.next=5,r.updateValue("sig",t);case 5:case"end":return a.stop()}}),a)})))()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("blur",this.validateState,!0),this.routeBackElement&&this.routeBackElement.removeEventListener("click",this.handleRouteBackClick),this.props.resetTiersPricing()}},{key:"isSignupFormUpdated",value:function(e,t){return e.given_name!==t.data.given_name||e.family_name!==t.data.family_name||e.email!==t.data.email||e.password!==t.data.password||e.password_confirm!==t.data.password_confirm||e.company_name!==t.data.company_name||e.street_and_number!==t.data.street_and_number||e.city!==t.data.city||e.zipcode!==t.data.zipcode||e.state_code!==t.data.state_code||e.country_code!==t.data.country_code||e.vat_number!==t.data.vat_number}},{key:"componentDidUpdate",value:function(e,t){var r=this;return(0,n.Z)(m().mark((function a(){var n,i,s,o,c,l,u,d,p,g,_,f,v,h,y;return m().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=r.state,i=n.data,s=n.desiredTier,o=n.autoSignUp,c=n.autoSignUpPending,l=r.props,u=l.tiers,d=l.billingDetails,p=l.pending,g=l.auth,_=l.user,e.tiers[s]===u[s]){a.next=6;break}return f=u[s].year.coupon_code||"",a.next=6,r.updateValue("coupon_code",f,!0).then((function(){r.showUiDiscountExperiment?r.updateValue("billing",i.billing,!0):r.updateValue("billing",f?"yearly":i.billing,!0)}));case 6:if(t.data.billing!==r.state.data.billing&&(v={category:"sign_up_page",label:i.billing===N.XT.MONTHLY?1:12,action:"click_billing_cycle",property:(0,j.hW)(_)},U.Z.trackSnowplowEvent(v),U.Z.trackGoogleEvent(v)),s!==N.yv.FREE&&r.isSignupFormUpdated(i,t)&&!r.isFormFillTracked&&(h=(h=r.state.data.billing)===N.XT.MONTHLY?1:12,y={category:"sign_up_page",action:"start_to_fill",property:(0,j.hW)(_),label:r.tierNames[s],value:h},U.Z.trackSnowplowEvent(y),r.isFormFillTracked=!0),d===e.billingDetails||"upgrade"!==r.formName){a.next=24;break}return r.setState({country:d.country_code}),a.next=12,r.updateValue("country_code",d.country_code||"");case 12:return a.next=14,r.updateValue("vat_number",d.vat_number||"");case 14:return a.next=16,r.updateValue("company_name",d.company_name||"");case 16:return a.next=18,r.updateValue("street_and_number",d.street_and_number||"");case 18:return a.next=20,r.updateValue("city",d.city||"");case 20:return a.next=22,r.updateValue("zipcode",d.zipcode||"");case 22:return a.next=24,r.updateValue("state_code",d.state_code||"");case 24:i.country_code!==t.data.country_code||s!==t.desiredTier||i.state_code!==t.data.state_code?r.getBillingDetails(!0):r.getBillingDetails(),!g.isLoggedIn||c||!o||"signup"!==r.formName||p.signup||r.props.isTiersPricingPending||p.validation||r.setState({autoSignUpPending:!0},(function(){r.handleFormSubmit()}));case 26:case"end":return a.stop()}}),a)})))()}},{key:"getBillingDetails",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];"upgrade"!==this.formName||this.hasBillingDetails||void 0===(null===(e=this.props.account)||void 0===e||null===(t=e.subscription)||void 0===t?void 0:t.id)||(this.hasBillingDetails=!0,this.props.getBillingDetails(this.props.account.subscription.id)),r&&this.getPricing()}},{key:"getPricing",value:function(){var e=this;return(0,n.Z)(m().mark((function t(){var r,a,n,i,s;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,a=r.session,n=r.fetchTiersPricing,i=e.state.data,s=new URLSearchParams(window.location.search).get("coupon"),n({country_code:i.country_code||a.region.country||"",vat_number:i.vat_number||"",coupon_code:s||i.coupon_code||"",state_code:i.state_code});case 4:case"end":return t.stop()}}),t)})))()}},{key:"getError",value:function(e){return!this.props.pending.signup&&(this.getRemoteError(e)&&(this.state.data[e]||"country_code"===e)?this.getRemoteError(e):!!document.activeElement&&(!(document.activeElement.name!==e||!this.getLocalError(e)||!this.state.data[e])||!(document.activeElement.name===e||!this.getLocalError(e)||!this.state.data[e])&&this.getLocalError(e)))}},{key:"validate",value:function(e){var t=this.props.errors;return this.state.data[e]||!t[this.form]||t[this.form][e]?this.getError(e)?w.i.NOT_VALID:w.i.VALID:w.i.DONT_CHECK}},{key:"getRemoteError",value:function(e){var t=this.props.errors;if(t[this.formName]&&t[this.formName][e]){var r="form.account.error."+e+"."+t[this.formName][e][0].replace("taken","taken_login");return A.Z.t(r,{login_url:"/log-in"})}return!1}},{key:"formValidation",value:function(){var e=this.props.pending,t=this.state,r=t.data,a=t.desiredTier;if(e[this.formName])return!1;var n={all:["family_name","vat_number","company_name","billing","coupon_code","convert","sig","email_marketing_opted_in"],upgrade:["given_name","email","password","password_confirm","terms_of_service","city"],freeTier:["city","zipcode","country_code","state_code","street_and_number"]};for(var i in(0,y.ZY)()&&n.all.push("given_name","email","password","password_confirm","terms_of_service"),r)if(!n.all.includes(i)&&("US"===r.country_code&&"on"===(0,B.hl)(E.K4,"on")||"state_code"!==i)&&("upgrade"!==this.formName||!n.upgrade.includes(i))&&(a!==N.yv.FREE||!n.freeTier.includes(i))){if(!r[i])return!1;if(this.validate(i)===w.i.NOT_VALID)return!1}return!0}},{key:"getPlanData",value:function(e){var t,r=e.month,a=e.year;return(t={},(0,o.Z)(t,N.XT.MONTHLY,r),(0,o.Z)(t,N.XT.YEARLY,a),t)[this.state.data.billing]}},{key:"createAccount",value:function(){var e=this;return(0,n.Z)(m().mark((function t(){var r,a,n,i,s,o,c,d,p,g,_,f,v,h,y,b,Z;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.formValidation()){t.next=2;break}return t.abrupt("return",e);case 2:r=e.state,a=r.desiredTier,n=r.data,a===N.yv.PLUS&&e.trackPlusSignup(),a===N.yv.PRO_2022&&e.trackProPremiumSignup(e.tierNames[a]),a===N.yv.PREMIUM_2022&&e.trackProPremiumSignup(e.tierNames[a]),a===N.yv.FREE&&e.trackFreeAccountSignup(),i=e.props,s=i.session,o=i.account,c=i.setFormState,d=i.signup,p=i.tiers,c(!1),g=(null===n||void 0===n?void 0:n.billing)===N.XT.YEARLY?"year":"month",_=p[a][g].coupon_code||"",f=(0,u.Z)((0,l.Z)({},n),{coupon_code:_}),v=new URLSearchParams(location.search).get("public_id")||"",h=new URLSearchParams(location.search).get("signature")||"",y=e.getPlanData(e.props.tiers[a]),b=y.plan_id,Z=y.package_and_price_token,d(f,{plan_id:b,package_and_price_token:Z,trk:U.Z.getReferralKey()||"",trk_extra:e.props.route.query.trk_extra,wt_sent:R.Z.getWTSent(),wt_from:R.Z.getLastUsedSender(),page_version:30,language:s.language,planTier:a,public_id:v,signature:h},e.formName,o.subscription.id),e.props.user.errors&&e.props.user.errors[e.formName]&&e.scrollToError();case 17:case"end":return t.stop()}}),t)})))()}},{key:"trackPlusSignup",value:function(){U.Z.trackSnowplowEvent({category:"sign_up_page",action:"click_complete_order",label:this.state.data.billing}),U.Z.trackGoogleEvent({category:"sign_up_page",action:"click_complete_order",label:this.state.data.billing}),U.Z.trackGoogleEvent({category:"Plus",action:"Signup Form Submit",label:this.state.data.billing,channel:U.Z.getReferralKey()||""})}},{key:"trackFreeAccountSignup",value:function(){U.Z.trackSnowplowEvent({category:"sign_up_page",action:"click_lets_go",label:"free_account"})}},{key:"handleRouteBackClick",value:function(){this.props.setFormState(!1),this.setState({desiredTier:""}),this.props.setReturnPath("","")}},{key:"handleTierSelect",value:function(e){var t=e.target.dataset.tier,r=this.props,a=r.route;(0,r.setReturnPath)(a.query.trk?"/sign-up?trk=".concat(a.query.trk):"/sign-up","Plans"),this.setState({desiredTier:t})}},{key:"userHasPartialCoupon",value:function(e){var t=e.coupon_code,r=e.subtotal,a=e.discount;return t&&a<r}},{key:"userHasFullCoupon",value:function(e){var t=e.coupon_code,r=e.subtotal,a=e.discount;return t&&a>=r}},{key:"getFormType",value:function(){var e=this.state.desiredTier,t=this.props.tiers[e];return"upgrade"===this.formName?_e.UPGRADE:e===N.yv.FREE?_e.FREE:void 0!==(null===t||void 0===t?void 0:t.year)&&this.userHasFullCoupon(t.year)?_e.COUPON_FULL:void 0!==(null===t||void 0===t?void 0:t.year)&&this.userHasPartialCoupon(t.year)?_e.COUPON_PARTIAL:_e.PRO}},{key:"render",value:function(){var e=this.state,t=e.desiredTier,r=e.autoSignUp,a=this.props,n=a.pending,i=a.errors,s=a.tiers,o=a.auth,c=s[t],l=""!==t,u=(0,y.ZY)(),d=(0,y.EV)();if(!c||n.getBillingDetails||r||u&&"signup"===this.formName&&!d)return(0,g.jsx)(k.Z,{});if(l&&(this.routeBackElement=document.getElementsByClassName("panel__back")[0],this.routeBackElement&&u&&(this.routeBackElement.href="".concat(this.routeBackElement.href.split("?")[0]).concat(location.search)),this.routeBackElement&&this.routeBackElement.addEventListener("click",this.handleRouteBackClick)),!l&&!c.year.coupon_code&&"signup"===this.formName)return(0,g.jsx)(Ee,{onTierSelect:this.handleFreeAccountTierSelect,tier:c});var p=this.formValidation(),m=this.getFormType();return(0,g.jsxs)(v.Fragment,{children:[(0,g.jsx)(ye,{type:m,data:this.state.data,country:this.state.country,tier:c,errors:i,isPending:n[this.formName],isSubmitButtonActive:p,getErrorMessage:this.getErrorMessage,validate:this.validate,updateValue:this.updateValue,updateTier:this.updateTier,desiredTier:t,onFormSubmit:this.handleFormSubmit,auth:o}),this.state.showUploadInProgressWarning&&(0,g.jsx)(x.Z,{cancelUpload:this.createAccount,continueUpload:this.continueUpload})]})}}]),r}(w.Z);(0,o.Z)(Pe,"propTypes",{route:f().object,user:f().object,uploadInProgress:f().bool.isRequired,getBillingDetails:f().func.isRequired,billingDetails:f().object.isRequired});var Ne={validateForm:V.Z.Errors.validateForm,setFormState:V.Z.Route.setFormState,signup:V.Z.User.signup.bind(V.Z.User),getBillingDetails:V.Z.BillingDetails.getBillingDetails,signUpSSO:b.y1},Re=(0,h.$j)((function(e){var t=e.session,r=e.pending,a=e.account,n=e.upload,i=e.transfer,s=e.billingDetails,o=e.auth;return{session:t,pending:r,account:a,uploadInProgress:n.isPending,transfer:i,billingDetails:s,auth:o}}),Ne)((function(e){var t=(0,F.t)();return(0,g.jsx)(Pe,(0,l.Z)({},e,t))}))}}]);
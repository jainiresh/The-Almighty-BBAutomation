(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5529],{37036:function(e,t,i){var s=i(86571),n=i(88746);e.exports=function(e,t,i,a){var r=i.length,o=r,l=!a;if(null==e)return!o;for(e=Object(e);r--;){var u=i[r];if(l&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++r<o;){var h=(u=i[r])[0],c=e[h],p=u[1];if(l&&u[2]){if(void 0===c&&!(h in e))return!1}else{var d=new s;if(a)var f=a(c,p,h,e,t,d);if(!(void 0===f?n(p,c,3,a,d):f))return!1}}return!0}},68286:function(e,t,i){var s=i(26423),n=i(74716),a=i(23059),r=i(86152),o=i(65798);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?r(e)?n(e[0],e[1]):s(e):o(e)}},26423:function(e,t,i){var s=i(37036),n=i(49882),a=i(73477);e.exports=function(e){var t=n(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(i){return i===e||s(i,e,t)}}},74716:function(e,t,i){var s=i(88746),n=i(72579),a=i(95041),r=i(21401),o=i(28792),l=i(73477),u=i(33812);e.exports=function(e,t){return r(e)&&o(t)?l(u(e),t):function(i){var r=n(i,e);return void 0===r&&r===t?a(i,e):s(t,r,3)}}},20256:function(e){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},82952:function(e,t,i){var s=i(13324);e.exports=function(e){return function(t){return s(t,e)}}},49882:function(e,t,i){var s=i(28792),n=i(90249);e.exports=function(e){for(var t=n(e),i=t.length;i--;){var a=t[i],r=e[a];t[i]=[a,r,s(r)]}return t}},28792:function(e,t,i){var s=i(29259);e.exports=function(e){return e===e&&!s(e)}},73477:function(e){e.exports=function(e,t){return function(i){return null!=i&&(i[e]===t&&(void 0!==t||e in Object(i)))}}},65798:function(e,t,i){var s=i(20256),n=i(82952),a=i(21401),r=i(33812);e.exports=function(e){return a(e)?s(r(e)):n(e)}},6091:function(e,t,i){"use strict";i.d(t,{Z:function(){return w}});var s=i(13706),n=i(90581),a=i(27805),r=i(47842),o=i(21218),l=i(88673),u=i(52322),h=i(72779),c=i.n(h),p=i(48102),d=i.n(p),f=i(18149),v=i.n(f),m=i(13980),g=i.n(m),b=i(2784),x=i(94539),y=i(58491),C=i(18723),_=i(73688),N=i(61335),L=i(25356),D=i(26893),k=i(72164),w=function(e){(0,o.Z)(i,e);var t=(0,l.Z)(i);function i(e){var a;return(0,n.Z)(this,i),(a=t.call(this,e)).state={filteredData:[],hideList:!0,listHeight:!1,selectedIndex:"billing"===a.props.formName?-1:0,value:a.props.defaultValue},a.handleBlur=a.handleBlur.bind((0,s.Z)(a)),a.handleChange=a.handleChange.bind((0,s.Z)(a)),a.onReset=a.onReset.bind((0,s.Z)(a)),a}return(0,a.Z)(i,[{key:"componentDidMount",value:function(){var e=this.props.defaultValue;this.setState({filteredData:this.filterList(e)}),e&&this.props.onChange(e)}},{key:"componentDidUpdate",value:function(e){var t=this.props,i=t.value,s=t.formName;e.value!==i&&this.setState({value:i}),"billing"===s&&(this.autoCompleteTextfield.state.value!==i&&this.autoCompleteTextfield.setState({value:i}),v()(e.data,this.props.data)||this.setState({filteredData:this.filterList(i)}))}},{key:"handleBlur",value:function(){this.setState({hideList:!0})}},{key:"handleListClick",value:function(e){this.setState({value:e,hideList:!0}),this.autoCompleteTextfield.setState({value:e}),this.props.onChange(e)}},{key:"handleChange",value:function(e){this.setState({filteredData:this.filterAndSortList(e.target.value),value:e.target.value,hideList:!1}),this.props.onChange(e.target.value)}},{key:"filterAndSortList",value:function(e){var t=this.filterList(e);return this.sortList(t,e).slice(0,15)}},{key:"filterList",value:function(e){var t=new RegExp(d()(e||""),"i"),i=this.props.data.filter((function(e){return t.test(e.label)||t.test(e.spellings)}));if((i=i.length?i:[{id:!1,label:this.props.noResultsLabel}]).length<this.state.selectedIndex&&this.setState({selectedIndex:0}),this.autocompleteNode&&this.autocompleteNode.firstChild){var s=Math.min(this.props.maxVisibleItems,i.length),n=D.ZP.isMobile&&"billing"===this.props.formName?52:36;this.setState({listHeight:(this.autocompleteNode.firstChild.offsetHeight||n)*s})}else this.setState({listHeight:!1});return i}},{key:"sortList",value:function(e,t){var i=e.sort((function(e,t){return e.label<t.label?-1:e.label>t.label?1:0}));return t.length>2&&(i=i.sort((function(e,t){var i=e.priority||1,s=t.priority||1;return i<s?1:i>s?-1:0}))),i}},{key:"generateListItem",value:function(e,t){var i,s,n=this.state.filteredData[e],a=["autocomplete__item"],r=this.state.value;return"billing"===this.props.formName?(D.ZP.isMobile&&a.push("autocomplete__item--mobile"),i=L.Z.highlightTextOnTwoLines(n.label,r||"","span",e),s=(0,u.jsx)("span",{className:"autocomplete__item--wrapper",children:i})):s=i=L.Z.highlightText(n.label,r||"","span"),this.state.selectedIndex===t&&a.push("autocomplete__item--selected"),(0,u.jsx)("li",{className:a.join(" "),onMouseDown:this.handleListClick.bind(this,n.label),children:s},n.id)}},{key:"navigate",value:function(e){var t,i=this.state.selectedIndex,s=Object.keys(this.state.filteredData).length-1;"ArrowDown"===e?t=i<s?i+1:0:"ArrowUp"===e&&(t=i>0?i-1:s),this.setState({selectedIndex:t});var n=s>=this.props.maxVisibleItems?this.props.maxVisibleItems:s+1;return this.scrollableNode.scrollTo(this.state.listHeight/n*t),t}},{key:"onKeyDown",value:function(e){var t,i=this,s=e.key||e.which,n=this.state.selectedIndex;if(s&&("Enter"!==s||!this.props.data.find((function(e){return i.state.value===e.label})))&&(["Enter","ArrowDown","ArrowUp","Escape"].indexOf(s)>-1&&(this.setState({selectedIndex:"billing"===this.props.formName?-1:0}),e.preventDefault()),["ArrowUp","ArrowDown"].indexOf(s)>-1&&this.navigate(s),"Escape"===s&&this.setState({hideList:!0}),"Enter"===s)){if(t=this.state.filteredData[n],!this.state.value||!t||!t.id)return;this.setState({value:t.label,hideList:!0}),this.props.onChange(t.label)}}},{key:"onReset",value:function(){this.props.onChange&&""!==this.state.value&&(this.props.onChange(""),this.setState({value:""})),this.autoCompleteTextfield.reset()}},{key:"render",value:function(){var e=this,t=this.props,i=t.label,s=t.name,n=t.description,a=t.data,r=t.variant,o=t.shouldFocus,l=this.props.valid,h=["autocomplete__list"],p=Object.keys(this.state.filteredData).map((function(t,i){return e.generateListItem(t,i)})),d=(0,u.jsx)("ul",{className:"autocomplete",ref:function(t){return e.autocompleteNode=t},children:p}),f=!this.props.showEmptyStateMessage&&1===p.length&&!1===this.state.filteredData[0].id;this.state.value&&!this.state.hideList&&p&&!f||h.push("autocomplete__list--hidden"),l!==x.i.VALID||a.find((function(t){return e.state.value===t.label}))||(l=x.i.NOT_VALID);var v=this.props.clearable&&this.state.value||this.state.value&&"billing"===this.props.formName&&D.ZP.isMobile,m=(0,u.jsxs)(b.Fragment,{children:[this.props.icon&&(0,u.jsx)(C.Z,{className:"searchbox__icon",type:"Search",color:N.nM},"searchbox_icon"),v&&(0,u.jsx)(C.Z,{className:"searchbox__remove",type:"RemoveCircle",onClick:this.onReset,color:N.J},"searchbox_icon_remove")]}),g=c()("autocomplete",this.props.className,{"autocomplete--with-icon":this.props.icon});return(0,u.jsxs)("div",{className:g,children:[(0,u.jsx)(y.Z,{content:m,ref:function(t){return e.autoCompleteTextfield=t},name:s,type:"text",onChange:this.handleChange,onKeyDown:function(t){return e.onKeyDown(t)},autoComplete:"nope",label:i,description:n,valid:l,shouldFocus:o,value:this.state.value||"",onBlur:this.handleBlur,variant:r,placeholder:this.props.placeholder,className:"autocomplete__input"}),(0,u.jsx)("div",{className:h.join(" "),style:{height:this.state.listHeight+2},children:(0,u.jsx)(_.Z,{ref:function(t){return e.scrollableNode=t},children:d})})]})}}]),i}(b.Component);(0,r.Z)(w,"propTypes",{checked:g().bool,className:g().string,clearable:g().bool,data:g().array.isRequired,defaultValue:g().string,description:g().string,icon:g().bool,label:g().string,name:g().string.isRequired,formName:g().string,onChange:g().func.isRequired,placeholder:g().string,showEmptyStateMessage:g().bool,noResultsLabel:g().string,styles:g().object,valid:g().oneOf([x.i.NOT_VALID,x.i.DONT_CHECK,x.i.VALID]),value:g().string,variant:g().string,maxVisibleItems:g().number,shouldFocus:g().bool}),(0,r.Z)(w,"defaultProps",{valid:x.i.DONT_CHECK,variant:"default",showEmptyStateMessage:!0,noResultsLabel:k.Z.t("form.account.error.no_results"),maxVisibleItems:4})}}]);